(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca310786"],{a1bb:function(e,t,a){"use strict";a.r(t);var s,r,i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.isVisible,width:"80%",top:"12vh","custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isVisible=t}}},[a("header",{staticClass:"header p0 no-selectable",attrs:{slot:"title"},slot:"title"},[a("h1",{staticClass:"inline-block font-semibold fs-xlarge"},[e._v(" Buy Now! - "),a("span",{staticClass:"capitalize"},[e._v(e._s(e.dialogTitle))])])]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"pr2 pl2",attrs:{model:e.form,rules:e.formRules}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:24,sm:12,md:24,lg:24,xl:12}},[a("el-form-item",{attrs:{label:"Company name",prop:"company"}},[a("el-input",{class:{dark:e.dark},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12,md:24,lg:24,xl:12}},[a("el-form-item",{attrs:{label:"Full Name",prop:"fullname"}},[a("el-input",{class:{dark:e.dark},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{class:{dark:e.dark},attrs:{type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),"Other"!==e.dialogTitle?["Datacenter"!==e.dialogTitle?a("el-col",{attrs:{md:24,lg:12}},[a("el-form-item",{attrs:{label:"Capacity",prop:"capacity"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{filterable:"",placeholder:"Select an option"},model:{value:e.form.capacity,callback:function(t){e.$set(e.form,"capacity",t)},expression:"form.capacity"}},e._l(e.capacities,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:e.isRackRequired,prop:"totalRack",label:"Rack total"}},[a("div",{staticClass:"w-fit-full inline-block"},[a("div",{staticClass:"block"},[a("el-slider",{staticClass:"relative",attrs:{id:"rack-slider",disabled:e.isCustomRequest,"show-input":"","input-size":"small"},model:{value:e.form.totalRack,callback:function(t){e.$set(e.form,"totalRack",t)},expression:"form.totalRack"}})],1),a("el-checkbox",{on:{change:e.resetRackTotal},model:{value:e.isCustomRequest,callback:function(t){e.isCustomRequest=t},expression:"isCustomRequest"}},[e._v(" Custom request ")])],1)])],1)]:e._e(),e.isBackboneSelection?[a("el-col",{attrs:{md:24,xl:12}},[a("el-form-item",{ref:"pointA",attrs:{label:"From (A-end)",required:"",prop:"address.pointA"}},[a("point-field",{attrs:{id:"pointA"},on:{"place-changed":function(t){return e.handleAddressChanged(t,"a")}}})],1)],1),a("el-col",{attrs:{md:24,xl:12}},[a("el-form-item",{ref:"pointB",attrs:{label:"To (Z-end)",required:"",prop:"address.pointB"}},[a("point-field",{attrs:{id:"pointB"},on:{"place-changed":function(t){return e.handleAddressChanged(t,"b")}}})],1)],1)]:e.isTransitSelection?[a("el-col",{attrs:{xl:24}},[a("el-form-item",{ref:"transitIP",attrs:{label:"Location(s)",prop:"transitIP"}},[a("v-multi-select",{attrs:{mode:"create",options:e.facsList,"is-required":!0,"is-multiple":!1,loading:e.isLoadingFacs,"is-field-empty":e.isTransitIpEmpty},on:{"values-change":e.handleTransitIPChange,input:e.loadFacsSearch}})],1)],1)]:e._e(),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Message",prop:"message",required:e.isOthersCapacitySelection||"Other"==e.dialogTitle||e.isCustomRequest}},[e.isOthersCapacitySelection||e.isCustomRequest?a("span",{staticClass:"error-message"},[e._v(" - "+e._s(e.messageWhenRequired)+" ")]):e._e(),a("el-input",{class:{dark:e.dark},attrs:{type:"textarea",rows:"4"},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)],1),a("el-col",{attrs:{span:24}},[a("vue-recaptcha",{ref:"catpcha",attrs:{sitekey:e.siteKey,loadRecaptchaScript:!0},on:{verify:e.handleCatchaVerification,error:function(){return e.catchaVerified=!1},expired:function(){return e.catchaVerified=!1}}})],1)],2)],1),a("footer",{staticClass:"footer flex wrap justify-content-space-between pr0 pl6 mt4"},[a("small",{staticClass:"inline-block mt2 mb4"},[a("span",{staticClass:"text-red"},[e._v("*")]),e._v(" indicates required field ")]),a("div",[a("el-button",{staticClass:"mr2",attrs:{plain:"",type:"info"},on:{click:e.closeDialog}},[e._v("Cancel")]),a("el-button",{staticClass:"w-fit-content",attrs:{disabled:!e.catchaVerified,type:"primary",plain:"",loading:e.isSendingData},on:{click:function(t){return e.submitForm("form")},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.submitForm("form")}}},[e._v("Submit Request")])],1)])],1)},n=[],l=(a("99af"),a("a630"),a("caad"),a("d81d"),a("13d5"),a("b0c0"),a("2532"),a("3ca3"),a("498a"),a("2909")),o=(a("96cf"),a("1da1")),c=a("5530"),u=a("2f62"),d=a("9a1e"),m=a("780a"),p=a("a4dc"),f=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,i,n,l,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,i=t.t,n=t.elemnt,l=t.email,o=t.message,s="".concat(p["a"].url,"/auth/message/send"),r=new FormData,r.append("t",i),r.append("email",l),r.append("elemnt",n),r.append("message",o),e.next=9,m["a"].post(s,r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+p["a"].bearer()}});case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=a("0316"),b=a("ceaf"),g=a("e096"),y=a("1b83"),k=a("ddbf"),v=(a("a15b"),a("d3b7"),a("6062"),a("ddb0"),a("2c8b")),C=a("1315"),w={title:"Capacity Buy Request",date:"",small:"A Capacity purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],"Capacity requirement":["capacity",0],From:["address.pointA",""],To:["address.pointB",""],Message:["message",""]},R={title:"Transit Buy Request",date:"",small:"A Transit purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],"Location(s)":["transitIP",""],"Transit Capacity":["capacity",0],Message:["message",""]},x={title:"Data Center Buy Request",date:"",small:"A Data Center purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],"Rack Total":["totalRack",0],"Custom Request":["custom",!1],Message:["message",""]},T={title:"General Buy Request",date:"",small:"A (general) purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],Message:["message",""]};function q(e){var t=e.data,a=e.format,s=e.userID,r=Object(v["a"])(C["DateTime"].local()),i=new Set,n=null,o=null;for(var c in"backbone"==t.buyType.toLowerCase()&&t.address.pointA&&t.address.pointB&&(n=t.address.pointA,o=t.address.pointB),a)for(var u in t)"string"==typeof T[c]?"date"==c?i.add('<p style="font-size: 16px;"> Date: '.concat(r,"</p>")):"title"==c?i.add('<h2 style="font-size= 24px;">'.concat(a[c],"</h2><br/>")):"reference"==c?i.add('<p style="font-size: 14px;">Reference: '.concat(s,"</p>")):i.add('<p style="font-size: 14px; font-weight: bold; margin-top: 3rem;">'.concat(a[c],"</p>")):a[c][0]==u?"Message"==c?i.add('<p style="font-size: 14px;">'.concat(c,':</p> <p style="font-size: 14px; white-space: pre-wrap;"> ').concat(t[u],"</p>")):i.add('<p style="font-size: 14px">'.concat(c,": ").concat(t[u],"</p>")):"From"!=c&&"To"!=c||i.add('<p style="font-size: 14px">'.concat(c,": ").concat("To"==c?o:n,"</p>"));return"".concat(Object(l["a"])(i).join(""))}function _(e){var t=e.data,a=e.userID,s="",r={data:t,userID:a};switch(t.buyType.toLocaleLowerCase()){case"transit":s=q(Object(c["a"])(Object(c["a"])({},r),{},{format:R}));break;case"datacenter":s=q(Object(c["a"])(Object(c["a"])({},r),{},{format:x}));break;case"other":s=q(Object(c["a"])(Object(c["a"])({},r),{},{format:T}));break;default:s=q(Object(c["a"])(Object(c["a"])({},r),{},{format:w}));break}return s}var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"bottom-start",width:"420",transition:"el-zoom-in-top",trigger:"manual",value:e.isResultsVisible},on:{"update:value":function(t){e.isResultsVisible=t}}},[a("el-card",{staticClass:"p0 no-border",attrs:{shadow:"never"}},[a("ul",{staticClass:"w-fit-full h80 no-outline overflow-y-auto",attrs:{role:"list"}},[e._l(e.searchResults.r,(function(t,s){return a("li",{key:s+t,staticClass:"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline",class:{dark:e.dark,light:!e.dark},attrs:{tabindex:"0",role:"listitem"},on:{click:function(a){return e.handlePlaceSelection(t)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")&&e._k(a.keyCode,"space",32,a.key,[" ","Spacebar"])?null:e.handlePlaceSelection(t)}}},[t.address&&t.address.length&&""!==t.address[0].city?a("div",{staticClass:"inline-block"},[e._v(" "+e._s(t.name)+" in "),e._l(t.address,(function(t,s){return a("small",{key:t.state+s},[e._v(" "+e._s(t.city)+", "+e._s(t.state)+"; ")])}))],2):a("span",[e._v(" "+e._s(t.name)+" ")]),e._v(" - "),a("small",{staticClass:"capitalize"},[e._v(e._s(e.getResultType(t)))])])})),e.searchResults.r.length?a("el-divider",{staticClass:"m0"}):e._e(),e._l(e.searchResults.places,(function(t,s){return a("li",{key:s,staticClass:"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline",class:{dark:e.dark,light:!e.dark},attrs:{tabindex:"0",role:"listitem"},on:{click:function(a){return e.handlePlaceSelection(t)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")&&e._k(a.keyCode,"space",32,a.key,[" ","Spacebar"])?null:e.handlePlaceSelection(t)}}},[a("span",[e._v(" "+e._s(t.name)+" ")])])}))],2)]),a("div",{attrs:{slot:"reference",role:"search"},slot:"reference"},[a("el-input",{class:{dark:e.dark},attrs:{clearable:"",placeholder:""},on:{clear:e.handleClear,input:e.getQueryData},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("fa",{staticClass:"mt3 ml1 hidden-md-and-down",attrs:{slot:"prefix",icon:["fas","search"]},slot:"prefix"})],1)],1)],1)},S=[],D=(a("ac1f"),a("841c"),a("33b5")),j=a("f867"),P={data:function(){return{search:"",searchResults:{r:[],places:[]},isSelection:!1,isResultsVisible:!1}},computed:{dark:function(){return this.$store.state.isDark}},mounted:function(){document.addEventListener("click",this.close)},beforeDestroy:function(){document.removeEventListener("click",this.close)},methods:{getQueryData:Object(D["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,s,r,i,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<=1)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(j["d"])(t);case 4:return a=e.sent,s=a.data,e.next=8,Object(j["c"])(t);case 8:return r=e.sent,i=r.data,e.next=12,this.$store.dispatch("getSearchQueryDataMapbox",t);case 12:n=e.sent,this.searchResults.places=n.features.map((function(e){return e.name=e.place_name,e})),this.searchResults.r=[].concat(Object(l["a"])(s),Object(l["a"])(i)),this.isResultsVisible=!0;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),320),handlePlaceSelection:function(e){var t=this,a=e.name;e.t&&(a="".concat(a," (").concat(e.t,")")),this.$emit("place-changed",a),this.search=a,this.isSelection=!0,setTimeout((function(){return t.isSelection=!1}),520),this.close()},getResultType:function(e){return e.t},handleClear:function(){this.$emit("place-changed","")},close:function(){this.searchResults={r:[],places:[]},this.isResultsVisible=!1}}},$=P,A=a("2877"),B=Object(A["a"])($,O,S,!1,null,null,null),I=B.exports,V=a("5c49"),L=a("3c2e"),z={components:{VueRecaptcha:g["a"],VMultiSelect:L["a"],"point-field":I},data:function(){return{capacities:["1Gbps","10Gbps","100Gbps","Fiber","Other"],loading:!1,facsList:[],isSendingData:!1,catchaVerified:null,isCustomRequest:!1,isLoadingFacs:!1,isTransitIpEmpty:!1,form:{company:"",email:"",fullname:"",capacity:"",totalRack:0,message:"",transitIP:"",address:{pointA:null,pointB:null}},formRules:{message:[],"address.pointA":[{required:!0,message:"Please input an A point",trigger:["blur","change"]}],"address.pointB":[{required:!0,message:"Please input a Z point",trigger:["blur","change"]}],fullname:[{required:!0,message:"Please input your full name",trigger:"blur"},{max:50,message:"Length should be max 50",trigger:["change","blur"]}],company:[{required:!0,message:"Company name is required",trigger:["blur","change"]}],email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",required:!0,message:"Please input a valid email",trigger:"change"}],capacity:[{required:!0,message:"Please select the desired capacity",trigger:"change"}],transitIP:[]}}},computed:Object(c["a"])(Object(c["a"])({},Object(u["c"])({buyType:function(e){return e.buyType},dark:function(e){return e.isDark},focus:function(e){return e.map.focus}})),{},{siteKey:function(){return y["a"]},messageWhenRequired:function(){if(""===this.dialogTitle)return"";var e="Please, describe your Capacity requirement in more detail in the Message field below.";return"Transit"==this.dialogTitle.trim()?e="Please, describe your Transit requirement in more detail in the Message field below.":"Datacenter"==this.dialogTitle.trim()&&this.isCustomRequest&&(e="Please, describe your custom request details in the Message field below."),e},isRackRequired:function(){return!this.isCustomRequest},isOthersCapacitySelection:function(){return"Other"==this.form.capacity},isBackboneSelection:function(){return this.focus&&"backbone"==this.dialogTitle.toLowerCase()},isTransitSelection:function(){return this.focus&&"transit"==this.dialogTitle.toLowerCase()},isVisible:{get:function(){return this.$store.state.isBuyDialog},set:function(){return this.closeDialog()}},dialogTitle:function(){return this.buyType&&this.buyType.title?this.buyType.title:""},customDialogClass:function(){return this.dark?"custom-dialog dark":"custom-dialog light"}}),watch:{isVisible:function(e){e?(this.setUserData(),this.isTransitSelection?(this.formRules.transitIP[0]={required:this.isTransitSelection,message:"Please input an IP point",trigger:["blur","change"]},this.capacities=["1Gbps","10Gbps","100Gbps","Other"]):(this.formRules.transitIP=[],this.capacities=["1Gbps","10Gbps","100Gbps","Fiber","Other"])):(this.$refs.catpcha.reset(),this.isCustomRequest=!1)}},methods:{handleTransitIPChange:function(e){var t=""===e||!e;this.isTransitIpEmpty=t,this.form.transitIP=e[0].name,t||this.$refs.transitIP.clearValidate()},loadFacsSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.length<=0)){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingFacs=!0,a.t0=V["f"],a.next=6,t.$auth.getUserID();case 6:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=11,(0,a.t0)(a.t3);case 11:s=a.sent,s&&s.data&&(t.facsList=s.data.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Array.from(t.facsList),a=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return e._id})).includes(a._id)?e:[].concat(Object(l["a"])(e),[a])}),[])),t.isLoadingFacs=!1;case 14:case"end":return a.stop()}}),a)})))()},resetRackTotal:function(e){e&&(this.form.totalRack=0)},handleCatchaVerification:function(e){e&&(this.catchaVerified=!0)},setUserData:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$auth.user){t.next=2;break}return t.abrupt("return");case 2:return t.t0=d["b"],t.next=5,e.$auth.getUserID();case 5:return t.t1=t.sent,t.next=8,(0,t.t0)(t.t1);case 8:a=t.sent,a&&(e.loading=!0,s=a.user_metadata,e.form.fullname=s&&s.name?s.name:Object(k["a"])(a.name)?"":a.name,e.form.email=s&&s.email?s.email:a.email,e.form.company=s&&s.companyname?s.companyname:"",e.form.phonenumber=s&&s.phonenumber?s.phonenumber:{num:"",valid:null},e.loading=!1);case 10:case"end":return t.stop()}}),t)})))()},handleAddressChanged:function(e,t){switch(t){case"b":this.form.address.pointB=e,this.$refs.pointB.clearValidate();break;default:this.form.address.pointA=e,this.$refs.pointA.clearValidate();break}},sendBuyRequest:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,s,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSendingData=!0,a=Object(c["a"])({element:e.$store.state.map.currentSelection.name,type:e.focus.type.toLowerCase(),custom:e.isCustomRequest,buyType:e.dialogTitle},e.form),t.next=4,e.$auth.getUserID();case 4:return s=t.sent,r=_({data:a,userID:s}),t.next=8,f({email:a.email,message:r,user_id:s,elemnt:e.focus.id,t:Object(b["a"])(e.focus.type)});case 8:i=t.sent,i&&i.t&&"error"!=i.t&&e.closeDialog(),e.isSendingData=!1;case 11:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.sendBuyRequest()}))},closeDialog:function(){this.$store.commit("".concat(h["j"]),!1),this.$refs.form.resetFields(),this.catchaVerified=null,this.form={company:"",email:"",message:"",fullname:"",capacity:"",totalRack:0,address:{pointA:null,pointB:null}},this.$store.commit("".concat(h["a"]),null)}}},E=z,F=Object(A["a"])(E,i,n,!1,null,null,null);t["default"]=F.exports},ddbf:function(e,t,a){"use strict";function s(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}a.d(t,"a",(function(){return s}))}}]);
//# sourceMappingURL=chunk-ca310786.7a9fbe81.js.map