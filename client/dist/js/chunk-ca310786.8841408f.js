(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ca310786"],{a1bb:function(e,t,a){"use strict";a.r(t);var s,r,n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.isVisible,width:"80%",top:"12vh","custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isVisible=t}}},[a("header",{staticClass:"header p0 no-selectable",attrs:{slot:"title"},slot:"title"},[a("h1",{staticClass:"inline-block font-semibold fs-xlarge"},[e._v(" Buy Now! - "),a("span",{staticClass:"capitalize"},[e._v(e._s(e.dialogTitle))])])]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"pr2 pl2",attrs:{model:e.form,rules:e.formRules}},[a("el-row",{attrs:{gutter:15}},[a("el-col",{attrs:{xs:24,sm:12,md:24,lg:24,xl:12}},[a("el-form-item",{attrs:{label:"Company name",prop:"company"}},[a("el-input",{class:{dark:e.dark},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}})],1)],1),a("el-col",{attrs:{xs:24,sm:12,md:24,lg:24,xl:12}},[a("el-form-item",{attrs:{label:"Full Name",prop:"fullname"}},[a("el-input",{class:{dark:e.dark},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1)],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:12,xl:12}},[a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{class:{dark:e.dark},attrs:{type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),"Other"!==e.dialogTitle?["Datacenter"!==e.dialogTitle?a("el-col",{attrs:{md:24,lg:12}},[a("el-form-item",{attrs:{label:"Capacity",prop:"capacity"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{filterable:"",placeholder:"Select an option"},model:{value:e.form.capacity,callback:function(t){e.$set(e.form,"capacity",t)},expression:"form.capacity"}},e._l(e.capacities,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1):a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{required:e.isRackRequired,prop:"totalRack",label:"Rack total"}},[a("div",{staticClass:"w-fit-full inline-block"},[a("div",{staticClass:"block"},[a("el-slider",{staticClass:"relative",attrs:{id:"rack-slider",disabled:e.isCustomRequest,"show-input":"","input-size":"small"},model:{value:e.form.totalRack,callback:function(t){e.$set(e.form,"totalRack",t)},expression:"form.totalRack"}})],1),a("el-checkbox",{on:{change:e.resetRackTotal},model:{value:e.isCustomRequest,callback:function(t){e.isCustomRequest=t},expression:"isCustomRequest"}},[e._v(" Custom request ")])],1)])],1)]:e._e(),e.isBackboneSelection?[a("el-col",{attrs:{md:24,xl:12}},[a("el-form-item",{ref:"pointA",attrs:{label:"From (A-end)",required:"",prop:"address.pointA"}},[a("point-field",{attrs:{id:"pointA"},on:{"place-changed":function(t){return e.handleAddressChanged(t,"a")}}})],1)],1),a("el-col",{attrs:{md:24,xl:12}},[a("el-form-item",{ref:"pointB",attrs:{label:"To (Z-end)",required:"",prop:"address.pointB"}},[a("point-field",{attrs:{id:"pointB"},on:{"place-changed":function(t){return e.handleAddressChanged(t,"b")}}})],1)],1)]:e._e(),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Message",prop:"message",required:e.isOthersCapacitySelection||"Other"==e.dialogTitle||e.isCustomRequest}},[e.isOthersCapacitySelection||e.isCustomRequest?a("span",{staticClass:"error-message"},[e._v(" - "+e._s(e.messageWhenRequired)+" ")]):e._e(),a("el-input",{class:{dark:e.dark},attrs:{type:"textarea",rows:"4"},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1)],1),a("el-col",{attrs:{span:24}},[a("vue-recaptcha",{ref:"catpcha",attrs:{sitekey:e.siteKey,loadRecaptchaScript:!0},on:{verify:e.handleCatchaVerification,error:function(){return e.catchaVerified=!1},expired:function(){return e.catchaVerified=!1}}})],1)],2)],1),a("footer",{staticClass:"footer flex wrap justify-content-space-between pr0 pl6 mt4"},[a("small",{staticClass:"inline-block mt2 mb4"},[a("span",{staticClass:"text-red"},[e._v("*")]),e._v(" indicates required field ")]),a("div",[a("el-button",{staticClass:"mr2",attrs:{plain:"",type:"info"},on:{click:e.closeDialog}},[e._v("Cancel")]),a("el-button",{staticClass:"w-fit-content",attrs:{disabled:!e.catchaVerified,type:"primary",plain:"",loading:e.isSendingData},on:{click:function(t){return e.submitForm("form")},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.submitForm("form")}}},[e._v("Submit Request")])],1)])],1)},i=[],l=(a("d81d"),a("b0c0"),a("498a"),a("96cf"),a("1da1")),o=a("5530"),c=a("2f62"),u=a("9a1e"),m=(a("99af"),a("780a")),d=a("a4dc"),p=function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,l,o,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,n=t.t,i=t.elemnt,l=t.email,o=t.message,s="".concat(d["a"].url,"/auth/message/send"),r=new FormData,r.append("t",n),r.append("email",l),r.append("elemnt",i),r.append("message",o),e.next=9,m["a"].post(s,r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+d["a"].bearer()}});case 9:return c=e.sent,e.abrupt("return",c);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=a("0316"),h=a("ceaf"),b=a("e096"),g=a("1b83"),y=a("ddbf"),k=(a("a15b"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("2909")),v=a("2c8b"),C=a("1315"),w={title:"Capacity Buy Request",date:"",small:"A Capacity purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],"Capacity requirement":["capacity",0],From:["address.pointA",""],To:["address.pointB",""],Message:["message",""]},R={title:"Transit Buy Request",date:"",small:"A Transit purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],"Transit Capacity":["capacity",0],Message:["message",""]},x={title:"Data Center Buy Request",date:"",small:"A Data Center purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],"Rack Total":["totalRack",0],"Custom Request":["custom",!1],Message:["message",""]},q={title:"General Buy Request",date:"",small:"A (general) purchase request has been received from the following user:",reference:"",Organization:["company",""],Name:["fullname",""],"E-mail address":["email",""],small_two:"The user has the following request:",Element:["element",""],Type:["type",""],Message:["message",""]};function _(e){var t=e.data,a=e.format,s=e.userID,r=Object(v["a"])(C["DateTime"].local()),n=new Set,i=null,l=null;for(var o in"backbone"==t.buyType.toLowerCase()&&t.address.pointA&&t.address.pointB&&(i=t.address.pointA,l=t.address.pointB),a)for(var c in t)"string"==typeof q[o]?"date"==o?n.add('<p style="font-size: 16px;"> Date: '.concat(r,"</p>")):"title"==o?n.add('<h2 style="font-size= 24px;">'.concat(a[o],"</h2><br/>")):"reference"==o?n.add('<p style="font-size: 14px;">Reference: '.concat(s,"</p>")):n.add('<p style="font-size: 14px; font-weight: bold; margin-top: 3rem;">'.concat(a[o],"</p>")):a[o][0]==c?"Message"==o?n.add('<p style="font-size: 14px;">'.concat(o,':</p> <p style="font-size: 14px; white-space: pre-wrap;"> ').concat(t[c],"</p>")):n.add('<p style="font-size: 14px">'.concat(o,": ").concat(t[c],"</p>")):"From"!=o&&"To"!=o||n.add('<p style="font-size: 14px">'.concat(o,": ").concat("To"==o?l:i,"</p>"));return"".concat(Object(k["a"])(n).join(""))}function T(e){var t=e.data,a=e.userID,s="",r={data:t,userID:a};switch(t.buyType.toLocaleLowerCase()){case"transit":s=_(Object(o["a"])({},r,{format:R}));break;case"datacenter":s=_(Object(o["a"])({},r,{format:x}));break;case"other":s=_(Object(o["a"])({},r,{format:q}));break;default:s=_(Object(o["a"])({},r,{format:w}));break}return s}var O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{attrs:{placement:"bottom-start",width:"420",transition:"el-zoom-in-top",trigger:"manual",value:e.isResultsVisible},on:{"update:value":function(t){e.isResultsVisible=t}}},[a("el-card",{staticClass:"p0 no-border",attrs:{shadow:"never"}},[a("ul",{staticClass:"w-fit-full h80 no-outline overflow-y-auto",attrs:{role:"list"}},[e._l(e.searchResults.r,(function(t,s){return a("li",{key:s+t,staticClass:"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline",class:{dark:e.dark,light:!e.dark},attrs:{tabindex:"0",role:"listitem"},on:{click:function(a){return e.handlePlaceSelection(t)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")&&e._k(a.keyCode,"space",32,a.key,[" ","Spacebar"])?null:e.handlePlaceSelection(t)}}},[t.address&&t.address.length&&""!==t.address[0].city?a("div",{staticClass:"inline-block"},[e._v(" "+e._s(t.name)+" in "),e._l(t.address,(function(t,s){return a("small",{key:t.state+s},[e._v(" "+e._s(t.city)+", "+e._s(t.state)+"; ")])}))],2):a("span",[e._v(" "+e._s(t.name)+" ")]),e._v(" - "),a("small",{staticClass:"capitalize"},[e._v(e._s(e.getResultType(t)))])])})),e.searchResults.r.length?a("el-divider",{staticClass:"m0"}):e._e(),e._l(e.searchResults.places,(function(t,s){return a("li",{key:s,staticClass:"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline",class:{dark:e.dark,light:!e.dark},attrs:{tabindex:"0",role:"listitem"},on:{click:function(a){return e.handlePlaceSelection(t)},keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")&&e._k(a.keyCode,"space",32,a.key,[" ","Spacebar"])?null:e.handlePlaceSelection(t)}}},[a("span",[e._v(" "+e._s(t.name)+" ")])])}))],2)]),a("div",{attrs:{slot:"reference",role:"search"},slot:"reference"},[a("el-input",{class:{dark:e.dark},attrs:{clearable:"",placeholder:""},on:{clear:e.handleClear,input:e.getQueryData},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("fa",{staticClass:"mt3 ml1 hidden-md-and-down",attrs:{slot:"prefix",icon:["fas","search"]},slot:"prefix"})],1)],1)],1)},D=[],S=(a("ac1f"),a("841c"),a("33b5")),j=a("f867"),$={data:function(){return{search:"",searchResults:{r:[],places:[]},isSelection:!1,isResultsVisible:!1}},computed:{dark:function(){return this.$store.state.isDark}},mounted:function(){document.addEventListener("click",this.close)},beforeDestroy:function(){document.removeEventListener("click",this.close)},methods:{getQueryData:Object(S["a"])(function(){var e=Object(l["a"])(regeneratorRuntime.mark((function e(t){var a,s,r,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.length<=1)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(j["d"])(t);case 4:return a=e.sent,s=a.data,e.next=8,Object(j["c"])(t);case 8:return r=e.sent,n=r.data,e.next=12,this.$store.dispatch("getSearchQueryDataMapbox",t);case 12:i=e.sent,this.searchResults.places=i.features.map((function(e){return e.name=e.place_name,e})),this.searchResults.r=[].concat(Object(k["a"])(s),Object(k["a"])(n)),this.isResultsVisible=!0;case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),320),handlePlaceSelection:function(e){var t=this,a=e.name;e.t&&(a="".concat(a," (").concat(e.t,")")),this.$emit("place-changed",a),this.search=a,this.isSelection=!0,setTimeout((function(){return t.isSelection=!1}),520),this.close()},getResultType:function(e){return e.t},handleClear:function(){this.$emit("place-changed","")},close:function(){this.searchResults={r:[],places:[]},this.isResultsVisible=!1}}},A=$,B=a("2877"),V=Object(B["a"])(A,O,D,!1,null,null,null),z=V.exports,E={components:{VueRecaptcha:b["a"],"point-field":z},data:function(){return{capacities:["1Gbps","10Gbps","100Gbps","Fiber","Other"],loading:!1,siteKey:g["a"],isSendingData:!1,catchaVerified:null,isCustomRequest:!1,form:{company:"",email:"",fullname:"",capacity:"",totalRack:0,message:"",address:{pointA:null,pointB:null}},formRules:{message:[],"address.pointA":[{required:!0,message:"Please input an A point",trigger:["blur","change"]}],"address.pointB":[{required:!0,message:"Please input a Z point",trigger:["blur","change"]}],fullname:[{required:!0,message:"Please input your full name",trigger:"blur"},{max:50,message:"Length should be max 50",trigger:["change","blur"]}],company:[{required:!0,message:"Company name is required",trigger:["blur","change"]}],email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",required:!0,message:"Please input a valid email",trigger:"change"}],capacity:[{required:!0,message:"Please select the desired capacity",trigger:"change"}]}}},computed:Object(o["a"])({},Object(c["c"])({buyType:function(e){return e.buyType},dark:function(e){return e.isDark},focus:function(e){return e.map.focus}}),{messageWhenRequired:function(){if(""===this.dialogTitle)return"";var e="Please, describe your Capacity requirement in more detail in the Message field below.";return"Transit"==this.dialogTitle.trim()?e="Please, describe your Transit requirement in more detail in the Message field below.":"Datacenter"==this.dialogTitle.trim()&&this.isCustomRequest&&(e="Please, describe your custom request details in the Message field below."),e},isRackRequired:function(){return!this.isCustomRequest},isOthersCapacitySelection:function(){return"Other"==this.form.capacity},isBackboneSelection:function(){return this.focus&&"backbone"==this.dialogTitle.toLowerCase()},isVisible:{get:function(){return this.$store.state.isBuyDialog},set:function(){return this.closeDialog()}},dialogTitle:function(){return this.buyType&&this.buyType.title?this.buyType.title:""},customDialogClass:function(){return this.dark?"custom-dialog dark":"custom-dialog light"}}),watch:{isVisible:function(e){e?this.setUserData():(this.$refs.catpcha.reset(),this.isCustomRequest=!1)}},methods:{resetRackTotal:function(e){e&&(this.form.totalRack=0)},handleCatchaVerification:function(e){e&&(this.catchaVerified=!0)},setUserData:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$auth.user){t.next=2;break}return t.abrupt("return");case 2:return t.t0=u["b"],t.next=5,e.$auth.getUserID();case 5:return t.t1=t.sent,t.next=8,(0,t.t0)(t.t1);case 8:a=t.sent,a&&(e.loading=!0,s=a.user_metadata,e.form.fullname=s&&s.name?s.name:Object(y["a"])(a.name)?"":a.name,e.form.email=s&&s.email?s.email:a.email,e.form.company=s&&s.companyname?s.companyname:"",e.form.phonenumber=s&&s.phonenumber?s.phonenumber:{num:"",valid:null},e.loading=!1);case 10:case"end":return t.stop()}}),t)})))()},handleAddressChanged:function(e,t){switch(t){case"b":this.form.address.pointB=e,this.$refs.pointB.clearValidate();break;default:this.form.address.pointA=e,this.$refs.pointA.clearValidate();break}},sendBuyRequest:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,s,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSendingData=!0,a=Object(o["a"])({element:e.$store.state.map.currentSelection.name,type:e.focus.type.toLowerCase(),custom:e.isCustomRequest,buyType:e.dialogTitle},e.form),t.next=4,e.$auth.getUserID();case 4:return s=t.sent,r=T({data:a,userID:s}),t.next=8,p({email:a.email,message:r,user_id:s,elemnt:e.focus.id,t:Object(h["a"])(e.focus.type)});case 8:n=t.sent,n&&n.t&&"error"!=n.t&&e.closeDialog(),e.isSendingData=!1;case 11:case"end":return t.stop()}}),t)})))()},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.sendBuyRequest()}))},closeDialog:function(){this.$store.commit("".concat(f["j"]),!1),this.$refs.form.resetFields(),this.catchaVerified=null,this.form={company:"",email:"",message:"",fullname:"",capacity:"",totalRack:0,address:{pointA:null,pointB:null}},this.$store.commit("".concat(f["a"]),null)}}},P=E,F=Object(B["a"])(P,n,i,!1,null,null,null);t["default"]=F.exports},ddbf:function(e,t,a){"use strict";function s(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}a.d(t,"a",(function(){return s}))}}]);
//# sourceMappingURL=chunk-ca310786.8841408f.js.map