{"version":3,"sources":["webpack:///./src/components/dialogs/ViewData.vue?8019","webpack:///src/components/dialogs/ViewData.vue","webpack:///./src/components/dialogs/ViewData.vue?8ee1","webpack:///./src/components/dialogs/ViewData.vue","webpack:///./src/components/dialogs/ViewData.vue?02a7"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","staticClass","attrs","_v","_s","data","on","$event","$emit","tableData","scopedSlots","_u","key","fn","scope","row","property","staticRenderFns","props","isVisible","type","Boolean","required","Object","acceptedKeys","Array","computed","dark","$store","state","isDark","customDialogClass","watch","bool","handleDataVisualization","setTimeout","mounted","methods","keys","map","createMap","addIssueDraw","toggleTheme","container","zoom","mapConfig","center","style","displayControlsDefault","controls","maxWidth","unit","draw","addControl","scaleCtrl","vm","changeMode","set","elemnt","features","geometry","coords","bbox","reduce","fitBounds","padding","animate","speed","pan","duration","setStyle","component"],"mappings":"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","file":"js/chunk-4c5d339e.6d2acb70.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isVisible),expression:\"isVisible\"}],staticClass:\"el-dialog__wrapper z-index120\"},[_c('transition',{attrs:{\"tag\":\"div\",\"mode\":\"in-out\",\"name\":\"animated faster\",\"enter-active-class\":\"fadeInDown\",\"leave-active-class\":\"fadeOutUp\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isVisible),expression:\"isVisible\"}],staticClass:\"inner-wrapper el-dialog\"},[_c('div',{staticClass:\"el-dialog__header\"},[_c('header',{staticClass:\"w-fit-full p0 no-selectable\"},[_c('h1',{staticClass:\"inline-block font-semibold fs-xlarge\"},[_vm._v(\" Viewing data: \"+_vm._s(_vm.data.name)+\" \")]),_c('el-button',{staticClass:\"el-dialog__headerbtn p0\",attrs:{\"type\":\"text\"},on:{\"click\":function($event){return _vm.$emit('close')}}},[_c('fa',{staticClass:\"el-dialog__close el-icon el-icon-close\",attrs:{\"icon\":['fas', 'times']}})],1)],1)]),_c('div',{staticClass:\"el-dialog__body\"},[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"xs\":24,\"lg\":12}},[_c('el-table',{attrs:{\"data\":_vm.tableData,\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"label\":\"Property\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.property === 'rgDate')?_c('p',{staticClass:\"capitalize\"},[_vm._v(\" Register Date \")]):_c('p',{staticClass:\"capitalize\"},[_vm._v(\" \"+_vm._s(scope.row.property)+\" \")])]}}])}),_c('el-table-column',{attrs:{\"label\":\"Value\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.property === 'phone')?_c('a',{attrs:{\"href\":(\"tel:\" + (scope.row.value)),\"target\":\"_blank\"}},[_vm._v(\" \"+_vm._s(scope.row.value)+\" \")]):_c('p',[_vm._v(\" \"+_vm._s(scope.row.value)+\" \")])]}}])})],1)],1),_c('el-col',{attrs:{\"xs\":24,\"lg\":12}},[_c('div',{staticClass:\"w-fit-full\",attrs:{\"id\":\"map\"}})])],1)],1)])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"el-dialog__wrapper z-index120\" v-show=\"isVisible\">\r\n    <transition\r\n      tag=\"div\"\r\n      mode=\"in-out\"\r\n      name=\"animated faster\"\r\n      enter-active-class=\"fadeInDown\"\r\n      leave-active-class=\"fadeOutUp\"\r\n    >\r\n      <div class=\"inner-wrapper el-dialog\" v-show=\"isVisible\">\r\n        <div class=\"el-dialog__header\">\r\n          <header class=\"w-fit-full p0 no-selectable\">\r\n            <h1 class=\"inline-block font-semibold fs-xlarge\">\r\n              Viewing data: {{ data.name }}\r\n            </h1>\r\n            <el-button\r\n              class=\"el-dialog__headerbtn p0\"\r\n              type=\"text\"\r\n              @click=\"$emit('close')\"\r\n            >\r\n              <fa\r\n                :icon=\"['fas', 'times']\"\r\n                class=\"el-dialog__close el-icon el-icon-close\"\r\n              />\r\n            </el-button>\r\n          </header>\r\n        </div>\r\n        <div class=\"el-dialog__body\">\r\n          <el-row :gutter=\"20\">\r\n            <el-col :xs=\"24\" :lg=\"12\">\r\n              <el-table :data=\"tableData\" stripe>\r\n                <el-table-column label=\"Property\">\r\n                  <template slot-scope=\"scope\">\r\n                    <p\r\n                      v-if=\"scope.row.property === 'rgDate'\"\r\n                      class=\"capitalize\"\r\n                    >\r\n                      Register Date\r\n                    </p>\r\n                    <p v-else class=\"capitalize\">\r\n                      {{ scope.row.property }}\r\n                    </p>\r\n                  </template>\r\n                </el-table-column>\r\n                <el-table-column label=\"Value\">\r\n                  <template slot-scope=\"scope\">\r\n                    <a\r\n                      v-if=\"scope.row.property === 'phone'\"\r\n                      :href=\"`tel:${scope.row.value}`\"\r\n                      target=\"_blank\"\r\n                    >\r\n                      {{ scope.row.value }}\r\n                    </a>\r\n                    <p v-else>\r\n                      {{ scope.row.value }}\r\n                    </p>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n            </el-col>\r\n            <el-col :xs=\"24\" :lg=\"12\">\r\n              <div id=\"map\" class=\"w-fit-full\" />\r\n            </el-col>\r\n          </el-row>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport mapboxgl from 'mapbox-gl'\r\nimport MapboxDraw from '@mapbox/mapbox-gl-draw'\r\nimport { mapConfig } from '../../config/mapConfig'\r\nimport { formatDate } from '../../helpers/formatDate'\r\n\r\nexport default {\r\n  name: 'ViewDataDialog',\r\n  props: {\r\n    isVisible: {\r\n      type: Boolean,\r\n      required: true\r\n    },\r\n    data: {\r\n      type: Object,\r\n      required: true\r\n    },\r\n    acceptedKeys: {\r\n      type: Array,\r\n      required: true\r\n    }\r\n  },\r\n  data: () => ({\r\n    map: null,\r\n    draw: null,\r\n    tableData: []\r\n  }),\r\n  computed: {\r\n    dark() {\r\n      return this.$store.state.isDark\r\n    },\r\n    customDialogClass() {\r\n      return this.dark ? 'custom-dialog dark' : 'custom-dialog light'\r\n    }\r\n  },\r\n  watch: {\r\n    isVisible(bool) {\r\n      if (!bool) return\r\n      this.handleDataVisualization()\r\n      setTimeout(() => {\r\n        this.map.resize()\r\n      }, 220)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.handleDataVisualization()\r\n  },\r\n  methods: {\r\n    handleDataVisualization() {\r\n      if (!this.data || !this.isVisible) return\r\n\r\n      this.tableData = Object.keys(this.data)\r\n        .map(key => {\r\n          if (this.acceptedKeys.includes(key) && key.includes('Date')) {\r\n            return {\r\n              property: key,\r\n              value: this.data[key] ? formatDate(this.data[key]) : 'no data'\r\n            }\r\n          } else {\r\n            return this.acceptedKeys.includes(key)\r\n              ? {\r\n                  property: key,\r\n                  value: this.data[key] ? this.data[key] : 'no data'\r\n                }\r\n              : false\r\n          }\r\n        })\r\n        .filter(d => d)\r\n\r\n      if (!this.map) this.map = this.createMap()\r\n      this.addIssueDraw()\r\n      return this.toggleTheme(this.dark)\r\n    },\r\n    createMap() {\r\n      mapboxgl.accessToken = mapConfig.mapToken\r\n\r\n      const map = new mapboxgl.Map({\r\n        container: 'map',\r\n        zoom: mapConfig.zoom,\r\n        center: mapConfig.center,\r\n        style: mapConfig.default\r\n      })\r\n\r\n      const draw = new MapboxDraw({\r\n        displayControlsDefault: false,\r\n        controls: false\r\n      })\r\n      const scaleCtrl = new mapboxgl.ScaleControl({\r\n        maxWidth: 80,\r\n        unit: 'metric'\r\n      })\r\n\r\n      this.draw = draw\r\n      let vm = this\r\n      map.addControl(scaleCtrl, 'bottom-left')\r\n      map.addControl(draw, 'bottom-left')\r\n      // eslint-disable-next-line\r\n      map.on('draw.selectionchange', function(e) {\r\n        return vm.draw.changeMode('simple_select', {})\r\n      })\r\n      return map\r\n    },\r\n    addIssueDraw() {\r\n      const elemnt = this.data.elemnt_id.geom\r\n      this.draw.set(elemnt)\r\n      let bbox = []\r\n      let coords = []\r\n\r\n      if (elemnt.features[0].geometry.type !== 'Point') {\r\n        coords = [\r\n          elemnt.features[0].geometry.coordinates[0],\r\n          elemnt.features[elemnt.features.length - 1].geometry.coordinates[0]\r\n        ]\r\n        bbox = coords.reduce(\r\n          (bounds, coord) => bounds.extend(coord),\r\n          new mapboxgl.LngLatBounds(coords[0], coords[0])\r\n        )\r\n      } else {\r\n        // Calculation of bounds for points\r\n        coords = [\r\n          elemnt.features[0].geometry.coordinates,\r\n          elemnt.features[elemnt.features.length - 1].geometry.coordinates\r\n        ]\r\n        bbox = coords.reduce(\r\n          (bounds, coord) => bounds.extend(coord),\r\n          new mapboxgl.LngLatBounds(coords[0], coords[0])\r\n        )\r\n      }\r\n\r\n      this.map.fitBounds(bbox, {\r\n        padding: 90,\r\n        animate: true,\r\n        zoom: 3.68,\r\n        speed: 1.75,\r\n        pan: {\r\n          duration: 25\r\n        }\r\n      })\r\n    },\r\n    toggleTheme(dark) {\r\n      if (!this.map) return\r\n\r\n      const style = dark ? mapConfig.darkBasemap : mapConfig.default\r\n      this.map.setStyle(style)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../assets/scss/components/view-issue-dialog-styles.scss';\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViewData.vue?vue&type=template&id=20db52a4&scoped=true&\"\nimport script from \"./ViewData.vue?vue&type=script&lang=js&\"\nexport * from \"./ViewData.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViewData.vue?vue&type=style&index=0&id=20db52a4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"20db52a4\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=style&index=0&id=20db52a4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViewData.vue?vue&type=style&index=0&id=20db52a4&lang=scss&scoped=true&\""],"sourceRoot":""}