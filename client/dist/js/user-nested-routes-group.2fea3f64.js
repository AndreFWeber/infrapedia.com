(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-nested-routes-group"],{"0538":function(e,t,a){"use strict";var r=a("1c0b"),n=a("861d"),i=[].slice,s={},o=function(e,t,a){if(!(t in s)){for(var r=[],n=0;n<t;n++)r[n]="a["+n+"]";s[t]=Function("C,a","return new C("+r.join(",")+")")}return s[t](e,a)};e.exports=Function.bind||function(e){var t=r(this),a=i.call(arguments,1),s=function(){var r=a.concat(i.call(arguments));return this instanceof s?o(t,r.length,r):t.apply(e,r)};return n(t.prototype)&&(s.prototype=t.prototype),s}},"074e":function(e,t,a){"use strict";var r=a("3c3e"),n=a.n(r);n.a},1148:function(e,t,a){"use strict";var r=a("a691"),n=a("1d80");e.exports="".repeat||function(e){var t=String(n(this)),a="",i=r(e);if(i<0||i==1/0)throw RangeError("Wrong number of repetitions");for(;i>0;(i>>>=1)&&(t+=t))1&i&&(a+=t);return a}},1260:function(e,t,a){"use strict";var r=a("324b"),n=a.n(r);n.a},"131a":function(e,t,a){var r=a("23e7"),n=a("d2bb");r({target:"Object",stat:!0},{setPrototypeOf:n})},"13d5":function(e,t,a){"use strict";var r=a("23e7"),n=a("d58f").left,i=a("a640"),s=a("ae40"),o=i("reduce"),l=s("reduce",{1:0});r({target:"Array",proto:!0,forced:!o||!l},{reduce:function(e){return n(this,e,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"156a":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-fit-full flex row wrap justify-self-center"},[a("header",{staticClass:"flex w-fit-full p2 row nowrap justify-content-space-between"},[a("h1",{staticClass:"title-user color-inherit"},[e.returnLink.visible?a("router-link",{attrs:{to:e.returnLink.url}},[a("fa",{staticClass:"fs-regular mr2 mb1",attrs:{icon:["fas","arrow-left"]}})],1):e._e(),e._v(" "+e._s(e.config.title)+" ")],1),e.canCreate?a("el-button",{staticClass:"capitalize",attrs:{type:"warning",round:""},on:{click:e.handleRoute}},[e._v(" "+e._s(e.config.btn_label)+" ")]):e._e()],1),a("el-divider"),a("el-card",{staticClass:"w-fit-full",attrs:{shadow:"never"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{"row-class-name":e.tableRowClassName,data:e.tableData,"max-height":"500"}},[e._l(e.columns,(function(t,r){return a("el-table-column",{key:r,attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(r){return[Array.isArray(r.row[t.value])&&r.row[t.value].length?e._l(r.row[t.value],(function(r,n){return a("div",{key:n},[r.city?[e._v(" City: "+e._s(r.city)+" ")]:e._e(),a("br"),r.street?[e._v(" Street: "+e._s(r.street)+" ")]:"websites"==t.value||"cables"==t.value||"cls"==t.value||"facilities"==t.value?a("el-tag",{attrs:{size:"small",title:r.name||r}},[e._v(" "+e._s(r.name?r.name:r)+" ")]):a("el-tag",{attrs:{size:"small",title:r.fullAddress}},[e._v(" "+e._s(r.fullAddress?r.fullAddress:r)+" ")])],2)})):"logo"==t.value?a("el-image",{staticClass:"w12 h12 circle",attrs:{fit:"cover",src:r.row[t.value]}}):"name"==t.value?a("div",[e._v(" "+e._s(r.row[t.value])+" "),r.row.deleted?a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(" Deleted ")]):e._e()],1):"alerts"==t.value?[r.row[t.value]?a("span",{staticClass:"cursor-pointer",on:{click:function(t){return e.handleSendMessage(r.row)}}},[e._v(" "+e._s(""+r.row[t.value])+" ")]):a("span",[e._v(" 0 ")])]:(t.value.includes("activationDateTime")||t.value.includes("rgDate")||t.value.includes("uDate"))&&r.row[t.value]?a("span",[e._v(" "+e._s(e.formatDate(r.row[t.value]))+" ")]):Array.isArray(r.row[t.value])||"object"==typeof r.row[t.value]||"undefined"==typeof r.row[t.value]?e._e():a("span",[e._v(" "+e._s(""+r.row[t.value])+" ")])]}}],null,!0)})})),a("el-table-column",{attrs:{fixed:"right",label:"Operations",width:e.canSearch?320:90},scopedSlots:e._u([{key:"header",fn:function(t){return e.canSearch?[a("div",{staticClass:"table-list__searchbar",staticStyle:{display:"flex","flex-flow":"row nowrap",padding:"0"}},[a("el-select",{staticClass:"mr2 w70",class:{dark:e.dark},staticStyle:{padding:"0"},attrs:{id:"sortBy",size:"mini",placeholder:""},on:{change:function(t){return e.$emit("sort-by",e.tableSearch,t,e.paginationPage)}},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}},e._l(e.sortList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1),a("el-input",{key:t.index,class:{dark:e.dark},attrs:{size:"mini",clearable:"",placeholder:"Type to search by "+e.sortBy},on:{clear:function(t){return e.$emit("clear-search-input","",e.sortBy,e.paginationPage)},input:function(t){return e.$emit("search-input",t,e.sortBy,e.paginationPage)}},model:{value:e.tableSearch,callback:function(t){e.tableSearch=t},expression:"tableSearch"}})],1)]:void 0}},{key:"default",fn:function(t){return[a("div",{staticClass:"flex row nowrap justify-content-center"},[e.canEdit?a("el-button",{staticClass:"p2 mr4 fs-regular",attrs:{plain:"",size:"small"},on:{click:function(a){return e.$emit("edit-item",t.row._id)}}},[a("fa",{attrs:{icon:["fas","pen"]}})],1):e._e(),e.canView?a("el-button",{staticClass:"p2 mr4 fs-regular",attrs:{plain:"",size:"small"},on:{click:function(a){return e.$emit("view-item",t.row._id)}}},[a("fa",{attrs:{icon:["fas","eye"]}})],1):e._e(),e.canDelete&&!t.row.deleted?a("el-button",{staticClass:"p2 fs-regular",attrs:{type:"danger",size:"small"},on:{click:function(a){return e.$emit("delete-item",t.row.idReport?t.row.idReport:t.row.idMessage?t.row.idMessage:t.row._id,t.row.deleted)}}},[a("fa",{attrs:{icon:e.deleteIcon}})],1):e._e()],1)]}}],null,!0)})],2)],1),e.pagination?a("div",{staticClass:"w-fit-full flex justify-content-center mt8"},[a("el-pagination",{attrs:{layout:"prev, next","current-page":e.paginationPage},on:{"update:currentPage":function(t){e.paginationPage=t},"update:current-page":function(t){e.paginationPage=t},"current-change":function(t){return e.$emit("page-change",e.tableSearch,e.sortBy,t)}}})],1):e._e()],1)},n=[],i=(a("b64b"),a("5530")),s=a("2c8b"),o={name:"TableList",props:{sortList:{type:Array,default:function(){return[{text:"Name Asc",value:"nameAsc"},{text:"Name Desc",value:"nameDesc"},{text:"Created at Asc",value:"creatAtAsc"},{text:"Created at Desc",value:"creatAtDesc"},{text:"Updated at Asc",value:"updateAtAsc"},{text:"Updated at Desc",value:"updateAtDesc"}]}},columns:{type:Array,required:!0},config:{type:Object,required:!0},tableData:{type:Array,required:!0},admittedKeys:{type:Array,default:function(){return[]}},pagination:{type:Boolean,default:function(){return!1}},canEdit:{type:Boolean,default:function(){return!0}},canSearch:{type:Boolean,default:function(){return!0}},isLoading:{type:Boolean,default:function(){return!1}},canView:{type:Boolean,default:function(){return!1}},canCreate:{type:Boolean,default:function(){return!0}},canDelete:{type:Boolean,default:function(){return!0}},deleteIcon:{type:Array,default:function(){return["fas","trash"]}},rowClasses:{type:Array,default:function(){return[]}},returnLink:{type:Object,default:function(){return{visible:!1,url:""}}}},data:function(){return{formatDate:s["a"],sortBy:"nameAsc",tableSearch:"",paginationPage:0}},computed:{dark:function(){return this.$store.state.isDark}},methods:{getTableSearchValue:function(){return[void 0!=this.tableSearch?this.tableSearch:"",this.sortBy,this.paginationPage]},getKeys:function(e){return e.length?Object.keys(e[0]).sort():[]},tableRowClassName:function(e){var t=e.row;return this.rowClasses.length>0&&String(t[this.rowClasses[0]])==this.rowClasses[2]?this.rowClasses[1]:""},handleRoute:function(){return this.config.creation_link?this.$router.push(this.config.creation_link):this.$emit("btn-click")},handleSendMessage:function(e){return this.$emit("alert-message",Object(i["a"])({},e))}}},l=o,c=a("2877"),u=Object(c["a"])(l,r,n,!1,null,null,null);t["a"]=u.exports},"238e":function(e,t,a){"use strict";var r=a("283c"),n=a.n(r);n.a},"262e":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("131a");function r(e,t){return r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},"283c":function(e,t,a){},"29cc":function(e,t,a){},"2c2f":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return c}));a("96cf");var r,n,i=a("1da1"),s=a("780a"),o=a("a4dc"),l=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,r="".concat(o["a"].url,"/auth/user/logs"),e.next=4,s["a"].get(r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+o["a"].bearer()}});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l,c,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,i=t.type,l=t.elemnt,c=t.email,r="".concat(o["a"].url,"/auth/user/verifyElemnt"),n=new FormData,n.append("type",i),n.append("email",c),n.append("elemnt",l),e.next=8,s["a"].post(r,n,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+o["a"].bearer()}});case 8:return u=e.sent,e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"2caf":function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));a("4ae1"),a("3410"),a("131a");function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}a("d3b7"),a("25f0");function n(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}var i=a("53ca");function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o(e,t){return!t||"object"!==Object(i["a"])(t)&&"function"!==typeof t?s(e):t}function l(e){var t=n();return function(){var a,n=r(e);if(t){var i=r(this).constructor;a=Reflect.construct(n,arguments,i)}else a=n.apply(this,arguments);return o(this,a)}}},"324b":function(e,t,a){},3410:function(e,t,a){var r=a("23e7"),n=a("d039"),i=a("7b0b"),s=a("e163"),o=a("e177"),l=n((function(){s(1)}));r({target:"Object",stat:!0,forced:l,sham:!o},{getPrototypeOf:function(e){return s(i(e))}})},3843:function(e,t,a){"use strict";var r=a("6728"),n=a.n(r);n.a},"38d5":function(e,t,a){},"3c2e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"inline-block w-fit-full multi-select"},[a("div",{staticClass:"flex row wrap w-fit-full"},[e._l(e.selections,(function(t,r){return[t?a("el-tag",{key:r,staticClass:"mr1 mb4 p2 no-overflow vertical-align",staticStyle:{"max-width":"16rem"},attrs:{closable:"",title:t.name?t.name:t.label,effect:e.dark?"dark":"light",type:e.dark?"info":"","disable-transitions":!0},on:{close:function(a){return e.handleRemovedItem(t)}}},[a("span",{staticClass:"inline-block h7 p0 no-overflow truncate",staticStyle:{"max-width":"12rem"}},[e._v(" "+e._s(t.name?t.name:t.label)+" ")])]):e._e()]})),e.isInputVisible?a("el-select",{ref:"tagInput",staticClass:"w-fit-full",class:{dark:e.dark},attrs:{filterable:"",size:"medium",remote:"","remote-method":e.handleInputChange,placeholder:"",loading:e.loading},on:{focus:function(){return e.isTagRepeated=!1},change:e.handleInputConfirm,"visible-change":e.handleInputVisibility},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.options,(function(t,r){return a("el-option",{key:r,attrs:{value:t,label:t.name}},[a("div",[1==t.yours?a("fa",{staticClass:"mr1",attrs:{icon:["fas","award"]}}):e._e(),e._v(" "+e._s(t.name?t.name:t.label)+" ")],1)])})),1):a("el-button",{staticClass:"h8",class:{"border-red-imp":e.isRequired&&e.isFieldEmpty},attrs:{round:"",plain:"",size:"small"},on:{click:function(t){return t.stopPropagation(),e.toggleInput(!0)}}},[e._v(" Add ")])],2),e.isTagRepeated?a("el-alert",{staticClass:"h20 text-center w-fit-full pr2 pl2 pt2 pb2 mb4",attrs:{center:"",type:"danger",title:"This selection is already included on the list",closable:!1}}):e._e()],1)},n=[],i=(a("caad"),a("c975"),a("d81d"),a("a434"),a("2532"),a("33b5")),s={name:"VMultiselect",props:{value:{type:[Array,String],default:function(){return[]}},options:{type:Array,required:!0},loading:{type:Boolean,required:!0},isMultiple:{type:Boolean,default:function(){return!0}},getSelectedId:{type:Boolean,default:function(){return!1}},isRequired:{type:Boolean,default:function(){return!1}},isFieldEmpty:{type:Boolean,default:function(){return!1}},mode:{type:String,default:function(){return"create"}}},data:function(){return{selected:null,selections:[],isTagRepeated:!1,isInputVisible:!1}},computed:{dark:function(){return this.$store.state.isDark}},watch:{mode:function(e){"create"!=e&&(this.selections=this.value)},value:function(e){"create"!=this.mode&&(this.selections=e)}},mounted:function(){"create"!=this.mode&&(this.selections=this.value)},methods:{handleInputChange:Object(i["a"])((function(e){return e.length<2?void 0:this.$emit("input",e)}),320),handleRemovedItem:function(e){e&&(this.selections.splice(this.selections.map((function(e){return e._id})).indexOf(e._id),1),this.$emit("remove",e._id))},toggleInput:function(e){var t=this;this.isInputVisible=e,e&&this.$nextTick((function(){t.$refs.tagInput.$refs.reference.$refs.input.focus()}))},handleInputVisibility:function(e){e||(this.toggleInput(!1),this.selected=null)},emitInputValue:function(e){var t=null;return e||!this.getSelectedId?t=this.selections:this.getSelectedId&&(t=this.selected._id),e?t:this.$emit("values-change",t)},handleInputConfirm:function(){var e=this.selected,t=[];if(t=this.isMultiple?this.selections.map((function(e){return e._id})):[this.selections._id],e){var a=t.includes(e._id);if(a)return void(this.isTagRepeated=!0);if(this.isTagRepeated=!1,!this.isMultiple)return this.selections.length>0&&(this.selections=[]),this.selections.push(e),this.emitInputValue();this.selections.push(e)}return this.emitInputValue()}}},o=s,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);t["default"]=c.exports},"3c3e":function(e,t,a){},"3c93":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{ref:"tableList",attrs:{"is-loading":e.loading,columns:e.columns,config:e.tableConfig,"table-data":e.tableData,pagination:!0},on:{"btn-click":e.toggleDialog,"edit-item":e.viewOrg,"delete-item":e.deleteOrg,"alert-message":e.handleSendMessage,"search-input":e.handleOrgSearch,"sort-by":e.handleOrgSearch,"page-change":e.handleOrgSearch,"clear-search-input":e.handleOrgSearch}}),a("org-form",{attrs:{form:e.form,visible:e.isDialog,mode:e.mode},on:{"send-data":e.checkMode,close:function(t){return e.toggleDialog(!0)}}}),a("prompt-delete",{attrs:{elemnt:e.elemntType,"is-visible":e.promptDelete},on:{"delete-cancel":function(t){return e.$emit("delete-cancel")},"delete-confirm":function(t){return e.$emit("delete-confirm")}}})],1)},n=[],i=(a("4de4"),a("d81d"),a("b0c0"),a("d3b7"),a("498a"),a("5530")),s=(a("96cf"),a("1da1")),o=a("2909"),l=a("156a"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.visible,"custom-class":e.dark?"custom-dialog dark":"custom-dialog","before-close":e.handleBeforeClose,"close-on-click-modal":!1}},[a("header",{staticClass:"w-fit-full",attrs:{slot:"title"},slot:"title"},[a("h1",{staticClass:"title-user-variant w-fit-full fs-xlarge text-center capitalize",class:{dark:e.dark}},[e._v(" "+e._s(e.title)+" organization ")])]),a("el-form",{ref:"orgForm",staticClass:"p2",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"Name",prop:"name",required:""}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{clearable:""},on:{input:e.checkName},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isNameRepeated?a("el-alert",{staticClass:"mt4 p2",attrs:{type:"error",closable:!1,description:"This name already exists in our database. Use a different name or\n        consider extending your name."}}):e._e()],1),a("el-form-item",{attrs:{label:"URL",prop:"link"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},model:{value:e.form.link,callback:function(t){e.$set(e.form,"link",t)},expression:"form.link"}})],1),a("el-form-item",{attrs:{label:"Information",prop:"inf"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{type:"textarea",rows:4},model:{value:e.form.information,callback:function(t){e.$set(e.form,"information",t)},expression:"form.information"}})],1),a("el-form-item",{attrs:{label:"Logo"}},[a("el-upload",{ref:"upload",staticClass:"w-fit-full inline-block",attrs:{accept:"image/*.jpg","list-type":"picture",multiple:!1,"auto-upload":!1,action:e.uploadURL,"http-request":e.handleUserLogoUpload,"file-list":e.fileList,"on-remove":e.handleFileListRemove,"on-change":e.handleFileListChange}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("Click to upload")]),a("div",{staticClass:"el-upload__tip ml1",class:{dark:e.dark},attrs:{slot:"tip"},slot:"tip"},[e._v(" - jpg files only ")])],1)],1),a("el-collapse-transition",[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.uploadLogo.show,expression:"uploadLogo.show"}],attrs:{closable:!1,type:e.uploadLogo.type,title:e.uploadLogo.text}})],1),a("el-form-item",{staticClass:"mt2",attrs:{label:"Address"}},[e._l(e.form.address,(function(t,r){return a("el-tag",{key:r,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t.reference)+" "),a("fa",{staticClass:"cursor-pointer w24 ml1 inline-block",attrs:{icon:["fas","pen"]},on:{click:function(a){return e.editAddress(t,r)}}})],1)})),a("br"),a("el-collapse-transition",[e.inputVisible?a("el-card",{staticClass:"p4 w-auto mt4",attrs:{shadow:"never"}},[a("el-form",{ref:"tagForm",attrs:{model:e.tag,rules:e.tagRules}},[a("el-form-item",{attrs:{label:"Reference (e.g: 'HQ', 'Amsterdam Office', 'Sales Department')",prop:"reference",required:""}},[a("el-input",{ref:"saveTagInput",class:{dark:e.dark},attrs:{name:"street",size:"mini"},model:{value:e.tag.reference,callback:function(t){e.$set(e.tag,"reference",t)},expression:"tag.reference"}})],1),a("el-form-item",{attrs:{prop:"address",label:"Address"}},[a("autocomplete-google",{attrs:{mode:e.tagMode,value:e.autocompleteAddress},on:{"place-changed":e.handleAddressChange}})],1)],1),a("el-form-item",[a("div",{staticClass:"flex row wrap justify-content-end justify-center-sm pt3"},[a("el-button",{staticClass:"w25 h8 mb4 mr2",class:{dark:e.dark},attrs:{plain:"",type:"success",size:"mini"},on:{click:e.handleSaveAddress}},[e._v(" Save address ")]),a("el-button",{staticClass:"w25 h8",class:{dark:e.dark},attrs:{size:"mini"},on:{click:e.clearAddress}},[e._v(" Cancel ")])],1)])],1):a("el-button",{staticClass:"w42 text-center",class:{dark:e.dark},attrs:{size:"small"},on:{click:e.showInput}},[e._v(" Add ")])],1)],2)],1),a("div",{staticClass:"dialog-footer-mobile mt4"},[a("el-button",{staticClass:"h10 capitalize",class:{dark:e.dark},attrs:{type:"primary",plain:"",disabled:e.uploadLogo.loading,round:""},on:{click:e.sendData}},[e._v(" "+e._s(e.saveBtn)+" ")]),a("el-button",{staticClass:"h10",class:{dark:e.dark},attrs:{round:""},on:{click:e.handleBeforeClose}},[e._v(" Cancel ")])],1),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:!e.linkedElements,expression:"!linkedElements"}],attrs:{slot:"footer"},slot:"footer"},[a("el-divider"),e.linkedElements?a("el-form-item",{attrs:{label:"Associations"}},[a("div",{staticClass:"flex column w-fit-full"},[e._l(e.linkedElements.labels,(function(t,r){return[a("el-form-item",{key:r,staticClass:"ml2 mt2",attrs:{label:t}},[a("v-multi-select",{attrs:{mode:"edit","get-selected-id":"",loading:e.linkedElements.loading,value:"create"==e.mode?[]:e.linkedElements.values[r],options:e.linkedElements.options[t.toLowerCase()]},on:{remove:function(a){return e.handleLinkedElementsRemove({type:t,selection:a})},input:function(a){return e.handleSearchLinkedElements(t,a)},"values-change":function(a){return e.handleLinkedElementsChange({type:t,selection:a})}}})],1)]}))],2)]):e._e()],1)],1)},u=[],d=(a("99af"),a("caad"),a("c975"),a("a434"),a("2532"),a("3835")),f=a("a4dc"),m=a("f5fa"),p=a("3d24"),h=a("ccb9"),g=a("33b5"),b=a("2c39"),v=a("7c03"),w=a("92bd"),y=a("0060"),k=a("5c49"),x={name:"OrgForm",components:{VMultiSelect:function(){return Promise.resolve().then(a.bind(null,"3c2e"))},AutocompleteGoogle:function(){return Promise.resolve().then(a.bind(null,"fc4a"))}},data:function(){return{fileList:[],countriesList:m["a"],linkedElements:null,isNameRepeated:!1,tag:{fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""},formRules:{name:[{required:!0,message:"Please input a name for this organization",trigger:["blur","change"]},{type:"string",trigger:"change",message:"Please input a valid name",transform:function(e){return e.trim()},pattern:/^[\A-Za-zÀ-ÖØ-öø-ÿ&.,0-9()´‘'’ /\-]+$/},{min:2,message:"Length should be at least 2",trigger:["blur","change"]}],link:[],inf:[]},tagRules:{reference:[{required:!0,message:"Please input a reference name",trigger:["blur","change"]}],address:[]},uploadLogo:{text:"",type:"",show:!1,loading:!1},tagOnEdit:null,inputVisible:!1,isTagReferenceMissing:!1}},props:{visible:{type:Boolean,required:!0},form:{type:Object,required:!0},mode:{type:String,required:!0}},computed:{title:function(){return"create"==this.mode?"Create":"Edit"},saveBtn:function(){return"create"==this.mode?"Create organization":"Save changes"},dark:function(){return this.$store.state.isDark},uploadURL:function(){return"".concat(f["a"].url,"/auth/upload/logo")},autocompleteAddress:function(){return this.tag?this.tag.fullAddress:""},tagMode:function(){return null!=this.tagOnEdit&&this.tag?"edit":"create"}},watch:{mode:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if("edit"!=e){a.next=4;break}return t.setLogoUrl(),a.next=4,t.getOrgLinkedElements(t.form._id);case 4:case"end":return a.stop()}}),a)})))()},visible:function(e){var t=this;e?setTimeout((function(){t.$refs.orgForm&&t.$refs.orgForm.clearValidate()}),50):(this.fileList=[],this.linkedElements=null)}},methods:{handleSearchLinkedElements:function(e,t){var a=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var n,i,s,o,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a.linkedElements.loading=!0,n=[],i=null,r.next=5,a.$auth.getUserID();case 5:r.t0=r.sent,r.t1=t,s={user_id:r.t0,s:r.t1},e=e.toLowerCase(),r.t2=e,r.next="terrestrial networks"===r.t2?12:"cls"===r.t2?14:"ixps"===r.t2?16:"known users"===r.t2?18:"facilities"===r.t2?20:22;break;case 12:return i=v["g"],r.abrupt("break",24);case 14:return i=y["e"],r.abrupt("break",24);case 16:return i=w["e"],r.abrupt("break",24);case 18:return i=v["f"],r.abrupt("break",24);case 20:return i=k["f"],r.abrupt("break",24);case 22:return i=v["f"],r.abrupt("break",24);case 24:if(!i){r.next=33;break}return r.next=27,i(s);case 27:if(r.t3=r.sent,r.t3){r.next=30;break}r.t3={data:[]};case 30:o=r.t3,l=o.data,n=l||[];case 33:a.linkedElements.loading=!1,a.linkedElements.options[e]=n;case 35:case"end":return r.stop()}}),r)})))()},handleLinkedElementsChange:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.type,n=e.selection,a.t0=n,a.t1=t.form._id,a.next=5,t.$auth.getUserID();case 5:a.t2=a.sent,i={_id:a.t0,org_id:a.t1,user_id:a.t2},a.prev=7,a.t3=r.toLowerCase(),a.next="terrestrial networks"===a.t3?11:"cls"===a.t3?14:"ixps"===a.t3?17:"facilities"===a.t3?20:"known users"===a.t3?23:26;break;case 11:return a.next=13,Object(b["s"])(i);case 13:return a.abrupt("break",29);case 14:return a.next=16,Object(b["n"])(i);case 16:return a.abrupt("break",29);case 17:return a.next=19,Object(b["p"])(i);case 19:return a.abrupt("break",29);case 20:return a.next=22,Object(b["o"])(i);case 22:return a.abrupt("break",29);case 23:return a.next=25,Object(b["q"])(i);case 25:return a.abrupt("break",29);case 26:return a.next=28,Object(b["r"])(i);case 28:return a.abrupt("break",29);case 29:a.next=34;break;case 31:a.prev=31,a.t4=a["catch"](7),console.error(a.t4);case 34:case"end":return a.stop()}}),a,null,[[7,31]])})))()},handleLinkedElementsRemove:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.type,n=e.selection,a.t0=n,a.t1=t.form._id,a.next=5,t.$auth.getUserID();case 5:a.t2=a.sent,i={_id:a.t0,org_id:a.t1,user_id:a.t2},a.t3=r.toLowerCase(),a.next="terrestrial networks"===a.t3?10:"ixps"===a.t3?13:"facilities"===a.t3?16:"known users"===a.t3?19:"cls"===a.t3?22:25;break;case 10:return a.next=12,Object(b["l"])(i);case 12:return a.abrupt("break",28);case 13:return a.next=15,Object(b["i"])(i);case 15:return a.abrupt("break",28);case 16:return a.next=18,Object(b["h"])(i);case 18:return a.abrupt("break",28);case 19:return a.next=21,Object(b["j"])(i);case 21:return a.abrupt("break",28);case 22:return a.next=24,Object(b["g"])(i);case 24:return a.abrupt("break",28);case 25:return a.next=27,Object(b["k"])(i);case 27:return a.abrupt("break",28);case 28:case"end":return a.stop()}}),a)})))()},getOrgLinkedElements:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,i,s,o,l,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,Object(b["d"])({user_id:t.$auth.getUserID(),id:e});case 2:r=a.sent,n=Object(d["a"])(r,6),i=n[0],s=n[1],o=n[2],l=n[3],c=n[4],u=n[5],t.linkedElements={loading:!1,labels:["CLS","IXPS","Subsea Cables","Known Users","Facilities","Terrestrial Networks"],options:{cls:[],ixps:[],facilities:[],"known users":[],"subsea cables":[],"terrestrial networks":[]},values:[i.r?i.r:i,c.r?c.r:c,s.r?s.r:s,u.r?u.r:u,l.r?l.r:l,o.r?o.r:o]};case 11:case"end":return a.stop()}}),a)})))()},checkName:Object(g["a"])(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isNameRepeated=!1,e.next=3,Object(h["e"])({user_id:this.$auth.getUserID(),name:t});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={t:"error",data:{r:!1}};case 6:a=e.t0,r=a.t,n=a.data.r,this.isNameRepeated="error"!=r&&n>=1;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),320),handleFileListRemove:function(){this.form.logo="",this.fileList=[]},handleFileListChange:function(e,t){e&&t.length>0&&!this.form.logo&&(this.fileList=[e.raw],this.$refs.upload.submit())},handleUserLogoUpload:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.uploadLogo.show=!1,e.uploadLogo.loading=!0,t.t1=p["c"],t.next=5,e.$auth.getUserID();case 5:return t.t2=t.sent,t.t3=e.fileList[0],t.t4={user_id:t.t2,logo:t.t3},t.next=10,(0,t.t1)(t.t4);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0={data:{logo:[]}};case 13:if(a=t.t0,r=a.data.r,n=void 0===r?[]:r,n.length){t.next=21;break}return e.fileList=n,e.uploadLogo={type:"info",text:"There has been an error trying to upload your logo. Please, try again.",show:!0,loading:!1},setTimeout((function(){return e.uploadLogo.show=!1}),5200),t.abrupt("return");case 21:e.form.logo=n[0],e.uploadLogo={type:"success",text:"Success! Your logo has been uploaded.",show:!0,loading:!1};case 23:case"end":return t.stop()}}),t)})))()},setLogoUrl:function(){""!==this.form.logo&&void 0!=this.form.logo&&(this.fileList=[{url:this.form.logo}])},sendData:function(){var e=this;return this.$refs["orgForm"].validate((function(t){return!!t&&e.$emit("send-data")}))},handleBeforeClose:function(){return this.fileList=[],this.clearAddress(),this.uploadLogo={text:"",type:"",show:!1,loading:!1},this.$refs["orgForm"].clearValidate(),this.$emit("close")},handleClose:function(e){return this.form.address.splice(this.form.address.indexOf(e),1)},clearAddress:function(){this.isTagReferenceMissing=!1,this.inputVisible=!1,this.tagOnEdit=null,this.tag={fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""}},editAddress:function(e,t){var a=Object.assign({},e);a.fullAddress||(a.fullAddress="".concat(a.city?a.city:"").concat(a.state?" (".concat(a.state,"), "):"").concat(a.country?a.country:"")),this.tag=a,this.tagOnEdit=t,this.inputVisible=!0},handleAddressChange:function(e){var t,a={street_number:"short_name",route:"long_name",locality:"long_name",country:"long_name",postal_code:"short_name"};this.tag.fullAddress=e.fullAddress;for(var r=0;r<e.address_components.length;r++)if(t=e.address_components[r].types[0],a[t]){var n=e.address_components[r][a[t]];switch(t){case"country":this.tag.country=n;break;case"postal_code":this.tag.zipcode=n;break;case"locality":this.tag.city=n;break;case"route":this.tag.street=n;break;case"administrative_area_level_1":this.tag.state=n;break}}},handleSaveAddress:function(){var e=this;return this.$refs["tagForm"].validate((function(t){t&&(null===e.tagOnEdit?e.form.address.push(Object(i["a"])({},e.tag)):e.form.address[e.tagOnEdit]=Object(i["a"])({},e.tag),e.clearAddress())}))},showInput:function(){var e=this;this.inputVisible=!0;try{this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))}catch(t){}},confirmTag:function(){var e=this.tag,t=this.form.address.includes(e);t||(e&&this.form.address.push(e),this.inputVisible=!1,this.tag={fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""})}}},C=x,S=a("2877"),_=Object(S["a"])(C,c,u,!1,null,null,null),D=_.exports,O=a("9c7a"),L=a("0316"),R=a("39a1"),j=a("a5e0"),$={name:"CablesSection",components:{"org-form":D,"table-list":l["a"],PromptDelete:function(){return a.e("chunk-2d0d6b42").then(a.bind(null,"744c"))}},data:function(){return{tableData:[],mode:"create",loading:!1,promptDelete:!1,form:{name:"",logo:"",notes:"",link:"",address:[],information:""},isDialog:!1,tableConfig:{creation_link:!1,title:"Organizations",btn_label:"Create organization"},columns:Object(o["a"])(O["f"]).filter((function(e){return e.showTable}))}},computed:{dark:function(){return this.$store.state.isDark},elemntType:function(){return"organization"},checkMode:function(){return"create"==this.mode?this.createOrg:this.saveEditedOrg}},created:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleOrgSearch("","nameAsc",0);case 2:case"end":return t.stop()}}),t)})))()},methods:{handleSendMessage:function(e){return this.$store.commit("".concat(R["f"]),{id:e._id,name:e.name,type:"cls"}),this.$store.commit("".concat(L["n"]),!0)},viewOrg:function(e){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var r,n,i,s,o,l,c,u,d;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t1=b["u"],a.next=3,t.$auth.getUserID();case 3:return a.t2=a.sent,a.t3=e,a.t4={user_id:a.t2,_id:a.t3},a.next=8,(0,a.t1)(a.t4);case 8:if(a.t0=a.sent,a.t0){a.next=11;break}a.t0={data:{orgData:{}}};case 11:r=a.t0,n=r.data.r,i=void 0===n?{}:n,s=i.name,o=i.url,l=i.notes,c=i.address,u=i.information,d=i.logo,t.form={_id:e,name:s,logo:d,notes:l,address:c.map((function(e){return e.country&&void 0!=e.country&&""==e.reference.trim()&&(e.reference=e.country),e})),link:o,information:u},t.mode="edit",t.toggleDialog();case 18:case"end":return a.stop()}}),a)})))()},deleteOrg:function(e,t){var a=this;this.promptDelete=!0,this.$once("delete-confirm",Object(s["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=11;break}return r.t0=b["b"],r.next=4,a.$auth.getUserID();case 4:return r.t1=r.sent,r.t2=e,r.t3={user_id:r.t1,_id:r.t2},r.next=9,(0,r.t0)(r.t3).then((function(){a.handleOrgSearch.apply(a,Object(o["a"])(a.$refs.tableList.getTableSearchValue()))}));case 9:r.next=19;break;case 11:return r.t4=j["e"],r.next=14,a.$auth.getUserID();case 14:return r.t5=r.sent,r.t6=e,r.t7={user_id:r.t5,_id:r.t6},r.next=19,(0,r.t4)(r.t7).then((function(){a.handleOrgSearch.apply(a,Object(o["a"])(a.$refs.tableList.getTableSearchValue()))}));case 19:a.promptDelete=!1;case 20:case"end":return r.stop()}}),r)})))),this.$once("delete-cancel",Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.promptDelete=!1;case 1:case"end":return e.stop()}}),e)}))))},toggleDialog:function(e){this.isDialog=!this.isDialog,e&&(this.mode="create",this.form={name:"",logo:"",notes:"",link:"",address:[],information:""})},createOrg:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=b["a"],t.t1=i["a"],t.t2=Object(i["a"])({},e.form),t.t3={},t.next=6,e.$auth.getUserID();case 6:return t.t4=t.sent,t.t5={user_id:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),t.next=11,(0,t.t0)(t.t6);case 11:a=t.sent,a&&a.data&&"error"!==a.t&&(e.toggleDialog(!0),e.handleOrgSearch.apply(e,Object(o["a"])(e.$refs.tableList.getTableSearchValue())));case 13:case"end":return t.stop()}}),t)})))()},saveEditedOrg:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=b["c"],t.t1=i["a"],t.t2=Object(i["a"])({},e.form),t.t3={},t.next=6,e.$auth.getUserID();case 6:return t.t4=t.sent,t.t5={user_id:t.t4},t.t6=(0,t.t1)(t.t2,t.t3,t.t5),t.next=11,(0,t.t0)(t.t6);case 11:a=t.sent,a&&"error"!==a.t&&(e.toggleDialog(!0),e.handleOrgSearch.apply(e,Object(o["a"])(e.$refs.tableList.getTableSearchValue())));case 13:case"end":return t.stop()}}),t)})))()},handleOrgSearch:Object(g["a"])(function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:0,this.loading=!0,e.t0=b["m"],e.next=5,this.$auth.getUserID();case 5:return e.t1=e.sent,e.t2=a,e.t3=r,e.t4=t,e.t5={user_id:e.t1,psz:!0,sortBy:e.t2,page:e.t3,s:e.t4},e.next=12,(0,e.t0)(e.t5);case 12:n=e.sent,n&&n.data&&(this.tableData=n.data),this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),820)}},T=$,I=(a("8ffc"),Object(S["a"])(T,r,n,!1,null,"58447667",null));t["default"]=I.exports},"3d24":function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return c})),a.d(t,"b",(function(){return u}));a("9911"),a("96cf");var r,n,i=a("1da1"),s=a("780a"),o=a("a4dc"),l=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.logo,i=t.user_id,r="".concat(o["a"].url,"/auth/upload/logo"),n=new FormData,n.append("file",a),e.next=6,s["a"].post(r,n,{withCredentials:!0,headers:{userid:i,Authorization:"Bearer "+o["a"].bearer()}});case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.file,i=t.user_id,r="".concat(o["a"].url,"/auth/upload/file"),n=new FormData,n.append("file",a[0]),e.next=6,s["a"].post(r,n,{withCredentials:!0,headers:{userid:i,"Content-Type":"multipart/form-data",Authorization:"Bearer "+o["a"].bearer()}});case 6:return l=e.sent,e.abrupt("return",l);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l,c,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.t,i=t.element,l=t.file,c=t.information,u=t.user_id,r="".concat(o["a"].url,"/auth/elements/foredit"),n=new FormData,n.append("t",a),n.append("element",i),n.append("file",l),n.append("information",c),e.next=9,s["a"].post(r,n,{withCredentials:!0,headers:{userid:u,Authorization:"Bearer "+o["a"].bearer()}});case 9:return d=e.sent,e.abrupt("return",d);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"408a":function(e,t,a){var r=a("c6b6");e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},"426f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{ref:"tableList",attrs:{"is-loading":e.loading,columns:e.columns,config:e.tableConfig,"table-data":e.tableData,pagination:!0,"row-classes":["state","light-yellow-bg","false"]},on:{"edit-item":e.handleEditCLS,"delete-item":e.handleDeleteCLS,"alert-message":e.handleSendMessage,"search-input":e.handleCLSSearch,"sort-by":e.handleCLSSearch,"clear-search-input":e.handleCLSSearch,"page-change":e.handleCLSSearch}}),a("prompt-delete",{attrs:{elemnt:e.elemntType,"is-visible":e.promptDelete},on:{"delete-cancel":function(t){return e.$emit("delete-cancel")},"delete-confirm":function(t){return e.$emit("delete-confirm")}}})],1)},n=[],i=(a("4de4"),a("b0c0"),a("d3b7"),a("96cf"),a("1da1")),s=a("2909"),o=a("9c7a"),l=a("156a"),c=a("0060"),u=a("0316"),d=a("39a1"),f=a("33b5"),m=a("a5e0"),p={name:"ClsSection",components:{TableList:l["a"],PromptDelete:function(){return a.e("chunk-2d0d6b42").then(a.bind(null,"744c"))}},data:function(){return{tableData:[],loading:!1,promptDelete:!1,tableConfig:{title:"CLS",creation_link:"/user/section/create?id=cls",btn_label:"Create cls"},columns:Object(s["a"])(o["b"]).filter((function(e){return e.showTable}))}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleCLSSearch("","nameAsc",0);case 2:case"end":return t.stop()}}),t)})))()},computed:{dark:function(){return this.$store.state.isDark},elemntType:function(){return"cls"}},methods:{handleSendMessage:function(e){return this.$store.commit("".concat(d["f"]),{id:e._id,name:e.name,type:"cls"}),this.$store.commit("".concat(u["n"]),!0)},handleEditCLS:function(e){this.$router.push({path:"/user/section/create",query:{id:"cls",item:e}})},handleDeleteCLS:function(e,t){var a=this;this.promptDelete=!0,this.$once("delete-confirm",Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=11;break}return r.t0=c["b"],r.next=4,a.$auth.getUserID();case 4:return r.t1=r.sent,r.t2=e,r.t3={user_id:r.t1,_id:r.t2},r.next=9,(0,r.t0)(r.t3).then((function(){a.handleCLSSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 9:r.next=19;break;case 11:return r.t4=m["b"],r.next=14,a.$auth.getUserID();case 14:return r.t5=r.sent,r.t6=e,r.t7={user_id:r.t5,_id:r.t6},r.next=19,(0,r.t4)(r.t7).then((function(){a.handleCLSSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 19:a.promptDelete=!1;case 20:case"end":return r.stop()}}),r)})))),this.$once("delete-cancel",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.promptDelete=!1;case 1:case"end":return e.stop()}}),e)}))))},handleCLSSearch:Object(f["a"])(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:0,this.loading=!0,e.t0=c["e"],e.next=5,this.$auth.getUserID();case 5:return e.t1=e.sent,e.t2=a,e.t3=r,e.t4=t,e.t5={user_id:e.t1,psz:!0,sortBy:e.t2,page:e.t3,s:e.t4},e.next=12,(0,e.t0)(e.t5);case 12:n=e.sent,n&&n.data&&(this.tableData=n.data),this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),820)}},h=p,g=(a("074e"),a("2877")),b=Object(g["a"])(h,r,n,!1,null,"dbbdbb22",null);t["default"]=b.exports},"42a6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{ref:"tableList",attrs:{"is-loading":e.loading,columns:e.columns,config:e.tableConfig,"table-data":e.tableData,pagination:!0},on:{"edit-item":e.handleEditCable,"delete-item":e.handleDeleteCable,"alert-message":e.handleSendMessage,"search-input":e.handleTerrestrialSearch,"page-change":e.handleTerrestrialSearch,"clear-search-input":e.handleTerrestrialSearch,"sort-by":e.handleTerrestrialSearch}}),a("prompt-delete",{attrs:{elemnt:e.elemntType,"is-visible":e.promptDelete},on:{"delete-cancel":function(t){return e.$emit("delete-cancel")},"delete-confirm":function(t){return e.$emit("delete-confirm")}}})],1)},n=[],i=(a("4de4"),a("b0c0"),a("d3b7"),a("96cf"),a("1da1")),s=a("2909"),o=a("9c7a"),l=a("156a"),c=a("7c03"),u=a("0316"),d=a("39a1"),f=a("33b5"),m=a("a5e0"),p={name:"CablesSection",components:{TableList:l["a"],PromptDelete:function(){return a.e("chunk-2d0d6b42").then(a.bind(null,"744c"))}},data:function(){return{tableData:[],loading:!1,promptDelete:!1,tableConfig:{title:"Terrestrial Networks",creation_link:"/user/section/create?id=terrestrial-network",btn_label:"Create network"},columns:Object(s["a"])(o["a"]).filter((function(e){return e.showTable&&"activationDateTime"!==e.value}))}},computed:{dark:function(){return this.$store.state.isDark},elemntType:function(){return"network"}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleTerrestrialSearch("","nameAsc",0);case 2:case"end":return t.stop()}}),t)})))()},methods:{handleSendMessage:function(e){return this.$store.commit("".concat(d["f"]),{id:e._id,name:e.name,type:"cables"}),this.$store.commit("".concat(u["n"]),!0)},handleEditCable:function(e){return this.$router.push({path:"/user/section/create",query:{id:"terrestrial-network",item:e}})},handleDeleteCable:function(e,t){var a=this;this.promptDelete=!0,this.$once("delete-confirm",Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=11;break}return r.t0=c["b"],r.next=4,a.$auth.getUserID();case 4:return r.t1=r.sent,r.t2=e,r.t3={user_id:r.t1,_id:r.t2},r.next=9,(0,r.t0)(r.t3).then((function(){return a.handleTerrestrialSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 9:r.next=19;break;case 11:return r.t4=m["a"],r.next=14,a.$auth.getUserID();case 14:return r.t5=r.sent,r.t6=e,r.t7={user_id:r.t5,_id:r.t6},r.next=19,(0,r.t4)(r.t7).then((function(){return a.handleTerrestrialSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 19:a.promptDelete=!1;case 20:case"end":return r.stop()}}),r)})))),this.$once("delete-cancel",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.promptDelete=!1;case 1:case"end":return e.stop()}}),e)}))))},handleTerrestrialSearch:Object(f["a"])(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:0,this.loading=!0,e.t0=c["g"],e.next=5,this.$auth.getUserID();case 5:return e.t1=e.sent,e.t2=a,e.t3=r,e.t4=t,e.t5={user_id:e.t1,psz:!0,sortBy:e.t2,page:e.t3,s:e.t4},e.next=12,(0,e.t0)(e.t5);case 12:n=e.sent,n&&n.data&&(this.tableData=n.data),this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),820)}},h=p,g=(a("238e"),a("2877")),b=Object(g["a"])(h,r,n,!1,null,"46279e2e",null);t["default"]=b.exports},"464b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex row wrap align-items-start",class:{dark:e.dark,light:!e.dark}},[a("div",{staticClass:"flex row wrap w-fit-full"},[e._m(0),a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"w-fit-full p8",attrs:{shadow:"never"}},[a("div",{staticClass:"flex justify-content-space-between"},[a("div",[a("p",{staticClass:"m0 fs-large"},[a("strong",[e._v(" "+e._s(e.userData.user_metadata&&e.userData.user_metadata.name?e.user_metadata.namename:e.userData.name)+" ")])]),a("p",{staticClass:"fs-regular"},[e._v(" "+e._s(e.userData.email)+" ")]),e.userData.company?a("p",{staticClass:"mt6 fs-small"},[e._v(" "+e._s(e.userData.company)+" ")]):e._e()]),a("router-link",{staticClass:"inline-block w28 h7 mr1 color-inherit p1 vertical-align round fs-regular",attrs:{id:"profileBtn",to:"/user/profile"}},[e._v(" See my profile ")])],1)]),a("div",{staticClass:"w-fit-full mt10"},[a("el-row",{attrs:{gutter:50}},[a("el-col",{attrs:{md:24,lg:10}},[a("el-card",{staticClass:"pr8 pl8 h100 overflow-y-auto",attrs:{shadow:"never"}},[a("header",{staticClass:"header p4"},[a("h2",{staticClass:"title-user-variant m0 color-inherit"},[e._v(" My activity ")])]),a("el-table",{staticClass:"mt2",attrs:{data:e.logsData}},[a("el-table-column",{attrs:{prop:"path",label:"Path"}}),a("el-table-column",{attrs:{prop:"rgDate",label:"Register date",formatter:function(t){return e.formatDate(t.rgDate)}}})],1)],1)],1),a("el-col",{attrs:{md:24,lg:14}},[a("el-card",{staticClass:"map-wrapper pr8 pl8 h100",attrs:{shadow:"never"}},[a("header",{staticClass:"header p4"},[a("h2",{staticClass:"title-user-variant m0 color-inherit"},[e._v(" Map ")])]),a("div",{staticClass:"mt3 relative w-fit-full",staticStyle:{height:"32vh"},attrs:{id:"map"}})])],1)],1)],1)],1)])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",{staticClass:"mb8"},[a("h1",{staticClass:"title-user color-inherit"},[e._v(" Account ")])])}],i=(a("b0c0"),a("96cf"),a("1da1")),s=a("9a1e"),o=a("2c2f"),l=a("2c8b"),c=a("e192"),u=a.n(c),d=a("6ee6"),f=a.n(d),m=a("0fe6"),p={name:"user",data:function(){return{userData:{},loading:!0,logsData:[],formatDate:l["a"]}},computed:{dark:function(){return this.$store.state.isDark}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.createMap(),t.next=3,e.loadLogs();case 3:return t.next=5,e.setUserData();case 5:case"end":return t.stop()}}),t)})))()},methods:{loadLogs:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=o["a"],t.next=3,e.$auth.getUserID();case 3:return t.t1=t.sent,t.t2={user_id:t.t1},t.next=7,(0,t.t0)(t.t2);case 7:a=t.sent,a&&"err"!==a.t&&a.data&&a.data.r&&(e.logsData=a.data.r);case 9:case"end":return t.stop()}}),t)})))()},setUserData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$auth.user){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.next=5,e.$auth.getUserID();case 5:if(a=t.sent,!a){t.next=13;break}return t.next=9,Object(s["b"])(a);case 9:r=t.sent,r&&(n=r.email,i=r.user_metadata,e.userData={email:n,name:i&&i.name?i.name:r.name,company:i&&i.companyname?i.companyname:""}),t.next=14;break;case 13:setTimeout((function(){e.setUserData()}),320);case 14:e.loading=!1;case 15:case"end":return t.stop()}}),t)})))()},createMap:function(){try{u.a.accessToken=m["a"].mapToken;var e=new u.a.Map({container:"map",zoom:m["a"].zoom,center:m["a"].center,style:m["a"].default}),t=new f.a({displayControlsDefault:!1,controls:!1}),a=new u.a.ScaleControl({maxWidth:80,unit:"metric"});this.draw=t;var r=this;return e.addControl(a,"bottom-left"),e.addControl(t,"bottom-left"),e.on("draw.selectionchange",(function(e){return r.draw.changeMode("simple_select",{})})),e}catch(n){console.error(n)}}}},h=p,g=(a("4918"),a("2877")),b=Object(g["a"])(h,r,n,!1,null,"3b52d99a",null);t["default"]=b.exports},4918:function(e,t,a){"use strict";var r=a("90fd"),n=a.n(r);n.a},"4ae1":function(e,t,a){var r=a("23e7"),n=a("d066"),i=a("1c0b"),s=a("825a"),o=a("861d"),l=a("7c73"),c=a("0538"),u=a("d039"),d=n("Reflect","construct"),f=u((function(){function e(){}return!(d((function(){}),[],e)instanceof e)})),m=!u((function(){d((function(){}))})),p=f||m;r({target:"Reflect",stat:!0,forced:p,sham:p},{construct:function(e,t){i(e),s(t);var a=arguments.length<3?e:i(arguments[2]);if(m&&!f)return d(e,t,a);if(e==a){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3])}var r=[null];return r.push.apply(r,t),new(c.apply(e,r))}var n=a.prototype,u=l(o(n)?n:Object.prototype),p=Function.apply.call(e,u,t);return o(p)?p:u}})},"543d":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("9a87"),n=new r["b"]({debug:!1})},"577d":function(e,t,a){"use strict";var r=a("29cc"),n=a.n(r);n.a},"597c":function(e,t,a){},"5a66":function(e,t,a){"use strict";var r=a("597c"),n=a.n(r);n.a},"5ea1":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper flex row nowrap w-fit-full vph-full pt12 text-center",class:{dark:e.dark,light:!e.dark}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"left el-card p6"},[a("header",{staticClass:"w-fit-full text-left mb8"},["map"!=e.creationType?a("router-link",{attrs:{to:e.backButtonRoute}},[a("fa",{attrs:{icon:["fas","arrow-left"]}})],1):e._e()],1),a(e.currentView,{tag:"component",attrs:{form:e.form,mode:e.mode,"is-send-data-disabled":e.checkGeomLength,"is-sending-data":e.isSendingData},on:{"handle-file-converted":e.handleFileConverted,"cancel-geom-loading":function(t){return e.toggleMapFormLoading(!1)},"set-selection-onto-map":e.handleSetSelectionOntoMap,"loading-selection-geom":function(t){return e.toggleMapFormLoading(!0)},"send-data":function(t){return e.handleSendData(e.mode,e.creationType,t)},"dragger-geojson-upload-failed":e.handleFileConvertionFailed}})],1),a("div",{staticClass:"right w-fit-full"},[a("editor-map",{key:e.mapKey,attrs:{type:e.creationType,form:e.form},on:{"features-list-change":function(t){e.featuresList=t},"error-loading-draw-onto-map":e.handleFileConvertionFailed}})],1),[a("el-dialog",{attrs:{visible:e.isLoadingDialog,width:"44%",top:"12vh",title:"Uploading file...","show-close":!1,"custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isLoadingDialog=t}}},[e._v(" Usually, this takes time when uploading large files... Please be patient. ")]),a("el-dialog",{attrs:{visible:e.isMapFormLoading,width:"44%",top:"12vh",title:"Loading map...","show-close":!1,"custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isMapFormLoading=t}}},[e._v(" Usually, this takes time when loading a map with lots of data... Please be patient. ")]),a("el-dialog",{attrs:{visible:e.isMapFormSendingData,width:"44%",top:"12vh",title:"Uploading map and creating map files...","show-close":!1,"custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isMapFormSendingData=t}}},[e._v(" Usually, this takes time when uploading a map with lots of data... Please be patient. ")])],a("manual-kmz-submit-dialog",{attrs:{"form-data":e.form,"is-visible":e.isManualUploadDialog},on:{close:e.closeMannualKmzSubmitDialog}})],2)},n=[],i=(a("99af"),a("c975"),a("d81d"),a("b0c0"),a("ac1f"),a("5319"),a("2909")),s=a("5530"),o=(a("96cf"),a("1da1")),l=a("46cf"),c=["project","active","fault","decommissioned","unknown"],u=c,d=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-editor-wrapper transition-all",class:{dnd:e.drag.hover,"custom-map":"map"==e.type},on:{drop:function(t){return t.preventDefault(),e.onDrop(t)},dragover:function(t){return t.preventDefault(),function(){return e.drag.hover=!0}()},dragleave:function(t){return t.preventDefault(),function(){return e.drag.hover=!1}()}}},[a("div",{attrs:{id:"map"}}),"map"==e.type?a("div",{staticClass:"overlay",class:{dark:e.dark}},[a("span",{staticClass:"fs-small"},[e._v(" Geojson files dropped here, will be imported into the map. ")])]):e._e(),a("input",{ref:"file",staticClass:"hidden",attrs:{type:"file"}}),a("div",{staticClass:"absolute coords-box z-index20 p2 w25"},[a("p",{staticClass:"m0"},[a("strong",[e._v("Lat:")]),e._v(" "+e._s(e.infoBox.lat))]),a("p",{staticClass:"m0 mt1"},[a("strong",[e._v("Lng:")]),e._v(" "+e._s(e.infoBox.lng))]),a("p",{staticClass:"m0 mt1"},[a("strong",[e._v("Zoom:")]),e._v(" "+e._s(e.infoBox.zoom))])]),a("div",{staticClass:"absolute information-box z-index20 p2 ml5 text-left",class:{dark:e.dark}},[1==e.oneClickMessage.length?a("p",{staticClass:"m0"},[e._v(" "+e._s(e.oneClickMessage[0])+" ")]):2==e.oneClickMessage.length?[a("p",{staticClass:"m0",domProps:{innerHTML:e._s(e.oneClickMessage[0])}}),a("p",{staticClass:"m0 mt1 inline-block",domProps:{innerHTML:e._s(e.oneClickMessage[1])}})]:e._e(),"facilities"!=e.type?a("p",{staticClass:"m0 mt1"},[e._v(" "+e._s(e.doubleClickMessage[0])+" ")]):a("span",{staticClass:"inline-block ml1"},[e._v(" "+e._s(e.doubleClickMessage[0])+" ")])],2),a("properties-dialog",{attrs:{mode:e.dialog.mode,type:e.type,"creation-form":e.form,"is-visible":e.dialog.visible,feature:e.dialog.selectedFeature},on:{close:function(t){return e.$emit("properties-dialog-close-"+e.dialog.mode,t)}}})],1)},f=[],m=(a("4de4"),a("0481"),a("caad"),a("4069"),a("b680"),a("b64b"),a("d3b7"),a("2532"),a("1276"),a("ddb0"),a("3835")),p=a("b85c");a("a4d3"),a("e01a"),a("b636"),a("d28b"),a("3ca3");function h(e){var t;if("undefined"!==typeof Symbol){if(Symbol.asyncIterator&&(t=e[Symbol.asyncIterator],null!=t))return t.call(e);if(Symbol.iterator&&(t=e[Symbol.iterator],null!=t))return t.call(e)}throw new TypeError("Object is not async iterable")}var g=a("d4ec"),b=a("bee2"),v=a("262e"),w=a("2caf"),y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=document.createElement("button");if(a.id=e,a.className="editor-ctrl-btn ".concat(t.className),a.setAttribute("title",t.title),t.container.appendChild(a),void 0!=t.icon){var r=document.createElement("i");r.className=t.icon,a.appendChild(r)}return t.dataset&&a.setAttribute(t.dataset[0],t.dataset[1]),a.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),t.eventListener&&t.eventListener(e)}),!0),a.style.setProperty("background-repeat","no-repeat"),a.style.setProperty("display",t.visible?"block":"none"),a},k=a("5c96"),x=a("8593"),C=function(e){Object(v["a"])(a,e);var t=Object(w["a"])(a);function a(e){var r,n=e.map,i=e.draw,s=e.type;return Object(g["a"])(this,a),r=t.call(this),r.map=n,r.draw=i,r.type=s,r.buttons=null,r.visibleControls={lines:["subsea","map","terrestrial-network"],points:["facilities","ixps","cls","map"],polygon:["facilities","map"]},r}return Object(b["a"])(a,[{key:"onAdd",value:function(){return this.controlGroup=document.createElement("div"),this.controlGroup.className="mapboxgl-ctrl-group mapboxgl-ctrl",this.buttons=this._createButtons(),this.controlGroup}},{key:"onRemove",value:function(){this.controlGroup.parentNode.removeChild(this.controlGroup)}},{key:"_createButtons",value:function(){var e=this;return{line_string:y("line_string-static",{container:this.controlGroup,className:"editor-ctrl editor-line-string",title:"Draw line",dataset:["data-control-filter","lines"],visible:this.visibleControls.lines.includes(this.type),eventListener:function(){return e.createDraw(e.draw.modes.DRAW_LINE_STRING)}}),point:y("point-static",{container:this.controlGroup,className:"editor-ctrl editor-point",title:"Create point",dataset:["data-control-filter","points"],visible:this.visibleControls.points.includes(this.type),eventListener:function(){return e.createDraw(e.draw.modes.DRAW_POINT)}}),polygon:y("polygon-static",{container:this.controlGroup,className:"editor-ctrl editor-polygon",title:"Create polygon",dataset:["data-control-filter","polygon"],visible:this.visibleControls.polygon.includes(this.type),eventListener:function(){return e.createDraw(e.draw.modes.DRAW_POLYGON)}}),editProperties:y("edit-properties-dynamic",{container:this.controlGroup,className:"editor-ctrl editor-edit-properties",title:"Edit properties",eventListener:function(){return e.emit("update-feature-properties")}}),trash:y("trash-dynamic",{container:this.controlGroup,className:"editor-ctrl editor-trash",title:"Delete",eventListener:function(){return e.emit("delete-feature",e.draw.getSelected().features)}}),deleteAll:y("delete-all-static",{container:this.controlGroup,className:"editor-ctrl editor-delete-all",title:"Delete All",visible:!0,eventListener:function(){var t="map"==e.type?"This will delete everything on the editor. Including the elements on each category you created. You sure you want to continue?":"This will delete everything on the editor. Except the elements you have selected on the form.";return k["MessageBox"].confirm(t,"Delete all?").then((function(){return e.resetScene(!0,!0)})).catch((function(){}))}}),ok:y("ok-dynamic",{container:this.controlGroup,className:"editor-ctrl editor-ok",title:"Accept",eventListener:function(){return e.emit("confirm",e.draw.getSelected().features)}}),cancel:y("cancel-dynamic",{container:this.controlGroup,className:"editor-ctrl editor-cancel",title:"Cancel",eventListener:function(){return e.resetScene(!1,!0)}})}}},{key:"createDraw",value:function(e){this.emit("draw"),this.draw.changeMode(e)}},{key:"resetScene",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.emit("reset-scene",{reset:e,removeFilter:t})}},{key:"updateControls",value:function(e){var t=this,a=Object.keys(this.buttons).map((function(e){return t.buttons[e].id})).filter((function(e){return e.includes("-static")})),r=Object.keys(this.buttons).map((function(e){return t.buttons[e].id})).filter((function(e){return e.includes("-dynamic")})),n="delete-all-static";if(e.isDynamicControls)for(var i in this.buttons)r.includes(this.buttons[i].id)||this.buttons[i].id==n?this.buttons[i].style.setProperty("display","block"):this.buttons[i].style.setProperty("display","none");else for(var s in this.buttons)a.includes(this.buttons[s].id)&&(this.buttons[s].id==n||this.buttons[s].dataset.controlFilter&&this.visibleControls[this.buttons[s].dataset.controlFilter].includes(this.type))?this.buttons[s].style.setProperty("display","block"):this.buttons[s].style.setProperty("display","none")}}]),a}(x["a"]),S=C,_=a("e192"),D=a.n(_),O=a("6ee6"),L=a.n(O),R=a("0fe6"),j="kmz-file-converted",$="editor-set-features",T="editor-set-features-list",I="editor-get-features-list",A=a("b3da"),E={sources:["nondrawn-features","drawn-features"],layers:[{id:"cables-layer",source:"nondrawn-features",type:"line",filter:["all",["!=","$type","Point"],["!=","$type","Polygon"]],paint:{"line-width":1.5,"line-color":"#7288b0"}},{id:"cables-label-layer",source:"nondrawn-features",type:"symbol",filter:["all",["!=","$type","Point"],["!=","$type","Polygon"]],layout:{"text-field":"{name}","symbol-placement":"line","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14,"text-justify":"right","text-anchor":"bottom","text-offset":[0,-.1]},paint:{"text-color":"#485E69"}},{id:"cls-layer",type:"circle",source:"nondrawn-features",filter:["==","$type","Point"],paint:{"circle-radius":5.42,"circle-color":"#f78682","circle-stroke-width":1,"circle-stroke-color":"#333333"}},{id:"cls-label-layer",source:"nondrawn-features",filter:["==","$type","Point"],type:"symbol",layout:{"text-field":"{name}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14,"text-justify":"right","text-anchor":"top","text-offset":[0,-1.8]},paint:{"text-color":"#485E69"}},{id:"facilities-layer",type:"fill-extrusion",source:"nondrawn-features",filter:["==","$type","Polygon"],minzoom:14,layout:{},paint:{"fill-extrusion-color":"#666666","fill-extrusion-height":["/",["get","height"],1.25]}},{id:"facilities-label-layer",source:"nondrawn-features",filter:["==","$type","Polygon"],type:"symbol",layout:{"text-field":"{name}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14,"text-justify":"right","text-anchor":"bottom","text-offset":[0,-.1]},paint:{"text-color":"#485E69"}},{id:"drawn-cables-layer",source:"drawn-features",type:"line",filter:["all",["!=","$type","Point"],["!=","$type","Polygon"]],paint:{"line-width":1.5,"line-color":["case",["has","color"],["get","color"],"#7288b0"]}},{id:"drawn-cables-label-layer",source:"drawn-features",type:"symbol",filter:["all",["!=","$type","Point"],["!=","$type","Polygon"]],layout:{"text-field":"{name}. Status: {status}","symbol-placement":"line","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14,"text-justify":"right","text-anchor":"bottom","text-offset":[0,-.1]},paint:{"text-color":"#485E69"}},{id:"drawn-cls-layer",type:"circle",source:"drawn-features",filter:["==","$type","Point"],paint:{"circle-radius":5.42,"circle-color":["case",["has","color"],["get","color"],"#f78682"],"circle-stroke-width":1,"circle-stroke-color":"#333333"}},{id:"drawn-cls-label-layer",source:"drawn-features",filter:["==","$type","Point"],type:"symbol",layout:{"text-field":"{name}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14,"text-justify":"right","text-anchor":"top","text-offset":[0,-1]},paint:{"text-color":"#485E69"}},{id:"drawn-facilities-layer",type:"fill-extrusion",source:"drawn-features",filter:["==","$type","Polygon"],paint:{"fill-extrusion-color":["case",["has","color"],["get","color"],"#666666"],"fill-extrusion-height":["/",["get","height"],1.25]}},{id:"drawn-facilities-label-layer",source:"drawn-features",type:"symbol",filter:["==","$type","Polygon"],layout:{"text-field":"{name}. Status: {status}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14,"text-justify":"right","text-anchor":"bottom","text-offset":[0,-.1]},paint:{"text-color":"#485E69"}}]},F={label:{id:"default-label-layer",source:"default-source",type:"symbol",layout:{"text-field":"{name}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":14,"text-justify":"right","text-anchor":"top","text-offset":[0,-2]},paint:{"text-color":"#485E69"}},cables:{id:"default-layer",source:"default-source",type:"line",paint:{"line-width":1.5},filter:["all",["!=","$type","Point"],["!=","$type","Polygon"]]},points:{id:"default-layer",type:"circle",source:"default-source",paint:{"circle-radius":5.42,"circle-color":"#f78682","circle-stroke-width":1,"circle-stroke-color":"#333333"},filter:["==","$type","Point"]},buildings:{id:"default-layer",type:"fill-extrusion",source:"default-source",layout:{},filter:["==","$type","Polygon"],paint:{"fill-extrusion-opacity":1,"fill-extrusion-color":"#666666","fill-extrusion-height":["get","height"]}}},M=a("33b5"),P=a("7c8d");function U(e){var t=[1/0,1/0,-1/0,-1/0];return Object(P["a"])(e,(function(e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]<e[0]&&(t[2]=e[0]),t[3]<e[1]&&(t[3]=e[1])})),t}var z=U,N=a("9a87"),B=new N["b"]({debug:!1});function V(e){var t=e.fc,a=e.map,r=e.type;if(!(t.features.length<=0)){var n=z(t),i={animate:!0,speed:1.75,padding:90,pan:{duration:25}},s={facilities:16.8,ixps:12.8,cls:14.52};return s[r]&&(i.zoom=s[r]),a.fitBounds(n,i),a}}function q(e){var t=e.dark,a=e.map;return a.setStyle(t?R["a"].darkBasemap:R["a"].default),a}function G(e){var t=Object(s["a"])({},e),a="".concat(e.properties.name,".").concat(Date.now()+1.52*Math.random());return t.editorID=a,t.properties.editorID=a,t}function K(e,t){return W.apply(this,arguments)}function W(){return W=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t&&a){e.next=2;break}return e.abrupt("return");case 2:if(!(a.length<=0)){e.next=5;break}return t.getSource("drawn-features").setData(Object(A["a"])()),e.abrupt("return");case 5:r="drawn-features",n=t.getSource(r),n?n.setData(Object(A["a"])(a)):setTimeout(Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,K(t,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),1200);case 8:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}function J(e){var t=e.list,a=e.map,r=e.reset;if(r)a.getSource("nondrawn-features").setData(Object(A["a"])());else{var n="nondrawn-features",i=a.getSource(n);i?i.setData(Object(A["a"])(t)):setTimeout((function(){return J({list:t,map:a,reset:r})}),1200)}}var H,Z=a("19f6"),X=a("543d"),Y=["cls","ixps"],Q={components:{PropertiesDialog:function(){return a.e("chunk-2d0a5550").then(a.bind(null,"09f7"))}},data:function(){return{map:null,draw:null,categoriesDictionary:null,drag:{file:null,hover:!1},infoBox:{lat:R["a"].center[1],lng:R["a"].center[0],zoom:R["a"].zoom},scene:{layerFiltered:null,isDynamicControls:!1},controls:null,categories:[],dialog:{visible:!1,mode:"create",selectedFeature:{}}}},props:{type:{type:String,default:function(){return""},validator:function(e){return-1!=["cls","map","ixps","subsea","facilities","terrestrial-network"].indexOf(e)}},form:{type:Object,required:!0}},computed:{dark:function(){return this.$store.state.isDark},oneClickMessage:function(){var e=[];switch(this.type){case"ixps":e=["Click once to edit the properties of the IXP or change its position"];break;case"cls":e=["Click once to edit the properties of the CLS or change its position"];break;case"facilities":e=["<strong>Points:</strong> Click once to edit the properties of the Facility or change its position","<strong>Polygons:</strong> Click once to edit the properties of a segment."];break;default:e=["Click once to edit the properties of a segment."];break}return e},doubleClickMessage:function(){var e=[];switch(this.type){case"subsea":e=["Click twice to edit the shape of a segment."];break;case"terrestrial-network":e=["Click twice to edit the shape of a segment."];break;default:e=[];break}return e}},watch:{dark:function(e){q({dark:e,map:this.map})},scene:{handler:function(e){this.controls.updateControls(e)},deep:!0}},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:B.on("storage--changed",e.handleDrawSceneFeatures),l["a"].$on("".concat(T),e.handleSetSceneFeaturesList),l["a"].$on("".concat(j),e.handleFileConverted),l["a"].$on("".concat($),e.handleMapFormFeatureSelection),l["a"].$on("".concat(I),e.handleGetFeatures),"map"==e.type&&(e.categoriesDictionary=X["a"],l["a"].$on("category-removed",e.handleCategoryRemoved),e.$on("drawn-features-dnd",e.handleDragAndDropGeojsonFiles),e.categoriesDictionary.on("storage--changed",e.handleCategoriesChange),e.categoriesDictionary.on("storage--item-added",e.handleCategoryChange),e.categoriesDictionary.on("storage--item-updated",e.handleCategoryChange));case 6:case"end":return t.stop()}}),t)})))()},mounted:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=e,t.t1=e,t.next=4,e.createMap();case 4:t.t2=t.sent,t.t3=t.t1.addMapEvents.call(t.t1,t.t2),e.map=t.t0.handleSetMapSources.call(t.t0,t.t3),q({dark:e.dark,map:e.map}),e.controls.resetScene();case 9:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){B.reset(),B.off("storage--changed",this.handleDrawSceneFeatures),l["a"].$off("".concat(T),this.handleSetSceneFeaturesList),l["a"].$off("".concat(j),this.handleFileConverted),l["a"].$off("".concat($),this.handleMapFormFeatureSelection),l["a"].$off("".concat(I),this.handleGetFeatures),"map"==this.type&&(this.categoriesDictionary.reset(),l["a"].$off("category-removed",this.handleCategoryRemoved),this.$off("drawn-features-dnd",this.handleDragAndDropGeojsonFiles),this.categoriesDictionary.off("storage--changed",this.handleCategoriesChange),this.categoriesDictionary.off("storage--item-added",this.handleCategoryChange),this.categoriesDictionary.off("storage--item-updated",this.handleCategoryChange))},methods:{handleDrawSceneFeatures:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleRecreateDraw(null,!1);case 2:case"end":return t.stop()}}),t)})))()},handleDragAndDropGeojsonFiles:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,o,l,c,u,d,f,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=[],n=null,o=[],l=Object(p["a"])(e.features);try{for(l.s();!(c=l.n()).done;){u=c.value,d=Object(p["a"])(t.categories);try{for(d.s();!(f=d.n()).done;)m=f.value,u.properties&&u.properties.category&&u.properties.category._id==m._id&&(n=Object(s["a"])({},m),"Point"==u.geometry.type&&n.types.includes("custom points")?n.data["custom points"].push(u):"LineString"==u.geometry.type&&n.types.includes("custom lines")?n.data["custom lines"].push(u):"Polygon"==u.geometry.type&&n.types.includes("custom polygons")&&n.data["custom polygons"].push(u),o.push(n))}catch(h){d.e(h)}finally{d.f()}r.push(G(u))}}catch(h){l.e(h)}finally{l.f()}n=null,t.handleSetSceneFeaturesList([].concat(Object(i["a"])(B.getCollectionList()),r)),o.length>0?t.handleCategoriesChange(o):t.handleRecreateDraw([].concat(Object(i["a"])(e.features),[B.getCollectionList()]),!1);case 8:case"end":return a.stop()}}),a)})))()},onDrop:function(e){if(this.drag.hover=!1,"map"==this.type){var t=new FileReader,a=this;t.onload=function(){var e=Object(s["a"])({},JSON.parse(t.result));a.$emit("drawn-features-dnd",e)},e.dataTransfer.files.length>0&&t.readAsText(e.dataTransfer.files[0])}},handleCategoryRemoved:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r="".concat(e,"--source"),t.map.getSource(r)&&t.map.getSource(r).setData(Object(A["a"])());case 2:case"end":return a.stop()}}),a)})))()},handleCategoryChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,l,c,u,d,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.$store.dispatch("editor/toggleMapFormLoading",!0),a.prev=1,a.next=4,t.$auth.getUserID();case 4:r=a.sent,n=!1,i=[],o=null,a.t0=regeneratorRuntime.keys(e.data);case 9:if((a.t1=a.t0()).done){a.next=23;break}if(l=a.t1.value,l.includes("custom")){a.next=20;break}if(c=Object.keys(e.data[l]),!(c.length>0)){a.next=18;break}return a.next=16,Object(Z["b"])(l,c,r);case 16:o=a.sent,o&&o.features&&i.push(o.features);case 18:a.next=21;break;case 20:Object.keys(e.data[l])&&(n=!0);case 21:a.next=9;break;case 23:return a.next=25,t.handleSetCategorySource({_id:e._id,name:e.name,color:e.color,data:Object(A["a"])(i.length>0?i.flat():[])});case 25:u=Object(p["a"])(e.types),a.prev=26,u.s();case 28:if((d=u.n()).done){a.next=35;break}if(f=d.value,Object.keys(e.data[f]).length){a.next=32;break}return a.abrupt("continue",33);case 32:t.handleSetCategoryLayers(Object(s["a"])(Object(s["a"])({},e),{},{t:f}));case 33:a.next=28;break;case 35:a.next=40;break;case 37:a.prev=37,a.t2=a["catch"](26),u.e(a.t2);case 40:return a.prev=40,u.f(),a.finish(40);case 43:if(!n){a.next=46;break}return a.next=46,K(t.map,B.getCollectionList());case 46:a.next=51;break;case 48:a.prev=48,a.t3=a["catch"](1),console.error(a.t3);case 51:return a.prev=51,t.$store.dispatch("editor/toggleMapFormLoading",!1),a.finish(51);case 54:case"end":return a.stop()}}),a,null,[[1,48,51,54],[26,37,40,43]])})))()},handleCategoriesChange:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i,s,o,l,c,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e&&"string"!=typeof e&&"number"!=typeof e){a.next=2;break}return a.abrupt("return");case 2:if(!Array.isArray(e)){a.next=39;break}r=!0,n=!1,a.prev=5,s=h(e);case 7:return a.next=9,s.next();case 9:return o=a.sent,r=o.done,a.next=13,o.value;case 13:if(l=a.sent,r){a.next=21;break}return c=l,a.next=18,t.handleCategoryChange(c);case 18:r=!0,a.next=7;break;case 21:a.next=27;break;case 23:a.prev=23,a.t0=a["catch"](5),n=!0,i=a.t0;case 27:if(a.prev=27,a.prev=28,r||null==s.return){a.next=32;break}return a.next=32,s.return();case 32:if(a.prev=32,!n){a.next=35;break}throw i;case 35:return a.finish(32);case 36:return a.finish(27);case 37:a.next=46;break;case 39:a.t1=regeneratorRuntime.keys(e);case 40:if((a.t2=a.t1()).done){a.next=46;break}return u=a.t2.value,a.next=44,t.handleCategoryChange(e[u]);case 44:a.next=40;break;case 46:case"end":return a.stop()}}),a,null,[[5,23,27,37],[28,,32,36]])})))()},handleSetCategorySource:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.map&&(r="".concat(e._id,"--source"),n=t.map.getSource(r),n||t.map.addSource(r,{type:"geojson",data:e.data}),n?n.setData(e.data):t.handleSetCategorySource(e));case 1:case"end":return a.stop()}}),a)})))()},handleSetCategoryLayers:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,l,c,u,d,f;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r="",n=t,i="",o=t.map,l=null,c=null,u="".concat(e._id,"--layer"),d=u.replace("--layer","--source"),a.t0=e.t.toLowerCase(),a.next="cls"===a.t0?11:"ixps"===a.t0?16:"facilities"===a.t0?20:"custom points"===a.t0?24:"custom polygons"===a.t0?28:32;break;case 11:return r="points",i="circle-color",u=u+"-"+r,l={"text-field":"{name}"},a.abrupt("break",37);case 16:return r="points",i="circle-color",u=u+"-"+r,a.abrupt("break",37);case 20:return r="points",i="circle-color",u=u+"-"+r,a.abrupt("break",37);case 24:return r="points",i="circle-color",u=u+"-"+r,a.abrupt("break",37);case 28:return r="points",i="circle-color",u=u+"-"+r,a.abrupt("break",37);case 32:return r="cables",i="line-color",l={"symbol-placement":"line","text-offset":[0,-.1]},u=u+"-"+r,a.abrupt("break",37);case 37:f=function t(){c=Object(s["a"])({},F[r]),c.id=u,c.source=d,c.paint[i]=e.color;var a=Object(s["a"])({},F.label),n="".concat(e._id,"--layer--label");a.id=n,a.source=d,a.filter=c.filter,l&&(a.layout=Object(s["a"])(Object(s["a"])({},a.layout),l));var f=o.getLayer(u),m=o.getLayer(n);if(f?o.setPaintProperty(u,i,e.color):o.addLayer(c),m){if(m&&l)for(var p in l)o.setLayoutProperty("".concat(e._id,"--layer--label"),p,l[p])}else o.addLayer(a);return f&&m||setTimeout((function(){return t()}),120),!0},f(),e.t.includes("custom")&&(o.on("click",c.id,(function(e){n.handleFeatureSelection({e:e,map:o,drawn:!0,layerID:c.id})})),o.on("mouseenter",c.id,(function(e){o.getCanvas().style.cursor="pointer"})),o.on("mouseleave",c.id,(function(e){o.getCanvas().style.cursor=""})));case 40:case"end":return a.stop()}}),a)})))()},handleGetFeatures:function(){this.$emit("features-list-change",B.getCollectionList())},handleSetSceneFeaturesList:function(e){var t,a={},r=Object(p["a"])(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;a[n.properties.editorID?n.properties.editorID:n.properties._id]=n}}catch(i){r.e(i)}finally{r.f()}B.set(a)},handleFileConverted:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e.features.length){a.next=2;break}return a.abrupt("return");case 2:return a.prev=2,r=Object(A["a"])([].concat(Object(i["a"])(e.features),Object(i["a"])(B.getCollectionList()))),J({list:r.features,map:t.map}),a.next=7,V({fc:r,map:t.map,type:t.type});case 7:a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](2),console.error(a.t0);case 12:case"end":return a.stop()}}),a,null,[[2,9]])})))()},handleMapFormFeatureSelection:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.fc,t.map){a.next=3;break}return a.abrupt("return");case 3:return t.$store.dispatch("editor/toggleMapFormLoading",!0),a.next=6,J({list:r.features,map:t.map});case 6:t.$store.dispatch("editor/toggleMapFormLoading",!1);case 7:case"end":return a.stop()}}),a)})))()},setPropertiesDialogEditMode:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.dialog.mode="edit",e.scene.isDynamicControls=!0,e.dialog.visible=!0,t.t0=e,t.t1="properties-dialog-close-".concat(e.dialog.mode),t.next=7,e.handleDialogData;case 7:t.t2=t.sent,t.t0.$once.call(t.t0,t.t1,t.t2);case 9:case"end":return t.stop()}}),t)})))()},handleDialogData:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.dialog.visible=!1,!e){a.next=10;break}if(r=t.draw.getSelected().features,!r||!r.length){a.next=10;break}return n=Object(s["a"])({},JSON.parse(JSON.stringify(r[0]))),n.properties=Object(s["a"])({},e),i="create"==t.dialog.mode?G(n):t.updateSceneDictionaryFeature(n),"create"==t.dialog.mode&&B.add(i.editorID,i),a.next=10,t.handleUpdateMapSourcesData(i,B.getCollectionList());case 10:return a.next=12,t.handleResetScene({reset:!1,removeFilter:"create"!=t.dialog.mode});case 12:t.dialog={visible:!1,mode:"create",selectedFeature:{}};case 13:case"end":return a.stop()}}),a)})))()},handleUpdateMapSourcesData:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,i,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e&&e.properties.category){r.next=4;break}return r.next=3,K(a.map,t);case 3:return r.abrupt("return");case 4:n=a.categoriesDictionary.get("string"==typeof e.properties.category?e.properties.category:e.properties.category._id),i=e.geometry.type.toLowerCase(),s=n?n.types.filter((function(e){return e.includes("custom")})):[],o="custom ".concat("linestring"==i?"lines":"building"==i?"polygons":"point"==i?"points":i),s.includes(o)&&(n.data[o][e.properties.editorID]=e,a.categoriesDictionary.update(n._id,n),a.handleCategoryChange(n));case 9:case"end":return r.stop()}}),r)})))()},createMap:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return D.a.accessToken=R["a"].mapToken,a=new D.a.Map({container:"map",maxZoom:17.8,zoom:R["a"].zoom,center:R["a"].center,style:R["a"].default}),t.next=4,new D.a.ScaleControl({maxWidth:80,unit:"metric"});case 4:return r=t.sent,a.addControl(r,"top-left"),a.addControl(new D.a.NavigationControl),a.addControl(new D.a.FullscreenControl),t.next=10,new L.a({displayControlsDefault:!1});case 10:return e.draw=t.sent,t.next=13,new S({map:a,draw:e.draw,type:e.type,scene:e.scene});case 13:return e.controls=t.sent,e.controls.on("confirm",e.handleConfirmAction),e.controls.on("draw",(function(){return e.scene.isDynamicControls=!0})),t.t0=e.controls,t.next=19,e.handleResetScene;case 19:return t.t1=t.sent,t.t0.on.call(t.t0,"reset-scene",t.t1),t.t2=e.controls,t.next=24,e.handleDeleteFeature;case 24:return t.t3=t.sent,t.t2.on.call(t.t2,"delete-feature",t.t3),t.t4=e.controls,t.next=29,e.handleFeatureEdition;case 29:return t.t5=t.sent,t.t4.on.call(t.t4,"update-feature",t.t5),t.t6=e.controls,t.next=34,e.setPropertiesDialogEditMode;case 34:return t.t7=t.sent,t.t6.on.call(t.t6,"update-feature-properties",t.t7),a.addControl(e.controls),a.addControl(e.draw),t.abrupt("return",a);case 39:case"end":return t.stop()}}),t)})))()},handleBeforeCreateFeature:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.dialog.selectedFeature=e,"Point"==e.geometry.type){a.next=11;break}return t.dialog.visible=!0,a.t0=t,a.t1="properties-dialog-close-".concat(t.dialog.mode),a.next=7,t.handleDialogData;case 7:a.t2=a.sent,a.t0.$once.call(a.t0,a.t1,a.t2),a.next=13;break;case 11:return a.next=13,t.handleDialogData({name:""});case 13:case"end":return a.stop()}}),a)})))()},handleConfirmAction:function(e){var t=Object(m["a"])(e,1),a=t[0];if(a)if(a.properties.editorID||a.properties._id)this.handleFeatureEdition(Object(s["a"])({},a));else{if(Y.includes(this.type)&&B.getLength()>0)return;this.handleBeforeCreateFeature(Object(s["a"])({},a))}},handleResetScene:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=e.reset,n=e.removeFilter,t.draw.changeMode(t.draw.modes.SIMPLE_SELECT),t.draw.set(Object(A["a"])()),t.scene={layerFiltered:t.scene.layerFiltered,isDynamicControls:!1},!r){a.next=9;break}return B.reset(),"map"==t.type&&l["a"].$emit("categories-field-reset-datasets"),a.next=9,t.handleUpdateMapSourcesData(!1,[]);case 9:n&&t.scene.layerFiltered&&(i=t.scene.layerFiltered,t.map.setFilter(i.name,i.filter),t.scene.layerFiltered=null);case 10:case"end":return a.stop()}}),a)})))()},handleSetMapSources:function(e){var t=this;return e.on("load",(function(){var a,r=Object(p["a"])(E.sources);try{for(r.s();!(a=r.n()).done;){var n=a.value;e.addSource(n,{type:"geojson",data:Object(A["a"])()})}}catch(i){r.e(i)}finally{r.f()}t.addMapLayers(t.map)})),e},addMapLayers:function(e){var t,a=Object(p["a"])(E.layers);try{for(a.s();!(t=a.n()).done;){var r=t.value;e.addLayer(r)}}catch(n){a.e(n)}finally{a.f()}},addMapEvents:function(e){var t=this;return e.on("load",(function(){e.on("mousemove",(function(e){var a=e.lngLat.wrap();t.infoBox.lat=a.lat.toFixed(5),t.infoBox.lng=a.lng.toFixed(5)})),e.on("zoom",(function(){t.infoBox.zoom=e.getZoom().toFixed(5)}));var a,r=E.layers.filter((function(e){return!e.id.includes("nondrawn")})),n=Object(p["a"])(r);try{var i=function(){var r=a.value;e.on("click",r.id,(function(a){t.handleFeatureSelection({e:a,map:e,layerID:r.id})})),e.on("mouseenter",r.id,(function(t){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave",r.id,(function(t){e.getCanvas().style.cursor=""}))};for(n.s();!(a=n.n()).done;)i()}catch(s){n.e(s)}finally{n.f()}})),e},handleRecreateDraw:Object(M["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=!(n.length>1&&void 0!==n[1])||n[1],r=t||B.getCollectionList(),e.next=4,K(this.map,r);case 4:if(!a){e.next=7;break}return e.next=7,V({fc:Object(A["a"])(r),type:this.type,map:this.map});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),820),handleFeatureSelection:Object(M["a"])((function(e){var t=e.e,a=e.layerID,r=e.map,n=r.queryRenderedFeatures(t.point,{layers:[a]})[0];if(a.includes("label")&&(a=a.replace("-label","")),this.scene.isDynamicControls&&this.handleResetScene({reset:!1,removeFilter:!0}),n){var i=n.properties.editorID?"editorID":"_id",s=n.properties[i],o=B.get(s);if(o)try{var l=a.includes("--")?a.split("--")[1].split("-")[1]:a.split("-")[1];switch(l.toLowerCase()){case"ixps":l="points";break;case"cls":l="points";break;case"facilities":l="buildings";break;default:l="cables";break}var c=["all",F[l].filter,["!=","".concat(i),s]];r.setFilter(a,c),this.scene.layerFiltered={name:a,filter:F[l].filter},this.scene.isDynamicControls=!0,this.dialog.selectedFeature=JSON.parse(JSON.stringify(o)),this.draw.changeMode("simple_select",{featureIds:this.draw.add(o)})}catch(u){console.error(u)}}}),320),updateSceneDictionaryFeature:function(e){return B.update(e.properties.editorID?e.properties.editorID:e.properties._id,e),e},handleFeatureEdition:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=t.updateSceneDictionaryFeature(e),a.next=3,t.handleUpdateMapSourcesData(r,B.getCollectionList());case 3:return a.next=5,t.handleResetScene({reset:!1,removeFilter:t.scene.isDynamicControls});case 5:case"end":return a.stop()}}),a)})))()},handleDeleteFeature:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:r=Object(p["a"])(e),a.prev=1,r.s();case 3:if((n=r.n()).done){a.next=12;break}return i=n.value,B.remove(i.properties.editorID),a.next=8,t.handleUpdateMapSourcesData(i,B.getCollectionList());case 8:return a.next=10,t.handleResetScene({reset:!1,removeFilter:t.scene.isDynamicControls});case 10:a.next=3;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a["catch"](1),r.e(a.t0);case 17:return a.prev=17,r.f(),a.finish(17);case 20:case"end":return a.stop()}}),a,null,[[1,14,17,20]])})))()}}},ee=Q,te=(a("8cc6"),a("2877")),ae=Object(te["a"])(ee,d,f,!1,null,"3f5d3f6f",null),re=ae.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"pb6 pt6 pr8 pl8"},[a("header",{staticClass:"w-fit-full mb8",attrs:{slot:"header"},slot:"header"},[a("h1",{staticClass:"title capitalize"},[e._v(e._s(e.title)+" CLS")])]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"Name",required:"",prop:"name"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{clearable:""},on:{input:e.checkName},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isNameRepeated?a("el-alert",{staticClass:"mt4 p2",attrs:{type:"error",closable:!1,description:"This name already exists in our database. Use a different name or\n        consider extending your name."}}):e._e()],1),a("el-form-item",{attrs:{label:"Country",required:"",prop:"country"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{placeholder:"A country is required",filterable:""},model:{value:e.form.country,callback:function(t){e.$set(e.form,"country",t)},expression:"form.country"}},e._l(e.countries,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.code}})})),1)],1),a("el-form-item",{attrs:{label:"Status",prop:"state",required:""}},[a("el-radio-group",{class:{dark:e.dark},model:{value:e.form.state,callback:function(t){e.$set(e.form,"state",t)},expression:"form.state"}},[a("el-radio",{attrs:{label:"operational"}},[e._v(" Operational ")]),a("el-radio",{attrs:{label:"unknown"}},[e._v(" Unknown ")])],1)],1),a("el-form-item",{attrs:{label:"Subsea cables",prop:"cables"}},[a("v-multi-select",{attrs:{mode:e.mode,options:e.cablesList,loading:e.isLoadingCables,value:"create"==e.mode?[]:e.form.cables},on:{input:e.loadCablesSearch,remove:function(t){return e.handleSubseaCablesSelection(e.form.cables)},"values-change":e.handleSubseaCablesSelection}})],1),a("el-form-item",{attrs:{label:"Owners",prop:"owners"}},[a("v-multi-select",{attrs:{mode:e.mode,"is-required":!0,"is-field-empty":e.isOwnersSelectEmpty,options:e.ownersList,loading:e.isLoadingOwners,value:"create"===e.mode?[]:e.form.owners},on:{input:e.loadOwnersSearch,"values-change":e.handleOwnersSelectChange,remove:e.handleOwnersSelectRemoveItem}})],1),a("el-form-item",{staticClass:"mt2",attrs:{label:"Tags"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{multiple:"",filterable:"",placeholder:"","allow-create":"","default-first-option":""},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.form.tagsList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",[a("dragger",{attrs:{"creation-type":"cls"},on:{"handle-file-converted":e.handleFileConverted}})],1),a("el-form-item",{staticClass:"mt24"},[a("el-button",{staticClass:"w-fit-full capitalize",attrs:{type:"primary",round:"",loading:e.isSendingData,disabled:e.isSendDataDisabled},on:{click:e.sendData}},[e._v(" "+e._s(e.saveBtn)+" ")])],1)],1)],1)},ie=[],se=(a("a630"),a("498a"),a("82bb")),oe=a("7c03"),le=a("780a"),ce=a("a4dc"),ue=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,r=t.s,H="".concat(ce["a"].url,"/tags?s=").concat(r),e.next=4,le["a"].get(H,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+ce["a"].bearer()}});case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de=a("3c2e"),fe=a("2c39"),me=a("f5fa"),pe=a("ccb9"),he={name:"CLSForm",data:function(){return{tagsList:[],isLoadingOwners:!1,ownersList:[],cablesList:[],loading:!1,isNameRepeated:!1,isLoadingCables:!1,isOwnersSelectEmpty:!1}},components:{Dragger:se["default"],VMultiSelect:de["default"]},props:{form:{type:Object,required:!0},mode:{type:String,required:!0},isSendingData:{type:Boolean,default:function(){return!1}},isSendDataDisabled:{type:Boolean,required:!0}},computed:{countries:function(){var e=Object(i["a"])(me["a"]);function t(){var t=0;return function(){t>=1||(e.unshift({name:"N.A (Not Available)",code:"N.A"}),t+=1)}}return t()(),e},formRules:function(){return{name:[{type:"string",required:!0,trigger:"blur",message:"Please input a name"},{type:"string",trigger:"change",message:"Please input a valid name",transform:function(e){return e.trim()},pattern:/^[\A-Za-zÀ-ÖØ-öø-ÿ&.,0-9()´‘'’ /\-]+$/},{min:3,message:"Length should be at least 3",trigger:"change"}],country:[{type:"string",required:!0,trigger:"blur",message:"Please select a country"}],cables:[],slug:[],state:[],owners:[]}},dark:function(){return this.$store.state.isDark},title:function(){return"create"==this.mode?"Create":"Edit"},saveBtn:function(){return"create"==this.mode?"Create CLS":"Save changes"}},watch:{"form.cablesList":function(e){this.cablesList=Object(i["a"])(e),this.handleSubseaCablesSelection(e),delete this.form.cablesList},"form.ownersList":function(e){e&&(this.ownersList=Object(i["a"])(e),delete this.form.ownersList)},"form.tags":function(e){this.getTagsList(e)}},mounted:function(){var e=this;"create"==this.mode&&setTimeout((function(){e.$refs.form&&e.$refs.form.clearValidate()}),50)},methods:{checkName:Object(M["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isNameRepeated=!1,e.next=3,Object(pe["b"])({user_id:this.$auth.getUserID(),name:t});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={t:"error",data:{r:!1}};case 6:a=e.t0,r=a.t,n=a.data.r,this.isNameRepeated="error"!=r&&n>=1;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),320),loadOwnersSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.length<=0)){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingOwners=!0,a.t1=fe["m"],a.next=6,t.$auth.getUserID();case 6:return a.t2=a.sent,a.t3=e,a.t4={user_id:a.t2,s:a.t3},a.next=11,(0,a.t1)(a.t4);case 11:if(a.t0=a.sent,a.t0){a.next=14;break}a.t0={owners:[]};case 14:r=a.t0,n=r.data,i=void 0===n?[]:n,t.ownersList=i,t.isLoadingOwners=!1;case 19:case"end":return a.stop()}}),a)})))()},handleOwnersSelectRemoveItem:function(e){this.form.owners=this.form.owners.filter((function(t){return t._id!=e}))},handleOwnersSelectChange:function(e){this.form.owners=Array.from(e)},handleSubseaCablesSelection:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.form.cables=e,a.next=3,Object(oe["d"])({ids:e.map((function(e){return e._id})),user_id:t.$auth.getUserID()});case 3:if(a.t0=a.sent,a.t0){a.next=6;break}a.t0={data:{featureCollection:[]}};case 6:return r=a.t0,n=r.data.r,i=void 0===n?[]:n,a.abrupt("return",t.$emit("set-selection-onto-map",{fc:Array.isArray(i)?Object(A["a"])(i):i}));case 10:case"end":return a.stop()}}),a)})))()},getTagsList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t1=ue,a.next=3,t.$auth.getUserID();case 3:return a.t2=a.sent,a.t3=e,a.t4={user_id:a.t2,s:a.t3},a.next=8,(0,a.t1)(a.t4);case 8:if(a.t0=a.sent,a.t0){a.next=11;break}a.t0={data:[]};case 11:r=a.t0,n=r.data,t.form.tagsList=n;case 14:case"end":return a.stop()}}),a)})))()},loadCablesSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingCables=!0,a.t1=oe["f"],a.next=6,t.$auth.getUserID();case 6:return a.t2=a.sent,a.t3=e,a.t4={user_id:a.t2,s:a.t3},a.next=11,(0,a.t1)(a.t4);case 11:if(a.t0=a.sent,a.t0){a.next=14;break}a.t0={data:[]};case 14:r=a.t0,n=r.data,i=void 0===n?[]:n,t.cablesList=i,t.isLoadingCables=!1;case 19:case"end":return a.stop()}}),a)})))()},handleFileConverted:function(e){return this.$emit("handle-file-converted",e)},sendData:function(){var e=this;return this.$refs["form"].validate((function(t){return!(!t||e.isOwnersSelectEmpty)&&e.$emit("send-data")}))}}},ge=he,be=Object(te["a"])(ge,ne,ie,!1,null,null,null),ve=be.exports,we=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb6 pt6 pr8 pl8"},[e.showTitle?a("header",{staticClass:"w-fit-full mb8",attrs:{slot:"header"},slot:"header"},[a("h1",{staticClass:"title capitalize"},[e._v(e._s(e.title))])]):e._e(),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules,id:"cablesForm"}},[a("el-form-item",{attrs:{label:"Name",prop:"name",required:""}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{autofocus:e.isManualKmzUpload,clearable:""},on:{input:e.checkName},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isNameRepeated?a("el-alert",{staticClass:"mt4 p2",attrs:{type:"error",closable:!1,description:"This name already exists in our database. Use a different name or\n        consider extending your name."}}):e._e()],1),a("el-form-item",{attrs:{label:"Status",prop:"category",required:""}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{filterable:"",placeholder:""},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.cableStates,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"System length",prop:"systemLength"}},[a("el-input-number",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{min:0,"controls-position":"right"},model:{value:e.form.systemLength,callback:function(t){e.$set(e.form,"systemLength",t)},expression:"form.systemLength"}})],1),"subsea"==e.creationID?a("el-form-item",{attrs:{label:"RFS (Ready for Service)",prop:"activationDateTime",required:""}},[a("el-date-picker",{staticClass:"w-fit-full-imp",class:{dark:e.dark},attrs:{type:"month"},model:{value:e.form.activationDateTime,callback:function(t){e.$set(e.form,"activationDateTime",t)},expression:"form.activationDateTime"}})],1):e._e(),a("el-form-item",{attrs:{label:"URL(s)",prop:"urls"}},[a("div",{staticClass:"w-fit-full relative inline-block"},[a("div",{staticClass:"flex row wrap"},e._l(e.form.urls,(function(t){return a("el-tag",{key:t,staticClass:"mr1 mb4 p2 no-overflow-x vertical-align",staticStyle:{"max-width":"16rem"},attrs:{closable:"",title:t,"disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[a("span",{staticClass:"inline-block h7 p0 no-overflow-x truncate",staticStyle:{"max-width":"12rem"}},[e._v(" "+e._s(t)+" ")])])})),1),e.inputVisible?[a("el-input",{ref:"saveTagInput",class:{dark:e.dark},attrs:{size:"mini"},on:{input:e.validateURL,blur:e.confirmTag},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.confirmTag(t)}},model:{value:e.tag,callback:function(t){e.tag=t},expression:"tag"}}),a("el-collapse-transition",[null===e.isURLValid||e.isURLValid?e._e():a("el-alert",{staticClass:"h6",attrs:{title:"This url is not valid","show-icon":"",type:"warning",effect:"dark",closable:!1}})],1),a("el-collapse-transition",[e.warnTagDuplicate?a("el-alert",{staticClass:"h6",attrs:{title:"This url is duplicated","show-icon":"",type:"info",effect:"dark",closable:!1}}):e._e()],1)]:a("el-button",{staticClass:"w42 text-center",class:{dark:e.dark},attrs:{size:"small"},on:{click:e.showInput}},[e._v(" Add url ")])],2)]),"subsea"==e.creationID?[a("el-form-item",{attrs:{label:"Fiber Pairs",prop:"fiberPairs"}},[a("el-input-number",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{min:0,"controls-position":"right"},model:{value:e.form.fiberPairs,callback:function(t){e.$set(e.form,"fiberPairs",t)},expression:"form.fiberPairs"}})],1),a("el-form-item",{attrs:{label:"Design Capacity (Tbps)",prop:"tbpsCapacity"}},[a("el-input-number",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{min:0,"controls-position":"right"},model:{value:e.form.capacityTBPS,callback:function(t){e.$set(e.form,"capacityTBPS",t)},expression:"form.capacityTBPS"}})],1),a("el-form-item",{attrs:{label:"Lit Capacity",prop:"litCapacity"}},[a("div",{staticClass:"inline-block"},[a("el-button",{staticClass:"inline-block",attrs:{size:"small"},on:{click:e.addLitCapacityField}},[e._v(" Add lit capacity ")])],1),a("div",{staticClass:"w-fit-full"},e._l(e.form.litCapacity,(function(t,r){return a("div",{key:r,staticClass:"relative mt4"},[a("div",{staticClass:"flex column justify-content-center pt4 pb1 pl4 pr4 el-card shadow--never"},[a("el-date-picker",{staticClass:"date-picker",staticStyle:{width:"100%"},attrs:{size:"small",type:"year",placeholder:""},model:{value:t.year,callback:function(a){e.$set(t,"year",a)},expression:"field.year"}}),a("el-input-number",{staticClass:"w-fit-full mt2",attrs:{size:"small",min:0,"controls-position":"right"},model:{value:t.cap,callback:function(a){e.$set(t,"cap",a)},expression:"field.cap"}}),a("el-button",{staticClass:"fs-small text-left mt4",attrs:{type:"text"},on:{click:function(t){return e.removeLitCapacityField(r)}}},[e._v(" Remove ")])],1)])})),0)])]:e._e(),a("el-form-item",{attrs:{label:e.facilitiesLabel,prop:"facilities"}},[a("v-multi-select",{attrs:{mode:e.mode,options:e.facsList,loading:e.isLoadingFacs,value:"create"==e.mode?[]:e.form.facilities},on:{input:e.loadFacsSearch,"values-change":function(t){e.form.facilities=t}}})],1),a("el-form-item",{attrs:{label:e.CLSLabel,prop:"cls",required:"subsea"==e.creationID}},[a("v-multi-select",{attrs:{mode:e.mode,"is-required":"subsea"==e.creationID,"is-field-empty":e.isCLSSelectEmpty,options:e.clsList,loading:e.isLoadingCLS,value:"create"==e.mode?[]:e.form.cls},on:{input:e.loadCLSSearch,"values-change":e.handleCLSSelectionChange,remove:function(t){return e.handleCLSSelectionChange(e.form.cls)}}})],1),a("el-form-item",{attrs:{label:"Owners",prop:"owners",required:""}},[a("v-multi-select",{ref:"ownersField",attrs:{mode:e.mode,"is-required":!0,"is-field-empty":e.isOwnersSelectEmpty,options:e.orgsList,loading:e.isLoadingOrgs,value:"create"==e.mode?[]:e.form.owners},on:{input:e.loadOrgsSearch,"values-change":e.handleOwnersSelectChange}})],1),"subsea"==e.creationID?[a("el-form-item",{attrs:{label:"Known Users",prop:"knownUsers"}},[a("v-multi-select",{ref:"knownUsersField",attrs:{mode:e.mode,options:e.knownUsers,loading:e.isLoadingKnownUsers,value:"create"==e.mode?[]:e.form.knownUsers},on:{input:e.loadKnownUsersSearch,"values-change":e.handleKnownUsersSelectChange}})],1)]:e._e(),a("el-form-item",{staticClass:"mt2",attrs:{label:"Tags",prop:"tags"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{multiple:"",filterable:"",placeholder:"","allow-create":"","collapse-tags":"","default-first-option":""},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.form.tagsList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),e.isManualKmzUpload?e._e():[a("el-form-item",[a("dragger",{on:{"handle-file-converted":e.handleFileConverted,"dragger-geojson-upload-failed":e.handleConvertionFailed}})],1),a("el-form-item",{staticClass:"mt12"},[a("el-button",{staticClass:"w-fit-full capitalize",attrs:{type:"primary",round:"",loading:e.isSendingData,disabled:e.isSendDataDisabled},on:{click:e.sendData}},[e._v(" "+e._s(e.saveBtn)+" ")])],1)]],2)],1)},ye=[];a("4160"),a("13d5"),a("a434"),a("159b");function ke(e){var t=/^(?:(?:https?|ftp):\/\/)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/\S*)?$/;return t.test(e)}var xe,Ce,Se=a("5c49"),_e="send-data",De="set-selection-onto-map",Oe=a("0060"),Le={name:"CableForm",components:{Dragger:se["default"],VMultiSelect:de["default"]},data:function(){return{tag:"",collapseItem:[],isOwnersSelectEmpty:!1,isCLSSelectEmpty:!1,currentYear:new Date,cableStates:u,facsList:[],tagsList:[],orgsList:[],knownUsers:[],clsList:[],isURLValid:null,isLoadingCLS:!1,inputVisible:!1,isLoadingFacs:!1,isLoadingOrgs:!1,isLoadingKnownUsers:!1,isNameRepeated:!1,warnTagDuplicate:!1}},props:{showTitle:{type:Boolean,default:function(){return!0}},isManualKmzUpload:{type:Boolean,default:function(){return!1}},form:{type:Object,required:!0},mode:{type:String,required:!0},isSendingData:{type:Boolean,default:function(){return!1}},isSendDataDisabled:{type:Boolean,required:!0}},computed:{CLSLabel:function(){return"subsea"==this.creationID?"CLS":"Connected CLS"},formRules:function(){var e=this.creationID;return{activationDateTime:[],litCapacity:[],name:[{required:!0,message:"Please input cable name",trigger:"change"},{type:"string",trigger:["change","blur"],message:"Please input a valid name",transform:function(e){return e.trim()},pattern:/^[\A-Za-zÀ-ÖØ-öø-ÿ&.,0-9()´‘'’ /\-]+$/},{min:3,message:"Length should be at least 3",trigger:"change"}],cc:[{type:"email",message:"Please input correct email address",trigger:["blur","change"]}],urls:[],tags:[],owners:[{type:"array",required:!0,message:"At least one owner is required",trigger:["blur","change"]}],knownUsers:[],cls:[{type:"array",required:"subsea"==e,message:"At least one cls is required",trigger:["blur","change"]}],category:[],fiberPairs:[],facilities:[],tbpsCapacity:[],systemLength:[]}},getSelectionID:function(){var e=this;return function(t){return e.form[t].map((function(e){return"string"==typeof e?e:e._id}))}},creationID:function(){return this.$route.query.id},facilitiesLabel:function(){return"subsea"==this.creationID?"Facilities (POPs)":"Facilities (On-net)"},title:function(){var e="".concat("subsea"==this.creationID?"subsea cable":"terrestrial network");return"create"==this.mode?"Create ".concat(e):"Edit ".concat(e)},saveBtn:function(){var e="".concat("subsea"==this.creationID?"subsea cable":"terrestrial network");return"create"==this.mode?"Create ".concat(e):"Save changes"},dark:function(){return this.$store.state.isDark}},mounted:function(){var e=this;"create"==this.mode&&setTimeout((function(){e.$refs.form&&e.$refs.form.clearValidate()}),50),"subsea"==this.creationID&&(this.formRules.activationDateTime=[{type:"date",required:!0,message:"Please pick a date",trigger:"change"}])},watch:{"form.facsList":function(e){this.facsList=Object(i["a"])(e),delete this.form.facsList},"form.ownersList":function(e){this.orgsList=Object(i["a"])(e),delete this.form.ownersList},"form.knownUsersList":function(e){this.knownUsers=Object(i["a"])(e),delete this.form.knownUsersList},"form.clsList":function(e){this.clsList=Object(i["a"])(e),this.handleSetFeatureOntoMap({selections:e.map((function(e){return e._id})),removeLoadState:!0}),delete this.form.clsList},"form.tags":function(e){this.getTagsList(e)}},methods:{checkName:Object(M["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isNameRepeated=!1,e.next=3,Object(pe["a"])({user_id:this.$auth.getUserID(),name:t});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={t:"error",data:{r:!1}};case 6:a=e.t0,r=a.t,n=a.data.r,this.isNameRepeated="error"!=r&&n>=1;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),320),handleSetFeatureOntoMap:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.selections,n=e.removeLoadState,a.next=3,t.handleGetClsGeom(r);case 3:return i=a.sent,a.abrupt("return",i?t.$emit("".concat(De),{t:"cls",fc:i,removeLoadState:n}):t.$store.dispatch("editor/toggleMapFormLoading",!1));case 5:case"end":return a.stop()}}),a)})))()},handleGetClsGeom:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=Oe["d"],a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,ids:a.t2},a.next=8,(0,a.t0)(a.t3);case 8:return r=a.sent,a.abrupt("return",r&&r.data&&r.data.r?r.data.r:Object(A["a"])());case 10:case"end":return a.stop()}}),a)})))()},handleConvertionFailed:function(){this.$emit("dragger-geojson-upload-failed")},removeLitCapacityField:function(e){this.form.litCapacity.splice(e,1),this.form.litCapacity.length<=0&&(this.collapseItem=[])},addLitCapacityField:function(){this.form.litCapacity.push({year:this.currentYear,cap:0}),this.collapseItem=[1]},handleCLSSelectionChange:function(e){this.form.cls=e,this.setCLSEmptyState(),this.handleSetFeatureOntoMap({selections:this.getSelectionID("cls"),removeLoadState:!0})},getTagsList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=ue,a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=8,(0,a.t0)(a.t3);case 8:r=a.sent,r&&r.data&&(t.form.tagsList=r.data);case 10:case"end":return a.stop()}}),a)})))()},handleFileConverted:function(e){this.$emit("handle-file-converted",e)},handleOwnersSelectChange:function(e){this.form.owners=e,"subsea"==this.creationID&&this.handleOwnersKnownUsersDynamic(this.form.knownUsers,e,"owner","known users","owners"),this.setOwnersEmptyState()},handleOwnersKnownUsersDynamic:function(e,t,a,r,n){var i=this,s=t.map((function(e){return e._id})),o=[];e.forEach((function(e){var t=s.indexOf(e._id);t>-1&&s[t]==e._id&&(o.push(e._id),i.$message.error({duration:8e3,dangerouslyUseHTMLString:!0,message:"This ".concat(a,': <strong class="capitalize">').concat(e.name,"</strong> can't be included because is already included on the ").concat(r," list")}))}));for(var l=function(){var e=u[c];i.form[n]=i.form[n].filter((function(t){return t._id!=e}))},c=0,u=o;c<u.length;c++)l()},handleKnownUsersSelectChange:function(e){this.form.knownUsers=e,"subsea"==this.creationID&&this.handleOwnersKnownUsersDynamic(this.form.owners,e,"known user","owners","knownUsers")},setOwnersEmptyState:function(){this.isOwnersSelectEmpty=this.form.owners.length<=0},setCLSEmptyState:function(){this.isCLSSelectEmpty=this.form.cls.length<=0},sendData:function(){var e=this;return this.setOwnersEmptyState(),this.setCLSEmptyState(),this.$refs.form.validate((function(t){return!(!t||e.isOwnersSelectEmpty)&&e.$emit("send-data")}))},loadFacsSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.length<=0)){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingFacs=!0,a.t0=Se["f"],a.next=6,t.$auth.getUserID();case 6:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=11,(0,a.t0)(a.t3);case 11:r=a.sent,r&&r.data&&(t.facsList=r.data.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Array.from(t.facsList),a=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return e._id})).includes(a._id)?e:[].concat(Object(i["a"])(e),[a])}),[])),t.isLoadingFacs=!1;case 14:case"end":return a.stop()}}),a)})))()},loadKnownUsersSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t.isLoadingKnownUsers=!0,a.next=3,t.loadOrgsSearch(e,!0);case 3:if(a.t0=a.sent,a.t0){a.next=6;break}a.t0=[];case 6:t.knownUsers=a.t0,t.isLoadingKnownUsers=!1;case 8:case"end":return a.stop()}}),a)})))()},loadOrgsSearch:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(!(e.length<=0)){r.next=2;break}return r.abrupt("return");case 2:return t||(a.isLoadingOrgs=!0),r.t0=fe["m"],r.next=6,a.$auth.getUserID();case 6:return r.t1=r.sent,r.t2=e,r.t3={user_id:r.t1,s:r.t2},r.next=11,(0,r.t0)(r.t3);case 11:if(n=r.sent,!n||!n.data){r.next=19;break}if(s=n.data.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Array.from(a.orgsList),t=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return e._id})).includes(t._id)?e:[].concat(Object(i["a"])(e),[t])}),[]),t){r.next=18;break}a.orgsList=s,r.next=19;break;case 18:return r.abrupt("return",s);case 19:a.isLoadingOrgs=!1;case 20:case"end":return r.stop()}}),r)})))()},loadCLSSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!(e.length<=0)){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingOrgs=!0,a.t0=Oe["e"],a.next=6,t.$auth.getUserID();case 6:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=11,(0,a.t0)(a.t3);case 11:r=a.sent,r&&r.data&&(t.clsList=r.data.reduce((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Array.from(t.clsList),a=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return e._id})).includes(a._id)?e:[].concat(Object(i["a"])(e),[a])}),[])),t.isLoadingOrgs=!1;case 14:case"end":return a.stop()}}),a)})))()},validateURL:function(e){this.isURLValid=ke(e),this.form.urls.includes(e)?this.warnTagDuplicate=!0:this.warnTagDuplicate=!1},handleClose:function(e){this.form.urls.splice(this.form.urls.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0;try{this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))}catch(t){}},confirmTag:function(){var e=this.form.urls.includes(this.tag);!e&&this.isURLValid&&(this.tag&&this.form.urls.push(this.tag),this.inputVisible=!1,this.isURLValid=null,this.tag="")}}},Re=Le,je=Object(te["a"])(Re,we,ye,!1,null,null,null),$e=je.exports,Te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb6 pt6 pr8 pl8"},[a("header",{staticClass:"w-fit-full mb8",attrs:{slot:"header"},slot:"header"},[a("h1",{staticClass:"title capitalize"},[e._v(e._s(e.title)+" Facility")])]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"Name",prop:"name"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{clearable:"",disabled:e.isViewMode},on:{input:e.checkName},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isNameRepeated?a("el-alert",{staticClass:"mt4 p2",attrs:{type:"error",closable:!1,description:"This name already exists in our database. Use a different name or\n        consider extending your name."}}):e._e()],1),a("el-form-item",{staticClass:"mt2",attrs:{label:"Address"}},[a("div",{staticClass:"flex row wrap w-fit-full"},e._l(e.form.address,(function(t,r){return a("el-tag",{key:r,attrs:{closable:!e.isViewMode,"disable-transitions":!1},on:{close:function(a){return e.handleAddressRemove(t)}}},[e._v(" "+e._s(t.reference)+" "),a("fa",{staticClass:"cursor-pointer w24 ml1 inline-block",attrs:{icon:["fas","pen"]},on:{click:function(a){return e.editAddress(t,r)}}})],1)})),1),a("br"),a("el-collapse-transition",[e.inputVisible?a("el-card",{staticClass:"p4 w-auto mt4",attrs:{shadow:"never"}},[a("el-form",{ref:"tagForm",attrs:{model:e.tag,rules:e.tagRules}},[a("el-form-item",{attrs:{label:"Reference",prop:"reference",required:""}},[a("el-input",{ref:"saveTagInput",class:{dark:e.dark},attrs:{name:"street",size:"mini"},model:{value:e.tag.reference,callback:function(t){e.$set(e.tag,"reference",t)},expression:"tag.reference"}})],1),a("el-form-item",{attrs:{prop:"address",label:"Address"}},[a("autocomplete-google",{attrs:{mode:e.tagMode,value:e.autocompleteAddress},on:{"place-changed":e.handleAddressChange}})],1)],1),a("el-form-item",[a("div",{staticClass:"flex row wrap justify-content-end justify-center-sm pt3"},[a("el-button",{staticClass:"w25 h8 mb4 mr2",class:{dark:e.dark},attrs:{plain:"",type:"success",size:"mini"},on:{click:e.handleSaveAddress}},[e._v(" Save address ")]),a("el-button",{staticClass:"w25 h8",class:{dark:e.dark},attrs:{size:"mini"},on:{click:e.clearAddress}},[e._v(" Cancel ")])],1)])],1):a("el-button",{staticClass:"w42 text-center",class:{dark:e.dark},attrs:{size:"small",disabled:e.isViewMode},on:{click:e.showAdressInput}},[e._v(" Add ")])],1)],1),a("el-form-item",{attrs:{label:"Website"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{disabled:e.isViewMode},on:{input:e.validateURL},model:{value:e.form.website,callback:function(t){e.$set(e.form,"website",t)},expression:"form.website"}}),a("el-collapse-transition",[null===e.isURLValid||e.isURLValid?e._e():a("el-alert",{staticClass:"mt2 p1",attrs:{title:"This url is not valid",type:"error",closable:!1}})],1)],1),a("el-form-item",{attrs:{label:"IXPs"}},[a("v-multi-select",{attrs:{mode:e.mode,options:e.ixpsList,loading:e.isLoadingIXPs,value:"create"==e.mode?[]:e.form.ixps},on:{input:e.loadIXpsSearch,"values-change":e.handleIxpsSelectChange,remove:e.handleIxpsSelectRemoveItem}})],1),a("el-form-item",{attrs:{label:"Owners",prop:"owners",required:""}},[a("v-multi-select",{attrs:{mode:e.mode,"is-required":!0,"is-field-empty":e.isOwnersSelectEmpty,options:e.ownersList,loading:e.isLoadingOwners,value:"create"==e.mode?[]:e.form.owners},on:{input:e.loadOwnersSearch,"values-change":e.handleOwnersSelectChange,remove:e.handleOwnersSelectRemoveItem}})],1),a("el-form-item",{attrs:{label:"Type"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{disabled:e.isViewMode,placeholder:""},model:{value:e.form.t,callback:function(t){e.$set(e.form,"t",t)},expression:"form.t"}},e._l(e.facilitiesTypes,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"Ready For Service (RFS)",prop:"StartDate",required:""}},[a("el-date-picker",{staticClass:"inline-block w-fit-full-imp",class:{dark:e.dark},attrs:{type:"year",disabled:e.isViewMode,placeholder:""},model:{value:e.form.StartDate,callback:function(t){e.$set(e.form,"StartDate",t)},expression:"form.StartDate"}})],1),a("el-form-item",{attrs:{label:"Type of building"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{disabled:e.isViewMode,placeholder:""},model:{value:e.form.building,callback:function(t){e.$set(e.form,"building",t)},expression:"form.building"}},e._l(e.facilitiesBuildingTypes,(function(t,r){return a("el-option",{key:r,attrs:{value:t.value}},[a("span",{staticClass:"capitalize"},[e._v(" "+e._s(t.label)+" ")])])})),1)],1),a("el-form-item",{staticClass:"mt2",attrs:{label:"Tags"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{multiple:"",filterable:"",disabled:e.isViewMode,placeholder:"","allow-create":"","collapse-tags":"","default-first-option":""},on:{change:e.getTagsList},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.form.tagsList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e.isViewMode?e._e():a("el-form-item",{staticClass:"mt12"},[a("el-button",{staticClass:"w-fit-full capitalize",attrs:{type:"primary",round:"",disabled:e.isSendDataDisabled,loading:e.isSendingData},on:{click:e.sendData}},[e._v(" "+e._s(e.title)+" Facility ")])],1)],1)],1)},Ie=[],Ae=[{label:"Data center",value:"data_center"},{label:"Without selection",value:""}],Ee=[{label:"Building",value:"building"},{label:"warehouse",value:"warehouse"},{label:"university",value:"university"},{label:"tower",value:"tower"},{label:"service",value:"service"},{label:"school",value:"school"},{label:"roof",value:"roof"},{label:"retail",value:"retail"},{label:"restaurant",value:"restaurant"},{label:"public",value:"public"},{label:"office",value:"office"},{label:"data center",value:"data_center"},{label:"commercial",value:"commercial"},{label:"apartments",value:"apartments"},{label:"industrial",value:"industrial"}],Fe=a("fc4a"),Me=a("92bd"),Pe={name:"FacsForm",components:{AutocompleteGoogle:Fe["default"],VMultiSelect:de["default"]},data:function(){return{tag:{fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""},isNameRepeated:!1,isOwnersSelectEmpty:!1,tagOnEdit:null,facilitiesTypes:Ae,facilitiesBuildingTypes:Ee,isURLValid:null,inputVisible:!1,tagsList:[],addressList:[],isLoadingIXPs:!1,isLoadingOwners:!1,ixpsList:[],ownersList:[]}},props:{form:{type:Object,required:!0},mode:{type:String,required:!0},isSendingData:{type:Boolean,default:function(){return!1}},isSendDataDisabled:{type:Boolean,required:!0}},computed:{tagRules:function(){return{reference:[{required:!0,message:"Please input a reference name",trigger:["blur","change"]},{min:2,message:"Length should be at least 2",trigger:["blur","change"]}],address:[]}},formRules:function(){return{name:[{required:!0,message:"Please input facility name",trigger:"change"},{min:3,message:"Length should be at least 3",trigger:"change"}],StartDate:[{type:"date",required:!0,trigger:["blur","change"],message:"Please pick a date"}],owners:[{type:"array",message:"At least one owner is required",trigger:["blur","change"]}]}},title:function(){return"create"==this.mode?"Create":"view"==this.mode?"View":"Edit"},isViewMode:function(){return"view"==this.mode},dark:function(){return this.$store.state.isDark},autocompleteAddress:function(){return this.tag?this.tag.fullAddress:""},tagMode:function(){return null!==this.tagOnEdit&&this.tag?"edit":"create"}},watch:{"form.ixpsList":function(e){e&&(this.ixpsList=Object(i["a"])(e),delete this.form.ixpsList)},"form.ownersList":function(e){e&&(this.ownersList=Object(i["a"])(e),delete this.form.ownersList)}},mounted:function(){var e=this;"create"==this.mode&&setTimeout((function(){e.$refs.form&&e.$refs.form.clearValidate()}),50)},methods:{checkName:Object(M["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isNameRepeated=!1,e.next=3,Object(pe["c"])({user_id:this.$auth.getUserID(),name:t});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={t:"error",data:{r:!1}};case 6:a=e.t0,r=a.t,n=a.data.r,this.isNameRepeated="error"!=r&&n>=1;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),320),handleOwnersSelectChange:function(e){this.form.owners=e,this.setOwnersEmptyState()},setOwnersEmptyState:function(){this.form.owners.length<=0&&(this.isOwnersSelectEmpty=!0)},sendData:function(){var e=this;return this.setOwnersEmptyState(),this.$refs["form"].validate((function(t){return!!t&&e.$emit("send-data")}))},loadIXpsSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!=e){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingIXPs=!0,a.t0=Me["e"],a.next=6,t.$auth.getUserID();case 6:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=11,(0,a.t0)(a.t3);case 11:r=a.sent,r&&r.data&&(t.ixpsList=r.data),t.isLoadingIXPs=!1;case 14:case"end":return a.stop()}}),a)})))()},loadOwnersSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!=e){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingOwners=!0,a.t1=fe["m"],a.next=6,t.$auth.getUserID();case 6:return a.t2=a.sent,a.t3=e,a.t4={user_id:a.t2,s:a.t3},a.next=11,(0,a.t1)(a.t4);case 11:if(a.t0=a.sent,a.t0){a.next=14;break}a.t0={owners:[]};case 14:r=a.t0,n=r.data,i=void 0===n?[]:n,t.ownersList=i,t.isLoadingOwners=!1;case 19:case"end":return a.stop()}}),a)})))()},handleOwnersSelectRemoveItem:function(e){this.form.owners=this.form.owners.filter((function(t){return t._id!=e}))},handleIxpsSelectChange:function(e){this.form.ixps=Array.from(e)},handleIxpsSelectRemoveItem:function(e){this.form.ixps=this.form.ixps.filter((function(t){return t._id!=e}))},getTagsList:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=ue,a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=8,(0,a.t0)(a.t3);case 8:r=a.sent,r&&r.data&&(t.form.tagsList=r.data);case 10:case"end":return a.stop()}}),a)})))()},handleAddressRemove:function(e){this.form.address.splice(this.form.address.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0;try{this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))}catch(t){console.error(t)}},validateURL:function(e){this.isURLValid=ke(e)},clearAddress:function(){this.isTagReferenceMissing=!1,this.inputVisible=!1,this.tagOnEdit=null,this.tag={fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""}},editAddress:function(e,t){this.tag=Object(s["a"])({},e),this.tagOnEdit=t,this.inputVisible=!0},handleAddressChange:function(e){var t,a={street_number:"short_name",route:"long_name",locality:"long_name",country:"long_name",postal_code:"short_name"};this.tag.fullAddress=e.fullAddress;for(var r=0;r<e.address_components.length;r++)if(t=e.address_components[r].types[0],a[t]){var n=e.address_components[r][a[t]];switch(t){case"country":this.tag.country=n;break;case"postal_code":this.tag.zipcode=n;break;case"locality":this.tag.city=n;break;case"route":this.tag.street=n;break;case"administrative_area_level_1":this.tag.state=n;break}}},handleSaveAddress:function(){var e=this;return this.$refs["tagForm"].validate((function(t){t&&(null===e.tagOnEdit?e.form.address.push(Object(s["a"])({},e.tag)):e.form.address[e.tagOnEdit]=Object(s["a"])({},e.tag),e.clearAddress())}))},showAdressInput:function(){var e=this;this.inputVisible=!0;try{this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))}catch(t){}}}},Ue=Pe,ze=Object(te["a"])(Ue,Te,Ie,!1,null,null,null),Ne=ze.exports,Be=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb6 pt6 pr8 pl8"},[a("header",{staticClass:"w-fit-full mb8",attrs:{slot:"header"},slot:"header"},[a("h1",{staticClass:"title capitalize"},[e._v(e._s(e.title)+" IXP")])]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.formRules}},[a("el-form-item",{attrs:{label:"Name",prop:"name"}},[a("el-input",{staticClass:"w-fit-full",attrs:{disabled:e.isViewMode,clearable:""},on:{input:e.checkName},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e.isNameRepeated?a("el-alert",{staticClass:"mt4 p2",attrs:{type:"error",closable:!1,description:"This name already exists in our database. Use a different name or\n        consider extending your name."}}):e._e()],1),a("el-form-item",{attrs:{label:"Owners",prop:"owners",required:""}},[a("v-multi-select",{attrs:{mode:e.mode,"is-required":!0,"is-field-empty":e.isOwnersSelectEmpty,options:e.ownersList,loading:e.isLoadingOwners,value:"create"===e.mode?[]:e.form.owners},on:{input:e.loadOwnersSearch,"values-change":e.handleOwnersSelectChange,remove:e.handleOwnersSelectRemoveItem}})],1),a("el-form-item",{attrs:{label:"Long name",prop:"nameLong"}},[a("el-input",{staticClass:"w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.nameLong,callback:function(t){e.$set(e.form,"nameLong",t)},expression:"form.nameLong"}})],1),a("el-form-item",{attrs:{label:"Media",prop:"media"}},[a("el-select",{staticClass:"w-fit-full",attrs:{placeholder:""},model:{value:e.form.media,callback:function(t){e.$set(e.form,"media",t)},expression:"form.media"}},e._l(e.mediaOptions,(function(e,t){return a("el-option",{key:t,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"Policy Email",prop:"policyEmail"}},[a("el-input",{staticClass:"w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.policyEmail,callback:function(t){e.$set(e.form,"policyEmail",t)},expression:"form.policyEmail"}})],1),a("el-form-item",{attrs:{label:"Policy Phone",prop:"policyPhone"}},[a("el-input",{staticClass:"w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.policyPhone,callback:function(t){e.$set(e.form,"policyPhone",t)},expression:"form.policyPhone"}})],1),a("el-form-item",{attrs:{label:"Tech Email",prop:"techEmail"}},[a("el-input",{staticClass:"w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.techEmail,callback:function(t){e.$set(e.form,"techEmail",t)},expression:"form.techEmail"}})],1),a("el-form-item",{attrs:{label:"Tech Phone",prop:"techPhone"}},[a("el-input",{staticClass:"w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.techPhone,callback:function(t){e.$set(e.form,"techPhone",t)},expression:"form.techPhone"}})],1),a("el-form-item",{attrs:{label:"Proto ivp6",prop:"proto_ipv6"}},[a("el-radio-group",{staticClass:"flex row justify-content-start w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.proto_ipv6,callback:function(t){e.$set(e.form,"proto_ipv6",t)},expression:"form.proto_ipv6"}},[a("el-radio-button",{attrs:{label:!0}},[e._v("Yes")]),a("el-radio-button",{attrs:{label:!1}},[e._v("No")])],1)],1),a("el-form-item",{attrs:{label:"Proto multicast",prop:"proto_multicast"}},[a("el-radio-group",{staticClass:"flex row justify-content-start w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.proto_multicast,callback:function(t){e.$set(e.form,"proto_multicast",t)},expression:"form.proto_multicast"}},[a("el-radio-button",{attrs:{label:!0}},[e._v("Yes")]),a("el-radio-button",{attrs:{label:!1}},[e._v("No")])],1)],1),a("el-form-item",{attrs:{label:"Proto unicast",prop:"proto_unicast"}},[a("el-radio-group",{staticClass:"flex row justify-content-start w-fit-full",attrs:{disabled:e.isViewMode},model:{value:e.form.proto_unicast,callback:function(t){e.$set(e.form,"proto_unicast",t)},expression:"form.proto_unicast"}},[a("el-radio-button",{attrs:{label:!0}},[e._v("Yes")]),a("el-radio-button",{attrs:{label:!1}},[e._v("No")])],1)],1),a("el-form-item",{staticClass:"mt2",attrs:{label:"Tags",prop:"tags"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{disabled:e.isViewMode,multiple:"",filterable:"",placeholder:"","allow-create":"","default-first-option":""},model:{value:e.form.tags,callback:function(t){e.$set(e.form,"tags",t)},expression:"form.tags"}},e._l(e.form.tagsList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),e.isViewMode?e._e():a("el-form-item",{staticClass:"mt16"},[a("el-button",{staticClass:"w-fit-full capitalize",attrs:{type:"primary",round:"",disabled:e.isSendDataDisabled,loading:e.isSendingData},on:{click:e.sendData}},[e._v(" "+e._s(e.title)+" IXP ")])],1)],1)],1)},Ve=[],qe={name:"FacsForm",components:{VMultiSelect:de["default"]},data:function(){return{tag:"",inputVisible:!1,tagsList:[],isNameRepeated:!1,isOwnersSelectEmpty:!1,isLoadingOwners:!1,ownersList:[]}},props:{form:{type:Object,required:!0},mode:{type:String,required:!0},isSendingData:{type:Boolean,default:function(){return!1}},isSendDataDisabled:{type:Boolean,required:!0}},computed:{mediaOptions:function(){return[{label:"Ethernet",value:"ethernet"},{label:"Multiple",value:"multiple"}]},title:function(){return"create"==this.mode?"Create":"view"==this.mode?"View":"Edit"},formRules:function(){return{name:[{required:!0,message:"Please input short IXP name",trigger:"change"},{min:1,message:"Length should be at least 1",trigger:"change"}],media:[],nameLong:[{required:!0,message:"Please input long IXP name",trigger:"change"},{min:3,message:"Length should be at least 3",trigger:"change"}],techEmail:[{type:"email",message:"Please input correct email address",trigger:["blur","change"]}],policyEmail:[{type:"email",message:"Please input correct email address",trigger:["blur","change"]}],proto_ipv6:[],proto_unicast:[],proto_multicast:[],techPhone:[],policyPhone:[],tags:[],owners:[{type:"array",message:"At least one owner is required",trigger:["blur","change"]}]}},isViewMode:function(){return"view"==this.mode},dark:function(){return this.$store.state.isDark}},watch:{"form.ownersList":function(e){e&&(this.ownersList=Object(i["a"])(e),delete this.form.ownersList)}},mounted:function(){var e=this;"create"==this.mode&&setTimeout((function(){e.$refs.form&&e.$refs.form.clearValidate()}),50)},methods:{checkName:Object(M["a"])(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.isNameRepeated=!1,e.next=3,Object(pe["d"])({user_id:this.$auth.getUserID(),name:t});case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0={t:"error",data:{r:!1}};case 6:a=e.t0,r=a.t,n=a.data.r,this.isNameRepeated="error"!=r&&n>=1;case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),320),loadOwnersSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return t.isLoadingOwners=!0,a.t1=fe["m"],a.next=6,t.$auth.getUserID();case 6:return a.t2=a.sent,a.t3=e,a.t4={user_id:a.t2,s:a.t3},a.next=11,(0,a.t1)(a.t4);case 11:if(a.t0=a.sent,a.t0){a.next=14;break}a.t0={owners:[]};case 14:r=a.t0,n=r.data,i=void 0===n?[]:n,t.ownersList=i,t.isLoadingOwners=!1;case 19:case"end":return a.stop()}}),a)})))()},handleOwnersSelectRemoveItem:function(e){this.form.owners=this.form.owners.filter((function(t){return t._id!=e}))},handleOwnersSelectChange:function(e){this.form.owners=e,this.setOwnersEmptyState()},setOwnersEmptyState:function(){this.form.owners.length<=0&&(this.isOwnersSelectEmpty=!0)},sendData:function(){var e=this;return this.setOwnersEmptyState(),this.$refs["form"].validate((function(t){return!!t&&e.$emit("send-data")}))}}},Ge=qe,Ke=Object(te["a"])(Ge,Be,Ve,!1,null,null,null),We=Ke.exports,Je=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pb6 pt6 pr8 pl8",attrs:{id:"mapFormWrapper"}},[a("header",{staticClass:"w-fit-full mb8",attrs:{slot:"header"},slot:"header"},[a("h1",{staticClass:"title capitalize"},[e._v(e._s(e.title)+" map")])]),a("el-form",{ref:"form",attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"Subdomain"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{placeholder:"subdomain name"},on:{input:e.handleRestrictedNames},model:{value:e.form.subdomain,callback:function(t){e.$set(e.form,"subdomain",t)},expression:"form.subdomain"}},[a("template",{slot:"append"},[e._v(" .infrapedia.com ")])],2)],1),[a("el-form-item",{attrs:{label:"Logo(s)"}},[a("br"),a("div",{staticClass:"block flex flex-start"},[a("el-upload",{ref:"upload",attrs:{multiple:!1,accept:"image/*.jpg",action:e.uploadURL,"auto-upload":!1,"file-list":e.fileList,"list-type":"picture-card","on-remove":e.handleFileListRemove,"on-change":e.handleFileListChange,"http-request":e.handleUserLogoUpload}},[a("i",{staticClass:"el-icon-plus"})])],1)]),a("el-collapse-transition",[a("el-alert",{directives:[{name:"show",rawName:"v-show",value:e.uploadLogo.show,expression:"uploadLogo.show"}],attrs:{closable:!1,type:e.uploadLogo.type,title:e.uploadLogo.text}})],1)],a("el-form-item",{attrs:{label:"Google Analytics ID"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},model:{value:e.form.googleID,callback:function(t){e.$set(e.form,"googleID",t)},expression:"form.googleID"}})],1),a("el-form-item",{staticClass:"mt2",attrs:{label:"Address"}},[e._l(e.form.address,(function(t,r){return a("el-tag",{key:r,attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return e.handleClose(t)}}},[e._v(" "+e._s(t.reference)+" "),a("fa",{staticClass:"cursor-pointer w24 ml1 inline-block",attrs:{icon:["fas","pen"]},on:{click:function(a){return e.editAddress(t,r)}}})],1)})),a("br"),a("el-collapse-transition",[e.inputVisible?a("el-card",{staticClass:"p4 w-auto mt4",attrs:{shadow:"never"}},[a("el-form",{ref:"tagForm",attrs:{model:e.tag,rules:e.tagRules}},[a("el-form-item",{attrs:{label:"Reference",prop:"reference",required:""}},[a("el-input",{ref:"saveTagInput",class:{dark:e.dark},attrs:{name:"street",size:"mini"},model:{value:e.tag.reference,callback:function(t){e.$set(e.tag,"reference",t)},expression:"tag.reference"}})],1),a("el-form-item",{attrs:{prop:"address",label:"Address"}},[a("autocomplete-google",{attrs:{mode:e.tagMode,value:e.autocompleteAddress},on:{"place-changed":e.handleAddressChange}})],1)],1),a("el-form-item",[a("div",{staticClass:"flex row wrap justify-content-end justify-center-sm pt3"},[a("el-button",{staticClass:"w25 h8 mb4 mr2",class:{dark:e.dark},attrs:{plain:"",type:"success",size:"mini"},on:{click:e.handleSaveAddress}},[e._v(" Save address ")]),a("el-button",{staticClass:"w25 h8",class:{dark:e.dark},attrs:{size:"mini"},on:{click:e.clearAddress}},[e._v(" Cancel ")])],1)])],1):a("el-button",{staticClass:"w42 text-center",class:{dark:e.dark},attrs:{size:"small"},on:{click:e.showInput}},[e._v(" Add ")])],1)],2),a("el-form-item",{attrs:{label:"Technical Email Contact"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},model:{value:e.form.techEmail,callback:function(t){e.$set(e.form,"techEmail",t)},expression:"form.techEmail"}})],1),a("el-form-item",{attrs:{label:"Technical Phone Contact"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},model:{value:e.form.techPhone,callback:function(t){e.$set(e.form,"techPhone",t)},expression:"form.techPhone"}})],1),a("el-form-item",{attrs:{label:"Sale Email Contact"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},model:{value:e.form.saleEmail,callback:function(t){e.$set(e.form,"saleEmail",t)},expression:"form.saleEmail"}})],1),a("el-form-item",{attrs:{label:"Sale Phone Contact"}},[a("el-input",{staticClass:"w-fit-full",class:{dark:e.dark},model:{value:e.form.salePhone,callback:function(t){e.$set(e.form,"salePhone",t)},expression:"form.salePhone"}})],1),a("el-divider",{class:{dark:e.dark}}),a("categories-field",{staticClass:"mb24"}),a("el-form-item",{staticClass:"mt12"},[a("el-button",{staticClass:"w-fit-full capitalize",attrs:{type:"primary",round:"",loading:e.isSendingData,disabled:e.checkGeomLength},on:{click:e.sendData}},[e._v(" "+e._s(e.saveBtn)+" ")])],1)],2)],1)},He=[],Ze=a("3d24"),Xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper"},[a("div",{staticClass:"el-form-item",class:{dark:e.dark}},[a("header",{staticClass:"flex row nowrap justify-content-space-between align-items-center"},[a("span",{staticClass:"el-form-item_label fs-regular no-selectable"},[e._v(" Categories ")]),e.isInputVisible?e._e():a("el-button",{staticClass:"w14 h8",class:{dark:e.dark},attrs:{round:"",size:"small"},on:{click:e.handleBeforeCreateCategory}},[e._v(" Add ")])],1),a("el-collapse-transition",[e.isInputVisible?a("div",{staticClass:"mt4"},[a("header",{staticClass:"flex align-items-center justify-content-space-between nowrap text-left mb2 ml1"},[a("span",{staticClass:"capitalize fs-small"},[e._v(" "+e._s("create"==e.mode?"Add":"Edit")+" category settings ")]),a("el-button",{staticClass:"w14 h4 vertical-align",attrs:{round:"",type:"text"},on:{click:function(t){return e.toggleInput(!1)}}},[e._v(" Cancel ")])],1),a("el-card",{staticClass:"p4",class:{dark:e.dark},attrs:{shadow:"never"}},[a("el-row",{attrs:{gutter:20}},[a("transition",{attrs:{name:"fade",mode:"out-in",tag:"div"}},[1==e.step?a("div",[a("el-col",{attrs:{lg:20}},[a("el-form-item",{staticClass:"capitalize",attrs:{label:"category name",size:"mini"}},[a("el-input",{ref:"categoryNameInput",class:{dark:e.dark},attrs:{size:"small"},model:{value:e.field.name,callback:function(t){e.$set(e.field,"name",t)},expression:"field.name"}})],1)],1),a("el-col",{attrs:{span:4}},[a("el-form-item",{staticClass:"capitalize",attrs:{label:"color",size:"mini"}},[a("el-color-picker",{class:{dark:e.dark},attrs:{size:"small",predefine:e.predefineColors},model:{value:e.field.color,callback:function(t){e.$set(e.field,"color",t)},expression:"field.color"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{staticClass:"capitalize",attrs:{label:"opacity",size:"small"}},[a("el-input-number",{staticClass:"w14",class:{dark:e.dark},attrs:{controls:!1,size:"small",min:.1,max:1},model:{value:e.field["stroke-width"],callback:function(t){e.$set(e.field,"stroke-width",t)},expression:"field['stroke-width']"}})],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{staticClass:"capitalize flex column nowrap align-items-start",attrs:{label:"stroke style",size:"small"}},[a("el-radio-group",{class:{dark:e.dark},attrs:{size:"small"},model:{value:e.field["stroke-style"],callback:function(t){e.$set(e.field,"stroke-style",t)},expression:"field['stroke-style']"}},[a("el-radio-button",{staticClass:"capitalize",attrs:{label:"normal"}}),a("el-radio-button",{staticClass:"capitalize",attrs:{label:"dashed"}})],1)],1)],1)],1):e._e()]),a("transition",{attrs:{name:"fade",mode:"out-in",tag:"div"}},[2==e.step?a("div",[a("el-col",{attrs:{span:24}},[a("el-form-item",{staticClass:"capitalize",attrs:{label:"Types",size:"small"}},[a("el-select",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{"collapse-tags":"",placeholder:"",multiple:"",size:"small",clearable:"",filter:""},model:{value:e.field.types,callback:function(t){e.$set(e.field,"types",t)},expression:"field.types"}},e._l(e.typesAvailable,(function(e){return a("el-option",{key:e,staticClass:"capitalize",attrs:{label:e,value:e}})})),1)],1)],1)],1):e._e()])],1),a("footer",{staticClass:"flo-right mt6"},[a("el-button",{staticClass:"capitalize mr2",class:{dark:e.dark},attrs:{disabled:2!=e.step,size:"mini",round:"",plain:e.dark},on:{click:e.back}},[e._v(" back ")]),a("el-button",{staticClass:"capitalize",class:{dark:e.dark},attrs:{type:"primary",size:"mini",round:""},on:{click:e.determineFunc}},[e._v(" "+e._s(1==e.step?"next":"save")+" ")])],1)],1)],1):e._e()])],1),[e.isCategoriesEmpty?a("div",{staticClass:"el-card empty-text text-center p8 no-border",class:{dark:e.dark}},[a("span",{staticClass:"fs-small"},[e._v(" Categories will be shown here once you add them. ")])]):a("div",e._l(e.dictionary.getRaw(),(function(t,r){return a("div",{key:r,staticClass:"el-card round pt2 pb2 pr4 pl4 mb2"},[a("div",{staticClass:"flex nowrap justify-content-space-between align-items-center category-box_inner-wrapper"},[a("div",{staticClass:"flex nowrap align-items-center category_name"},[a("div",{staticClass:"w6 h6 circle inline-block",style:{backgroundColor:t.color}}),a("span",{staticClass:"text-left capitalize ml2 font-medium fs-small"},[e._v(" "+e._s(t.name)+" ")])]),a("div",{staticClass:"buttons-wrapper"},[a("el-button",{class:{dark:e.dark},attrs:{icon:"el-icon-view",circle:"",size:"mini",title:"View",type:e.isViewing(t.name)?"primary":""},on:{click:function(a){return e.determineView(t.name)}}}),a("el-button",{class:{dark:e.dark},attrs:{icon:"el-icon-set-up",circle:"",size:"mini",title:"Edit items"},on:{click:function(a){return e.editCategoryTypesSelections(t,!1)}}}),a("el-button",{class:{dark:e.dark},attrs:{icon:"el-icon-edit-outline",circle:"",size:"mini",title:"Edit"},on:{click:function(a){return e.setEditMode(t,!0)}}}),a("el-button",{class:{dark:e.dark},attrs:{icon:"el-icon-delete",circle:"",size:"mini",title:"Delete"},on:{click:function(t){return e.removeCategory(r)}}})],1)]),a("el-collapse-transition",[e.isViewing(t.name)?a("div",{staticClass:"details-wrapper"},[a("el-divider",{staticClass:"mt2 mb4",class:{dark:e.dark}}),a("div",{staticClass:"fs-small block text-left pr4 pl4 mb2"},[a("strong",[e._v("id: ")]),e._v(" "+e._s(t._id)+" ")]),a("div",{staticClass:"flex nowrap justify-content-space-between mb4 pr4 pl4"},[a("div",{staticClass:"fs-small"},[a("strong",[e._v("Stroke style: ")]),e._v(" "+e._s(t["stroke-style"])+" ")]),a("div",{staticClass:" inline-block fs-small"},[a("strong",[e._v(" Opacity: ")]),e._v(" "+e._s(t["stroke-opacity"])+" ")])]),a("div",{staticClass:"flex row wrap flex-start pl4 pr4 pb4 tags-wrapper"},e._l(t.types,(function(t){return a("el-tag",{key:t,attrs:{size:"mini"}},[e._v(" "+e._s(t)+" ")])})),1)],1):e._e()])],1)})),0)],a("el-dialog",{attrs:{top:"28vh",id:"elementsDialog",visible:e.typesDialog.visible,"close-on-click-modal":!1,"custom-class":e.customDialogClass,"before-close":function(){return e.$emit("cancel-types-selection")}},on:{"update:visible":function(t){return e.$set(e.typesDialog,"visible",t)},opened:e.handleScrollToView}},[a("header",{attrs:{slot:"title"},slot:"title"},[a("h2",{staticClass:"title-user-variant  fs-medium text-left"},[e._v(" Select the elements you want to include in this category ")])]),a("el-form",[e.field.types.includes("facilities")?a("el-form-item",{attrs:{label:"Facilities"}},[a("v-multi-select",{ref:"facilities-MultiSelect",attrs:{mode:e.mode,options:e.typesData.facilities,loading:e.typesData.isLoadingFacs,value:"create"==e.mode?[]:e.getTypeSelectionsAsArray("facilities")},on:{input:e.loadFacSearch,remove:function(t){return e.handleRemoveTypeChange("facilities",t)},"values-change":function(t){return e.handleTypeSelectionChange("facilities",t)}}})],1):e._e(),e.field.types.includes("terrestrial networks")?a("el-form-item",{attrs:{label:"Terrestrial Networks"}},[a("v-multi-select",{ref:"terrestrials-MultiSelect",attrs:{mode:e.mode,options:e.typesData.terrestrials,loading:e.typesData.isLoadingCables,value:"create"==e.mode?[]:e.getTypeSelectionsAsArray("terrestrial networks")},on:{input:function(t){return e.loadCablesSearch(t,"terrestrials")},remove:function(t){return e.handleRemoveTypeChange("terrestrial networks",t)},"values-change":function(t){return e.handleTypeSelectionChange("terrestrial networks",t)}}})],1):e._e(),e.field.types.includes("subsea cables")?a("el-form-item",{attrs:{label:"Subsea Cables"}},[a("v-multi-select",{ref:"subsea-MultiSelect",attrs:{mode:e.mode,options:e.typesData.subsea,loading:e.typesData.isLoadingCables,value:"create"==e.mode?[]:e.getTypeSelectionsAsArray("subsea cables")},on:{input:function(t){return e.loadCablesSearch(t)},remove:function(t){return e.handleRemoveTypeChange("subsea cables",t)},"values-change":function(t){return e.handleTypeSelectionChange("subsea cables",t)}}})],1):e._e(),e.field.types.includes("cls")?a("el-form-item",{attrs:{label:"CLS"}},[a("v-multi-select",{ref:"cls-MultiSelect",attrs:{mode:e.mode,options:e.typesData.cls,loading:e.typesData.isLoadingCls,value:"create"==e.mode?[]:e.getTypeSelectionsAsArray("cls")},on:{input:e.loadClsSearch,remove:function(t){return e.handleRemoveTypeChange("cls",t)},"values-change":function(t){return e.handleTypeSelectionChange("cls",t)}}})],1):e._e(),e.field.types.includes("ixps")?a("el-form-item",{attrs:{label:"Ixps"}},[a("v-multi-select",{ref:"ixps-MultiSelect",attrs:{mode:e.mode,options:e.typesData.ixps,loading:e.typesData.isLoadingIxps,value:"create"==e.mode?[]:e.getTypeSelectionsAsArray("ixps")},on:{input:e.loadIxpsSearch,remove:function(t){return e.handleRemoveTypeChange("ixps",t)},"values-change":function(t){return e.handleTypeSelectionChange("ixps",t)}}})],1):e._e()],1),a("footer",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"mr2",attrs:{round:"",plain:""},on:{click:function(){return e.$emit("cancel-types-selection")}}},[e._v(" Cancel ")]),a("el-button",{attrs:{round:"",type:"primary"},on:{click:function(){return e.$emit("save-types")}}},[e._v(" Save ")])],1)],1)],2)},Ye=[],Qe={name:"CategoriesField",components:{VMultiSelect:function(){return Promise.resolve().then(a.bind(null,"3c2e"))}},props:{value:{type:[Array,Boolean],default:function(){return!1}}},data:function(){return{isInputVisible:!1,viewing:[],dictionary:{},typesDialog:{visible:!1},mode:"create",step:1,field:{name:"",types:[],color:"#409EFF","stroke-width":1,"stroke-opacity":1,"stroke-style":"normal",data:{cls:{},ixps:{},facilities:{},"custom lines":{},"subsea cables":{},"custom points":{},"custom polygons":{},"terrestrial networks":{}}},typesData:{cls:[],ixps:[],subsea:[],facilities:[],terrestrials:[],isLoadingCls:!1,isLoadingIxps:!1,isLoadingFacs:!1,isLoadingCables:!1}}},computed:{isCategoriesEmpty:function(){return!this.isInputVisible&&!this.dictionary.getLength()>0},includesDrawnFeatures:function(){return this.field.types.includes("custom points")||this.field.types.includes("custom polygons")||this.field.types.includes("custom lines")},dark:function(){return this.$store.state.isDark},customDialogClass:function(){return this.dark?"custom-dialog dark":"custom-dialog light"},predefineColors:function(){return["#ff4500","#ff8c00","#ffd700","#90ee90","#00ced1","#1e90ff","#c71585"]},typesAvailable:function(){return["cls","ixps","facilities","subsea cables","terrestrial networks","custom lines","custom points","custom polygons"]},determineFunc:function(){return 1==this.step?this.nextStep:"create"==this.mode?this.beforeAddCategoryAddTypesSelections:this.saveEdit},determineView:function(){var e=this;return function(t){return e.viewing.includes(t)?e.removeViewing(t):e.setViewing(t)}},isViewing:function(){var e=this;return function(t){return e.viewing.includes(t)}},getTypeSelectionsAsArray:function(){return function(e){var t=[];for(var a in this.field.data[e])t.push(Object(s["a"])({_id:a},this.field.data[e][a]));return t}}},watch:{value:function(e){var t=!1,a=this;function r(){if(!t){try{a.dictionary.set(e)}catch(r){console.error(r)}t=!0}}r()}},created:function(){l["a"].$on("categories-field-reset-datasets",this.handleCategoriesResetDataset),this.dictionary=X["a"]},beforeDestroy:function(){l["a"].$off("categories-field-reset-datasets",this.handleCategoriesResetDataset)},methods:{loadFacSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return t.typesData.isLoadingFacs=!0,a.t0=Se["f"],a.next=6,t.$auth.getUserID();case 6:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=11,(0,a.t0)(a.t3);case 11:r=a.sent,r&&r.data&&(t.typesData.facilities=r.data),t.typesData.isLoadingFacs=!1;case 14:case"end":return a.stop()}}),a)})))()},loadCablesSearch:function(e,t){var a=this;return Object(o["a"])(regeneratorRuntime.mark((function r(){var n,i,s,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(""!==e){r.next=2;break}return r.abrupt("return");case 2:a.typesData.isLoadingCables=!0,n=function(){},r.t0=t,r.next="terrestrials"===r.t0?7:9;break;case 7:return n=oe["g"],r.abrupt("break",11);case 9:return n=oe["f"],r.abrupt("break",11);case 11:return r.t2=n,r.next=14,a.$auth.getUserID();case 14:return r.t3=r.sent,r.t4=e,r.t5={user_id:r.t3,s:r.t4},r.next=19,(0,r.t2)(r.t5);case 19:if(r.t1=r.sent,r.t1){r.next=22;break}r.t1={data:[]};case 22:i=r.t1,s=i.data,o=void 0===s?[]:s,"terrestrials"==t?a.typesData.terrestrials=o:a.typesData.subsea=o,a.typesData.isLoadingCables=!1;case 27:case"end":return r.stop()}}),r)})))()},loadClsSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return t.typesData.isLoadingCls=!0,a.t0=Oe["e"],a.next=6,t.$auth.getUserID();case 6:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=11,(0,a.t0)(a.t3);case 11:r=a.sent,r&&r.data&&(t.typesData.cls=r.data),t.typesData.isLoadingCls=!1;case 14:case"end":return a.stop()}}),a)})))()},loadIxpsSearch:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(""!==e){a.next=2;break}return a.abrupt("return");case 2:return t.typesData.isLoadingIxps=!0,a.t0=Me["e"],a.next=6,t.$auth.getUserID();case 6:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,s:a.t2},a.next=11,(0,a.t0)(a.t3);case 11:r=a.sent,r&&r.data&&(t.typesData.ixps=r.data),t.typesData.isLoadingIxps=!1;case 14:case"end":return a.stop()}}),a)})))()},handleScrollToView:function(){document.querySelector("#elementsDialog .el-dialog").scrollIntoView({behavior:"smooth",block:"end"})},scrollIntoView:function(){var e=this;setTimeout((function(){document.getElementById("mapFormWrapper").scrollIntoView({behavior:"smooth",block:"end"}),e.$refs.categoryNameInput.focus()}),270)},handleBeforeCreateCategory:function(){this.toggleInput(!0),this.scrollIntoView()},handleRemoveTypeChange:function(e,t){delete this.field.data[e][t]},handleTypeSelectionChange:function(e,t){var a,r={},n=Object(p["a"])(t);try{for(n.s();!(a=n.n()).done;){var i=a.value;r[i._id]=i}}catch(s){n.e(s)}finally{n.f()}this.field.data[e]=r},nextStep:function(){this.step+=1},back:function(){this.step<=1||(this.step-=1)},resetField:function(){this.mode="create",this.step=1,this.field={name:"",types:[],color:"#409EFF","stroke-width":1,"stroke-opacity":1,"stroke-style":"normal",data:{cls:{},ixps:{},facilities:{},"custom lines":{},"subsea cables":{},"custom points":{},"custom polygons":{},"terrestrial networks":{}}}},setViewing:function(e){this.viewing.push(e)},removeViewing:function(e){this.viewing=this.viewing.filter((function(t){return t!=e}))},setEditMode:function(e,t){this.field=Object(s["a"])({},JSON.parse(JSON.stringify(e))),this.mode="edit",this.isInputVisible=!0,t&&this.scrollIntoView()},handleCategoriesResetDataset:function(){var e=this.dictionary.getRaw(),t={cls:{},ixps:{},facilities:{},"custom lines":{},"subsea cables":{},"custom points":{},"custom polygons":{},"terrestrial networks":{}};for(var a in e){var r=this.dictionary.get(a);this.dictionary.update(a,Object(s["a"])(Object(s["a"])({},r),{},{data:t}))}},saveEdit:function(){this.dictionary.update(this.field._id,this.field),this.toggleInput(!1)},toggleInput:function(e){this.isInputVisible=e,this.resetField()},beforeAddCategoryAddTypesSelections:function(){var e=this;return new Promise((function(t,a){e.typesDialog.visible=!0,e.$once("save-types",(function(){"create"==this.mode&&(this.typesDialog.visible=!1,t())})),e.$once("cancel-types-selection",(function(){"create"==this.mode&&(this.typesDialog.visible=!1,a())}))})).then(this.addCategory).catch((function(){}))},editCategoryTypesSelections:function(){for(var e=this,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return new Promise((function(t,r){e.setEditMode.apply(e,a),e.nextStep(),e.typesDialog.visible=!0,e.$once("save-types",(function(){"create"!=this.mode&&(this.typesDialog.visible=!1,t())})),e.$once("cancel-types-selection",(function(){"create"!=this.mode&&(this.toggleInput(!1),this.typesDialog.visible=!1,r())}))})).then(this.saveEdit).catch((function(){}))},addCategory:function(){if(this.field.name&&""!==this.field.name){var e="".concat(this.field.name,".").concat(Date.now());this.dictionary.add(e,Object(s["a"])(Object(s["a"])({},this.field),{},{_id:e}))}this.toggleInput(!1)},removeCategory:function(e){this.dictionary.remove(e),l["a"].$emit("category-removed",e)}}},et=Qe,tt=(a("5a66"),Object(te["a"])(et,Xe,Ye,!1,null,"624bf4e4",null)),at=tt.exports,rt={name:"MapForm",components:{CategoriesField:at,AutocompleteGoogle:function(){return Promise.resolve().then(a.bind(null,"fc4a"))}},data:function(){return{feature:{},fileList:[],featureType:"",tag:{fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""},tagMode:"create",tagOnEdit:null,inputVisible:!1,isLoadingCls:!1,isLoadingFacs:!1,isLoadingIxps:!1,isLoadingCables:!1,isLoadingOwners:!1,currentSelectionID:null,uploadLogo:{text:"",type:"",show:!1,loading:!1}}},props:{form:{type:Object,required:!0},mode:{type:String,required:!0},isSendingData:{type:Boolean,default:function(){return!1}},isSendDataDisabled:{type:Boolean,required:!0}},computed:{title:function(){return"create"==this.mode?"Create":"Edit"},saveBtn:function(){return"create"==this.mode?"Create map":"Save changes"},tagRules:function(){return{reference:[{required:!0,message:"Please input a reference name",trigger:["blur","change"]},{min:2,message:"Minimum length should be 2",trigger:["blur","change"]}],address:[]}},uploadURL:function(){return"".concat(ce["a"].url,"/auth/upload/logo")},dark:function(){return this.$store.state.isDark},autocompleteAddress:function(){return this.tag&&this.tag.fullAddress?this.tag.fullAddress:""},getSelectionID:function(){var e=this;return function(t){return e.form[t].map((function(e){return"string"==typeof e?e:e._id}))}},checkGeomLength:function(){var e;return e="map"!=this.$route.query.id?this.isSendDataDisabled:!this.form.subdomain,e}},watch:{mode:function(e){"create"!=e&&(this.loadMapConfig(),this.setLogoUrl())}},mounted:function(){"edit"==this.mode&&(this.loadMapConfig(),this.setLogoUrl())},methods:{handleFileListRemove:function(){this.form.logo="",this.fileList=[]},handleFileListChange:function(e,t){e&&t.length>0&&!this.form.logo&&(this.fileList=[e.raw],this.$refs.upload.submit())},handleUserLogoUpload:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.uploadLogo.show=!1,e.uploadLogo.loading=!0,t.t1=Ze["c"],t.next=5,e.$auth.getUserID();case 5:return t.t2=t.sent,t.t3=e.fileList[0],t.t4={user_id:t.t2,logo:t.t3},t.next=10,(0,t.t1)(t.t4);case 10:if(t.t0=t.sent,t.t0){t.next=13;break}t.t0={data:{logo:[]}};case 13:if(a=t.t0,r=a.data.r,n=void 0===r?[]:r,n.length){t.next=21;break}return e.fileList=n,e.uploadLogo={type:"info",text:"There has been an error trying to upload your logo. Please, try again.",show:!0,loading:!1},setTimeout((function(){return e.uploadLogo.show=!1}),5200),t.abrupt("return");case 21:e.form.logo=n[0],e.uploadLogo={type:"success",text:"Success! Your logo has been uploaded.",show:!0,loading:!1};case 23:case"end":return t.stop()}}),t)})))()},setLogoUrl:function(){""!==this.form.logo&&void 0!=this.form.logo&&(this.fileList=[{url:this.form.logo}])},loadMapConfig:function(){if(this.form.config){var e="string"==typeof this.form.config?JSON.parse(this.form.config):this.form.config,t=e.categories;t&&"string"!=typeof t&&!Array.isArray(t)&&X["a"].set(t),delete this.form.config}},handleSetFeatureOntoMap:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.t,n=e.data,i=e.color,t.$store.dispatch("editor/toggleMapFormLoading",!0),a.t0=Z["b"],a.t1=r,a.t2=n.map((function(e){return e._id})),a.next=7,t.$auth.getUserID();case 7:return a.t3=a.sent,a.next=10,(0,a.t0)(a.t1,a.t2,a.t3);case 10:return s=a.sent,a.abrupt("return",s?t.$emit("".concat(De),{t:r,fc:s,categoryColor:i,removeLoadState:!0}):t.$store.dispatch("editor/toggleMapFormLoading",!1));case 12:case"end":return a.stop()}}),a)})))()},handleRestrictedNames:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(e){a.next=2;break}return a.abrupt("return");case 2:t.form.subdomain=e.replace(/[^a-zñ\d\s]+/gi,"").trim().toLowerCase();case 3:case"end":return a.stop()}}),a)})))()},sendData:function(){var e={cls:[],draw:{},ixps:[],facilities:[],subsea:[],terrestrials:[]},t=X["a"].getRaw();for(var a in t)for(var r in t[a].data)r.includes("custom")||("subsea cables"==r?e.subsea=[].concat(Object(i["a"])(e.subsea),Object(i["a"])(Object.keys(t[a].data[r]))):"terrestrial networks"==r?e.terrestrials=[].concat(Object(i["a"])(e.terrestrials),Object(i["a"])(Object.keys(t[a].data[r]))):e[r]=[].concat(Object(i["a"])(e[r]),Object(i["a"])(Object.keys(t[a].data[r]))));e.draw=B.getCollectionList();var n=Object(s["a"])(Object(s["a"])(Object(s["a"])({},this.form),e),{},{config:{categories:t}});return this.$emit("".concat(_e),n)},handleClose:function(e){this.form.address.splice(this.form.address.indexOf(e),1)},clearAddress:function(){this.isTagReferenceMissing=!1,this.inputVisible=!1,this.tagOnEdit=null,this.tag={fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""}},editAddress:function(e,t){this.tag=Object(s["a"])({},e),this.tagOnEdit=t,this.tagMode="edit",this.inputVisible=!0},handleAddressChange:function(e){var t,a={street_number:"short_name",route:"long_name",locality:"long_name",country:"long_name",postal_code:"short_name"};this.tag.fullAddress=e.fullAddress;for(var r=0;r<e.address_components.length;r++)if(t=e.address_components[r].types[0],a[t]){var n=e.address_components[r][a[t]];switch(t){case"country":this.tag.country=n;break;case"postal_code":this.tag.zipcode=n;break;case"locality":this.tag.city=n;break;case"route":this.tag.street=n;break;case"administrative_area_level_1":this.tag.state=n;break}}},handleSaveAddress:function(){var e=this;return this.$refs["tagForm"].validate((function(t){t&&(null===e.tagOnEdit?e.form.address.push(Object(s["a"])({},e.tag)):e.form.address[e.tagOnEdit]=Object(s["a"])({},e.tag),e.clearAddress())}))},showInput:function(){var e=this;this.inputVisible=!0;try{this.$nextTick((function(){e.$refs.saveTagInput.$refs.input.focus()}))}catch(t){}},confirmTag:function(){var e=this.tag,t=this.form.address.includes(e);t||(e&&this.form.address.push(e),this.inputVisible=!1,this.tag={fullAddress:"",reference:"",country:"",street:"",apt:"",city:"",state:"",zipcode:""})}}},nt=rt,it=Object(te["a"])(nt,Je,He,!1,null,null,null),st=it.exports,ot=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,xe="".concat(ce["a"].url,"/auth/map/mymap"),e.next=4,le["a"].get(xe,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+ce["a"].bearer()}});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lt=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,i,s,o,l,c,u,d,f,m,p,h,g,b,v,w;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.subdomain,r=t.googleID,n=t.facilities,i=t.cls,s=t.owners,o=t.techEmail,l=t.techPhone,c=t.saleEmail,u=t.salePhone,d=t.address,f=t.subsea,m=t.terrestrials,p=t.logo,h=t.ixps,g=t.draw,b=t.config,v=t.user_id,xe="".concat(ce["a"].url,"/auth/map/mymap"),Ce=new FormData,Ce.append("googleID",r),Ce.append("subdomain",a),Ce.append("techEmail",o),Ce.append("techPhone",l),Ce.append("saleEmail",c),Ce.append("salePhone",u),Ce.append("config",JSON.stringify(b)),Ce.append("logos",p.length>0?p[0]:""),Ce.append("draw",JSON.stringify(Object(A["a"])(g))),n&&n.length>0?n.forEach((function(e,t){return Ce.append("facilities[".concat(t,"]"),e)})):Ce.append("facilities",[]),s&&s.length>0?s.forEach((function(e,t){return Ce.append("owners[".concat(t,"]"),e)})):Ce.append("owners",[]),h&&h.length>0?h.forEach((function(e,t){return Ce.append("ixps[".concat(t,"]"),e)})):Ce.append("ixps",[]),i&&i.length>0?i.forEach((function(e,t){return Ce.append("cls[".concat(t,"]"),e)})):Ce.append("cls",[]),f&&f.length>0?f.forEach((function(e,t){return Ce.append("subsea[".concat(t,"]"),e)})):Ce.append("subsea",[]),m&&m.length>0?m.forEach((function(e,t){return Ce.append("terrestrials[".concat(t,"]"),e)})):Ce.append("terrestrials",[]),d&&d.length>0?d.forEach((function(e,t){Ce.append("address[".concat(t,"]"),JSON.stringify(e))})):Ce.append("address",[]),e.next=21,le["a"].post(xe,Ce,{withCredentials:!0,headers:{userid:v,Authorization:"Bearer "+ce["a"].bearer()}});case 21:return w=e.sent,e.abrupt("return",w);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function ct(e){return ut.apply(this,arguments)}function ut(){return ut=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xe="".concat(ce["a"].url,"/map/ixps/").concat(t),e.next=3,le["a"].get(xe);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),ut.apply(this,arguments)}function dt(e){return ft.apply(this,arguments)}function ft(){return ft=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xe="".concat(ce["a"].url,"/map/facilities/").concat(t),e.next=3,le["a"].get(xe);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),ft.apply(this,arguments)}function mt(e){return pt.apply(this,arguments)}function pt(){return pt=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xe="".concat(ce["a"].url,"/map/cls/").concat(t),e.next=3,le["a"].get(xe);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),pt.apply(this,arguments)}function ht(e){return gt.apply(this,arguments)}function gt(){return gt=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xe="".concat(ce["a"].url,"/map/draw/").concat(t),e.next=3,le["a"].get(xe);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),gt.apply(this,arguments)}function bt(e){return vt.apply(this,arguments)}function vt(){return vt=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xe="".concat(ce["a"].url,"/map/cables/").concat(t),e.next=3,le["a"].get(xe);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),vt.apply(this,arguments)}function wt(e){return yt.apply(this,arguments)}function yt(){return yt=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xe="".concat(ce["a"].url,"/map/setinfo/").concat(t),e.next=3,le["a"].get(xe);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)}))),yt.apply(this,arguments)}var kt=function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return xe="".concat(ce["a"].url,"/map/ixps/").concat(t),e.next=3,Promise.all([mt(t),ct(t),dt(t),bt(t),ht(t),wt(t)]);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{visible:e.isVisible,width:e.dialogWidth,top:"12vh","before-close":e.closeDialog,"custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isVisible=t}}},[a("header",{staticClass:"header p0 no-selectable",attrs:{slot:"title"},slot:"title"},[a("h1",{staticClass:"inline-block font-semibold fs-xlarge"},[a("span",{staticClass:"capitalize"},[e._v("Submit Form")])]),a("el-divider",{staticClass:"m1"}),a("p",{staticClass:"p1 text-justify"},[e._v(" Unfortunately, verifying your KMZ file did not succeed. Help us by submitting your file manually through this form. Our engineers will take care of it or contact you with any questions. ")])],1),a("cables-form",{attrs:{mode:"edit",form:e.formData,"show-title":!1,"is-send-data-disabled":!0,"is-manual-kmz-upload":!0,"is-sending-data":e.isSendingData},on:{"send-data":e.submitForm}}),a("el-form",{staticClass:"pb6 pt6 pr8 pl8 mt-12"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"File",required:""}},[a("dragger",{staticClass:"mt12",attrs:{"is-raw-file":!0},on:{"raw-file":e.setFile}})],1)],1),a("el-col",{attrs:{span:24}},[e.fileSelected?a("el-alert",{staticClass:"mt4",attrs:{type:"success",title:"File loaded correctly",closable:!1,"show-icon":""}}):e._e()],1),a("el-col",{staticClass:"mt4",attrs:{span:24}},[a("vue-recaptcha",{ref:"catpcha",attrs:{sitekey:e.siteKey,loadRecaptchaScript:!0},on:{verify:e.handleCatchaVerification,error:function(){return e.catchaVerified=!1},expired:function(){return e.catchaVerified=!1}}})],1)],1)],1),a("footer",{staticClass:"footer flex wrap justify-content-end pr0 pl6 mt4"},[a("div",[a("el-button",{staticClass:"mr2",attrs:{plain:"",type:"info"},on:{click:e.closeDialog}},[e._v("Cancel")]),a("el-button",{staticClass:"w28",attrs:{disabled:e.isSendButtonDisabled,type:"primary",plain:"",loading:e.isSendingData},on:{click:e.submitForm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.submitForm(t)}}},[e._v(" Submit ")])],1)])],1)},Ct=[],St=(a("a15b"),a("15fd")),_t=a("1b83"),Dt=a("e096"),Ot=a("9a1e"),Lt=a("ceaf"),Rt={components:{CablesForm:$e,VueRecaptcha:Dt["default"],Dragger:function(){return Promise.resolve().then(a.bind(null,"82bb"))}},props:{isVisible:{type:Boolean,required:!0},formData:{type:Object,required:!0}},data:function(){return{isSendingData:!1,catchaVerified:null,fileSelected:!1,loading:!1,form:{file:"",information:""}}},computed:{isSendButtonDisabled:function(){var e=!1;return e=!this.catchaVerified||""===this.form.file||this.formData.cls.length<=0||this.formData.owners.length<=0,e},dialogWidth:function(){return window.innerWidth<890?"74vw":"54vw"},dark:function(){return this.$store.state.isDark},siteKey:function(){return _t["a"]},formFields:function(){var e=this,t=Object.keys(this.formData).map((function(t){return{label:t,value:e.formData[t]}}));return t},customDialogClass:function(){return this.dark?"custom-dialog dark":"custom-dialog light"}},watch:{isVisible:function(e){e||this.$refs.catpcha.reset()}},methods:{setFile:function(e){this.fileSelected=!1,this.form.file=e,this.fileSelected=!0},handleCatchaVerification:function(e){e&&(this.catchaVerified=!0)},constructInformationString:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r,n,i,o,l,c,u,d,f,m,p,h;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=Object.keys(e),n=Object(s["a"])({},e),i="",o="",l={},c="",a.t1=Ot["b"],a.next=9,t.$auth.getUserID();case 9:return a.t2=a.sent,a.next=12,(0,a.t1)(a.t2);case 12:if(a.t0=a.sent,a.t0){a.next=15;break}a.t0={user_metadata:{lastname:"",email:"",name:""},userData:{name:"",email:""}};case 15:u=a.t0,d=u.user_metadata,f=Object(St["a"])(u,["user_metadata"]),l={name:d&&d.name?d.name:f.name,email:d&&d.email?d.email:f.email,lastname:d&&d.lastname?d.lastname:name.split(" ")[1]?name.split(" ")[1]:""},c="The user: ".concat(l.name," ").concat(l.lastname," (").concat(l.email,") couln't upload their kmz"),m=0,p=r;case 21:if(!(m<p.length)){a.next=29;break}if(h=p[m],"file"!=h){a.next=25;break}return a.abrupt("continue",26);case 25:o+='\n            <div>\n              <p style="font-size: 14px; margin: .8rem 0;">\n                '.concat(h,": ").concat(Array.isArray(n[h])?n[h].map((function(e){return"string"==typeof e?e:e.name?e.name:JSON.stringify(e)})).join():n[h],"\n              </p>\n            </div>\n          ");case 26:m++,a.next=21;break;case 29:return i=c+o,a.abrupt("return",i);case 31:case"end":return a.stop()}}),a)})))()},submitForm:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSendingData=!0,t.t1=Ze["b"],t.next=4,e.constructInformationString(e.formData);case 4:return t.t2=t.sent,t.t3=Object(Lt["a"])(e.$route.query.id),t.next=8,e.$auth.getUserID();case 8:return t.t4=t.sent,t.t5=e.formData._id,t.t6=e.form.file,t.t7={information:t.t2,t:t.t3,user_id:t.t4,element:t.t5,file:t.t6},t.next=14,(0,t.t1)(t.t7);case 14:if(t.t0=t.sent,t.t0){t.next=17;break}t.t0={t:"error"};case 17:a=t.t0,r=a.t,"error"!=r&&(e.closeDialog(),e.$router.go(-1)),e.isSendingData=!1;case 21:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.$emit("close")}}},jt=Rt,$t=Object(te["a"])(jt,xt,Ct,!1,null,null,null),Tt=$t.exports,It=["cls","map","ixps","subsea","facilities","terrestrial-network"],At={name:"CreateSection",components:{"cls-form":ve,"editor-map":re,"cable-form":$e,"manual-kmz-submit-dialog":Tt},data:function(){return{form:{},mapKey:0,mode:"create",loading:!1,featuresList:[],isSendingData:!1,isPropertiesDialog:!1,isManualUploadDialog:!1,isLoadingSelectionGeom:!1,creationType:this.$route.query.id}},watch:{"$route.query":function(e){e.id!=this.creationType&&(this.creationType=e.id,this.mapKey+=1)}},computed:{dark:function(){return this.$store.state.isDark},customDialogClass:function(){return this.dark?"custom-dialog dark":"custom-dialog light"},isMapFormSendingData:function(){return this.isSendingData&&"map"==this.creationType},isLoadingDialog:function(){var e="cls"==this.creationType||"subsea"==this.creationType||"terrestrial-network"==this.creationType;return e&&this.isSendingData},currentView:function(){var e;switch(this.creationType){case"cls":e=ve;break;case"map":e=st;break;case"facilities":e=Ne;break;case"ixps":e=We;break;default:e=$e;break}return e},checkGeomLength:function(){return!(this.form.geom.length>0)},isMapFormLoading:{get:function(){return this.$store.state.editor.isMapFormLoading},set:function(){return this.$store.dispatch("editor/toggleMapFormLoading",!1)}},backButtonRoute:function(){var e;switch(this.creationType.toLowerCase()){case"cls":e="/user/section/cls";break;case"subsea":e="/user/section/subsea-cables";break;case"ixps":e="/user/section/ixps";break;case"facilities":e="/user/section/facilities";break;default:e="/user/section/terrestrial-networks";break}return e}},beforeCreate:function(){this.$route.query.id&&-1!=It.indexOf(this.$route.query.id)||this.$router.push("/user")},created:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.creationType=e.$route.query.id,"map"!=e.creationType&&(B.watchStorage(),B.on(N["a"],e.handleSceneChanged)),e.checkCreationType(e.$route.query.id),!e.$route.query.item){t.next=8;break}e.getElementOnEdit(e.$route.query.item),t.next=11;break;case 8:if("map"!=e.$route.query.id){t.next=11;break}return t.next=11,e.checkUserMapExistance();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},beforeDestroy:function(){"map"!=this.creationType&&(B.unwatchStorage(),B.off(N["a"],this.handleSceneChanged))},methods:{handleSceneChanged:function(){this.form.geom=B.getCollectionList()},closeMannualKmzSubmitDialog:Object(M["a"])((function(){this.isManualUploadDialog=!1,this.$router.replace("".concat(this.$route.path,"?id=").concat(this.$route.query.id))}),320),handleFileConvertionFailed:Object(M["a"])((function(){this.isManualUploadDialog=!0,this.$router.replace("".concat(this.$route.path,"?id=").concat(this.$route.query.id,"&failedToUploadKMz=true"))}),320),toggleMapFormLoading:function(e){this.$store.dispatch("editor/toggleMapFormLoading",e)},handleSetSelectionOntoMap:function(e){return Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["a"].$emit("".concat($),e);case 2:case"end":return t.stop()}}),t)})))()},checkUserMapExistance:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var a,r,n,i,s,o,c,u,d,f,m,p,h,g,b,v;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.t1=ot,t.next=5,e.$auth.getUserID();case 5:return t.t2=t.sent,t.t3={user_id:t.t2},t.next=9,(0,t.t1)(t.t3);case 9:if(t.t0=t.sent,t.t0){t.next=12;break}t.t0={data:{mymap:[]},t:"error"};case 12:a=t.t0,r=a.t,n=a.data.r,i=void 0===n?[]:n,"error"!=r&&i.length>0&&(e.mode="edit",s=i[0],o=s.draw,c=s.logos,u=s.address,d=s.googleID,f=s.techEmail,m=s.techPhone,p=s.saleEmail,h=s.salePhone,g=s.subdomain,b=s.config,v="string"==typeof o?JSON.parse(o):o,e.form={config:b,googleID:d,subdomain:g,geom:[],salePhone:h||"",techEmail:f||"",techPhone:m||"",saleEmail:p||"",address:Array.isArray(u)?u:[],logo:Array.isArray(c)&&c.length>0?c[0]:""},v.features&&v.features.length>0&&l["a"].$emit("".concat(T),v.features)),t.next=21;break;case 19:t.prev=19,t.t4=t["catch"](1);case 21:return t.prev=21,e.loading=!1,t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[1,19,21,24]])})))()},handleFileConverted:function(e){l["a"].$emit("".concat(j),e)},handleDialogVisibility:function(e){this.isPropertiesDialog=e},checkCreationType:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=e,a.next="cls"===a.t0?3:"map"===a.t0?5:"ixps"===a.t0?7:"facilities"===a.t0?9:11;break;case 3:return t.form={name:"",slug:"",country:"",tags:[],cables:[],owners:[],state:"unknown",geom:[]},a.abrupt("break",13);case 5:return t.form={subdomain:"",googleID:"",cls:[],ixps:[],logo:"",terrestrials:[],subsea:[],geom:[],facilities:[],address:[],techEmail:"",techPhone:"",saleEmail:"",salePhone:""},a.abrupt("break",13);case 7:return t.form={name:"",tags:[],owners:[],geom:[],nameLong:"",media:"",techEmail:"",techPhone:"",policyEmail:"",policyPhone:"",proto_ipv6:!1,proto_unicast:!1,proto_multicast:!1},a.abrupt("break",13);case 9:return t.form={name:"",point:"",address:[],website:"",geom:[],ixps:[],tags:[],t:"",owners:[],StartDate:new Date,building:""},a.abrupt("break",13);case 11:return t.form={cls:[],urls:[],tags:[],name:"",notes:"",knownUsers:[],facilities:[],fiberPairs:"",systemLength:0,capacityTBPS:0,litCapacity:[],owners:"subsea"==t.creationType?[]:"",terrestrial:"subsea"!=t.creationType,category:u[0],activationDateTime:"",geom:[]},a.abrupt("break",13);case 13:case"end":return a.stop()}}),a)})))()},getElementOnEdit:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.prev=0,t.loading=!0,t.mode="edit",r={},a.t0=t.creationType,a.next="cls"===a.t0?7:"facilities"===a.t0?12:"ixps"===a.t0?16:21;break;case 7:return a.next=9,t.viewCurrentCLS(e);case 9:return r=a.sent,r.country&&"null"!=r.country||(r.country=""),a.abrupt("break",26);case 12:return a.next=14,t.viewCurrentFacility(e);case 14:return r=a.sent,a.abrupt("break",26);case 16:return a.next=18,t.viewCurrentIXP(e);case 18:return r=a.sent,r.owners?r.owners:r.owners=[],a.abrupt("break",26);case 21:return a.next=23,t.viewCurrentCable(e);case 23:return r=a.sent,"subsea"!=t.creationType||r.litCapacity||(r.litCapacity=[]),a.abrupt("break",26);case 26:return t.form=Object(s["a"])({},r),a.next=29,t.handleEditModeSettings(r);case 29:t.loading=!1,a.next=35;break;case 32:a.prev=32,a.t1=a["catch"](0),console.error(a.t1);case 35:case"end":return a.stop()}}),a,null,[[0,32]])})))()},handleEditModeSettings:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=t.creationType,a.next="cls"===a.t0?3:"ixps"===a.t0?5:"facilities"===a.t0?7:9;break;case 3:return t.handleCLSEditMode(e),a.abrupt("break",11);case 5:return t.handleIxpsEditMode(e),a.abrupt("break",11);case 7:return t.handleFacsEditMode(e),a.abrupt("break",11);case 9:return t.handleCablesEditMode(e),a.abrupt("break",11);case 11:r=[],r="Point"==e.geom.type||"Feature"==e.geom.type?[{type:"Feature",properties:e.geom.properties?e.geom.properties:{name:""},geometry:e.geom.geometry?e.geom.geometry:{type:e.geom.type,coordinates:e.geom.coordinates}}]:Object(i["a"])(e.geom.features),l["a"].$emit("".concat(T),r);case 14:case"end":return a.stop()}}),a)})))()},handleCLSEditMode:function(e){"null"!=this.form.state&&"undefined"!=this.form.state||(this.form.state="unknown");var t=e.cables.map((function(e){return{name:e.label,_id:e._id}}));if(this.form.cables=t,this.form.cablesList=t,e.owners&&Array.isArray(e.owners)){var a=e.owners.map((function(e){return{name:e.label,_id:e._id}}));this.form.owners=a,this.form.ownersList=a}else this.form.owners=[]},handleFacsEditMode:function(e){var t=e.ixps.map((function(e){return{name:e.label,_id:e._id}}));this.form.ixps=t,this.form.ixpsList=t;var a=e.owners.map((function(e){return{name:e.label,_id:e._id}}));this.form.owners=a,this.form.ownersList=a},handleIxpsEditMode:function(e){if(this.form.media&&"undefined"!=this.form.media||(this.form.media=""),e.owners&&Array.isArray(e.owners)){var t=e.owners.map((function(e){return{name:e.label,_id:e._id}}));this.form.owners=t,this.form.ownersList=t}else this.form.owners=[]},handleCablesEditMode:function(e){var t=e.facilities.map((function(e){return{name:e.label,_id:e._id}})),a=e.owners.map((function(e){return{name:e.label,_id:e._id}})),r=e.cls.map((function(e){return{name:e.label,_id:e._id}})),n=e.knownUsers.map((function(e){return{name:e.label,_id:e._id}}));this.form.activationDateTime=new Date(this.form.activationDateTime),this.form.facsList=t,this.form.facilities=t,this.form.owners=a,this.form.ownersList=a,this.form.cls=r,this.form.clsList=r,this.form.knownUsers=n,this.form.knownUsersList=n,("null"==e.category||"undefined"==e.category||e.category.length<=0)&&(this.form.category="unknown")},viewCurrentFacility:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=Se["i"],a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,_id:a.t2},a.next=8,(0,a.t0)(a.t3);case 8:return r=a.sent,a.abrupt("return",r&&r.data&&r.data.r?r.data.r:{});case 10:case"end":return a.stop()}}),a)})))()},viewCurrentIXP:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=Me["f"],a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,_id:a.t2},a.next=8,(0,a.t0)(a.t3);case 8:return r=a.sent,a.abrupt("return",r&&r.data&&r.data.r?r.data.r:{});case 10:case"end":return a.stop()}}),a)})))()},viewCurrentCLS:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=Oe["h"],a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,_id:a.t2},a.next=8,(0,a.t0)(a.t3);case 8:return r=a.sent,a.abrupt("return",r&&r.data&&r.data.r?r.data.r:{});case 10:case"end":return a.stop()}}),a)})))()},viewCurrentCable:function(e){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=oe["j"],a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,_id:a.t2},a.next=8,(0,a.t0)(a.t3);case 8:return r=a.sent,a.abrupt("return",r&&r.data&&r.data.r?r.data.r:{});case 10:case"end":return a.stop()}}),a)})))()},handleSendData:function(e,t,a){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var i,o,l,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e&&t){n.next=2;break}return n.abrupt("return");case 2:if(i=null,r.isSendingData=!0,"create"!=e){n.next=20;break}n.t0=t.toLowerCase(),n.next="cls"===n.t0?8:"ixps"===n.t0?10:"map"===n.t0?12:"facilities"===n.t0?14:16;break;case 8:return i=Oe["a"],n.abrupt("break",18);case 10:return i=Me["a"],n.abrupt("break",18);case 12:return i=lt,n.abrupt("break",18);case 14:return i=Se["a"],n.abrupt("break",18);case 16:return i=oe["a"],n.abrupt("break",18);case 18:n.next=34;break;case 20:if("edit"!=e){n.next=34;break}n.t1=t.toLowerCase(),n.next="cls"===n.t1?24:"ixps"===n.t1?26:"facilities"===n.t1?28:"map"===n.t1?30:32;break;case 24:return i=Oe["c"],n.abrupt("break",34);case 26:return i=Me["c"],n.abrupt("break",34);case 28:return i=Se["c"],n.abrupt("break",34);case 30:return i=lt,n.abrupt("break",34);case 32:return i=oe["c"],n.abrupt("break",34);case 34:return r.form.geom=B.getCollectionList(),""===r.form.geom[0].properties.name?r.form.geom[0].properties.name=r.form.name:r.form.geom[0].properties.name=r.form.geom[0].properties.name,o=a||r.form,n.t3=i,n.t4=s["a"],n.t5=Object(s["a"])({},o),n.t6={},n.next=43,r.$auth.getUserID();case 43:return n.t7=n.sent,n.t8={user_id:n.t7},n.t9=(0,n.t4)(n.t5,n.t6,n.t8),n.next=48,(0,n.t3)(n.t9);case 48:if(n.t2=n.sent,n.t2){n.next=51;break}n.t2={t:"error",data:null};case 51:if(l=n.t2,c=l.t,u=l.data,r.isSendingData=!1,"error"==c){n.next=63;break}if(r.mode="edit","map"!=t){n.next=62;break}return n.next=60,kt(r.form.subdomain).catch(console.error);case 60:n.next=63;break;case 62:r.$router.replace({path:"/user/section/create",query:{id:r.$route.query.id,item:u.r}});case 63:case"end":return n.stop()}}),n)})))()}}},Et=At,Ft=(a("1260"),Object(te["a"])(Et,r,n,!1,null,"2a8f8d1f",null));t["default"]=Ft.exports},6728:function(e,t,a){},"7ee5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full colummn pl4 pr4 flex wrap align-items-start",class:{dark:e.dark,light:!e.dark}},[a("div",{staticClass:"w-fit-full flex row wrap align-items-start"},[a("header",{staticClass:"flex w-fit-full p2 row nowrap justify-content-space-between"},[a("h1",{staticClass:"title-user color-inherit"},[e._v(" "+e._s(e.tableConfig.title)+" ")])]),a("el-divider"),a("el-card",{staticClass:"w-fit-full",attrs:{shadow:"never"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{data:e.tableData,"max-height":"700","row-class-name":e.tableRowClassName}},[e._l(e.columns,(function(t,r){return a("el-table-column",{key:r,attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v(" "+e._s(""+a.row[t.value])+" ")]}}],null,!0)})})),a("el-table-column",{attrs:{fixed:"right",label:"Operations",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.disabled?a("el-button",{staticClass:"p2 no-y fs-regular",attrs:{type:"info",size:"small"},on:{click:function(a){return e.toggleSelectedAlert(t.row._id)}}},[a("fa",{attrs:{icon:["fas","bell"]}})],1):a("el-button",{staticClass:"p2 no-y fs-regular",attrs:{type:"success",size:"small"},on:{click:function(a){return e.toggleSelectedAlert(t.row._id)}}},[a("fa",{attrs:{icon:["fas","bell"]}})],1)]}}])})],2)],1)],1),a("div",{staticClass:"flex w-fit-full justify-content-center"},[a("el-pagination",{attrs:{"current-page":e.currentPage,layout:"prev, next"},on:{"current-change":e.getALertsList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1)])},n=[],i=(a("4de4"),a("96cf"),a("1da1")),s=a("9a1e"),o=a("3b79"),l=a("ceaf"),c={data:function(){return{tableData:[],loading:!1,isDialog:!1,currentPage:0,mode:"create",tableConfig:{title:"Alerts",creation_link:!1,btn_label:"Create Alert"},columns:[{label:"Name",value:"name"},{label:"Type",value:"t"},{label:"Element status",value:"status"}]}},computed:{totalPages:function(){return 20},dark:function(){return this.$store.state.isDark}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getALertsList();case 2:case"end":return t.stop()}}),t)})))()},methods:{tableRowClassName:function(e){var t=e.row;return t.status?"":"light-yellow-bg"},getALertsList:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:t.currentPage,t.loading=!0,a.t0=o["e"],a.t1=r,a.next=6,t.$auth.getUserID();case 6:return a.t2=a.sent,a.t3={page:a.t1,user_id:a.t2},a.next=10,(0,a.t0)(a.t3);case 10:n=a.sent,n&&n.data&&n.data.r&&(t.tableData=n.data.r),t.loading=!1;case 13:case"end":return a.stop()}}),a)})))()},toggleSelectedAlert:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(r=t.tableData.filter((function(t){return t._id===e}))[0],!r){a.next=40;break}if(t.loading=!0,a.prev=3,r.disabled){a.next=10;break}return a.next=7,t.$confirm("Are you sure you want to disable this alert?","Please confirm to continue").then(Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.t0=o["d"],e.next=3,t.$auth.getUserID();case 3:return e.t1=e.sent,e.t2=r._idElement,e.t3=Object(l["a"])(r.t),e.t4={user_id:e.t1,elemnt:e.t2,t:e.t3},e.next=9,(0,e.t0)(e.t4);case 9:case"end":return e.stop()}}),e)})))).catch((function(){}));case 7:return a.abrupt("return",a.sent);case 10:if(!r.disabled){a.next=31;break}return a.t0=s["b"],a.next=14,t.$auth.getUserID();case 14:return a.t1=a.sent,a.next=17,(0,a.t0)(a.t1);case 17:if(n=a.sent,!n){a.next=31;break}return a.t2=o["c"],a.next=22,t.$auth.getUserID();case 22:return a.t3=a.sent,a.t4=r._idElement,a.t5=n.email,a.t6=n.user_metadata&&n.user_metadata.phonenumber?n.user_metadata.phonenumber.num:"",a.t7=Object(l["a"])(r.t),a.t8={user_id:a.t3,elemnt:a.t4,email:a.t5,phone:a.t6,t:a.t7},a.next=30,(0,a.t2)(a.t8);case 30:return a.abrupt("return",a.sent);case 31:a.next=36;break;case 33:return a.prev=33,a.t9=a["catch"](3),a.abrupt("return",console.error(a.t9));case 36:return a.prev=36,t.loading=!1,t.getALertsList(),a.finish(36);case 40:case"end":return a.stop()}}),a,null,[[3,33,36,40]])})))()}}},u=c,d=(a("a24f"),a("2877")),f=Object(d["a"])(u,r,n,!1,null,"8eeca1c4",null);t["default"]=f.exports},8593:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));a("4de4");var r=a("b85c"),n=(a("96cf"),a("1da1")),i=a("d4ec"),s=a("bee2"),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debug:!1},a=t.debug;Object(i["a"])(this,e),this._events={},this.debug=a}return Object(s["a"])(e,[{key:"on",value:function(e,t){this._events[e]||(this._events[e]=[]),this._events[e].push(t)}},{key:"off",value:function(e,t){if(this._events[e]){var a=function(e){return e!==t};this._events[e]=this._events[e].filter(a)}}},{key:"emit",value:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t,a){var i,s,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this._events[t]){e.next=2;break}return e.abrupt("return");case 2:i=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t(a);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=Object(r["a"])(this._events[t]),e.prev=4,s.s();case 6:if((o=s.n()).done){e.next=13;break}return l=o.value,this.debug&&console.info("%cEMITTING EVENT-------------%c"+t,"color: lightblue","color: salmon"),e.next=11,i(l);case 11:e.next=6;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e["catch"](4),s.e(e.t0);case 18:return e.prev=18,s.f(),e.finish(18);case 21:case"end":return e.stop()}}),e,this,[[4,15,18,21]])})));function t(t,a){return e.apply(this,arguments)}return t}()}]),e}()},"8bd5":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{ref:"tableList",attrs:{"is-loading":e.loading,columns:e.columns,config:e.tableConfig,"table-data":e.tableData,pagination:!0,sortList:e.sortByList},on:{"edit-item":e.handleEditCable,"delete-item":e.handleDeleteCable,"alert-message":e.handleSendMessage,"page-change":e.handleSubseaSearch,"search-input":e.handleSubseaSearch,"clear-search-input":e.handleSubseaSearch,"sort-by":e.handleSubseaSearch}}),a("prompt-delete",{attrs:{elemnt:e.elemntType,"is-visible":e.promptDelete},on:{"delete-cancel":function(t){return e.$emit("delete-cancel")},"delete-confirm":function(t){return e.$emit("delete-confirm")}}})],1)},n=[],i=(a("4de4"),a("b0c0"),a("d3b7"),a("96cf"),a("1da1")),s=a("2909"),o=a("9c7a"),l=a("156a"),c=a("7c03"),u=a("0316"),d=a("39a1"),f=a("33b5"),m=a("a5e0"),p={name:"CablesSection",components:{TableList:l["a"],PromptDelete:function(){return a.e("chunk-2d0d6b42").then(a.bind(null,"744c"))}},data:function(){return{tableData:[],loading:!1,promptDelete:!1,tableConfig:{title:"Subsea Cables",creation_link:"/user/section/create?id=subsea",btn_label:"Create subsea cable"},columns:Object(s["a"])(o["a"]).filter((function(e){return e.showTable}))}},computed:{sortByList:function(){return[{text:"Name Asc",value:"nameAsc"},{text:"Name Desc",value:"nameDesc"},{text:"RFS Asc",value:"rfsAsc"},{text:"RFS Desc",value:"rfsDesc"},{text:"Created at Asc",value:"creatAtAsc"},{text:"Created at Desc",value:"creatAtDesc"},{text:"Updated at Asc",value:"updateAtAsc"},{text:"Updated at Desc",value:"updateAtDesc"}]},dark:function(){return this.$store.state.isDark},elemntType:function(){return"subsea cable"}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleSubseaSearch("","nameAsc",0);case 2:case"end":return t.stop()}}),t)})))()},methods:{handleSendMessage:function(e){return this.$store.commit("".concat(d["f"]),{id:e._id,name:e.name,type:"cables"}),this.$store.commit("".concat(u["n"]),!0)},handleEditCable:function(e){return this.$router.push({path:"/user/section/create",query:{id:"subsea",item:e}})},handleDeleteCable:function(e,t){var a=this;this.promptDelete=!0,this.$once("delete-confirm",Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=11;break}return r.t0=c["b"],r.next=4,a.$auth.getUserID();case 4:return r.t1=r.sent,r.t2=e,r.t3={user_id:r.t1,_id:r.t2},r.next=9,(0,r.t0)(r.t3).then((function(){return a.handleSubseaSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 9:r.next=19;break;case 11:return r.t4=m["a"],r.next=14,a.$auth.getUserID();case 14:return r.t5=r.sent,r.t6=e,r.t7={user_id:r.t5,_id:r.t6},r.next=19,(0,r.t4)(r.t7).then((function(){return a.handleSubseaSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 19:a.promptDelete=!1;case 20:case"end":return r.stop()}}),r)})))),this.$once("delete-cancel",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.promptDelete=!1;case 1:case"end":return e.stop()}}),e)}))))},handleSubseaSearch:Object(f["a"])(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:0,this.loading=!0,e.t0=c["f"],e.next=5,this.$auth.getUserID();case 5:return e.t1=e.sent,e.t2=a,e.t3=r,e.t4=t,e.t5={user_id:e.t1,psz:!0,sortBy:e.t2,page:e.t3,s:e.t4},e.next=12,(0,e.t0)(e.t5);case 12:n=e.sent,n&&n.data&&(this.tableData=n.data),this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),820)}},h=p,g=(a("577d"),a("2877")),b=Object(g["a"])(h,r,n,!1,null,"39760bd2",null);t["default"]=b.exports},"8cc6":function(e,t,a){"use strict";var r=a("ce90"),n=a.n(r);n.a},"8ffc":function(e,t,a){"use strict";var r=a("efae"),n=a.n(r);n.a},"90fd":function(e,t,a){},9203:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{ref:"tableList",attrs:{"is-loading":e.loading,columns:e.columns,config:e.tableConfig,"table-data":e.tableData,pagination:!0},on:{"search-input":e.handleFacsSearch,"sort-by":e.handleFacsSearch,"edit-item":e.handleEditFac,"delete-item":e.handleDeleteFac,"page-change":e.handleFacsSearch,"clear-search-input":e.handleFacsSearch}}),a("prompt-delete",{attrs:{elemnt:e.elemntType,"is-visible":e.promptDelete},on:{"delete-cancel":function(t){return e.$emit("delete-cancel")},"delete-confirm":function(t){return e.$emit("delete-confirm")}}})],1)},n=[],i=(a("4de4"),a("d3b7"),a("96cf"),a("1da1")),s=a("2909"),o=a("9c7a"),l=a("156a"),c=a("5c49"),u=a("33b5"),d=a("a5e0"),f={name:"FacilitiesSection",components:{TableList:l["a"],PromptDelete:function(){return a.e("chunk-2d0d6b42").then(a.bind(null,"744c"))}},data:function(){return{tableData:[],loading:!1,promptDelete:!1,tableConfig:{title:"Facilities",creation_link:"/user/section/create?id=facilities",btn_label:"Create facility"},columns:Object(s["a"])(o["c"]).filter((function(e){return e.showTable}))}},computed:{dark:function(){return this.$store.state.isDark},elemntType:function(){return"facility"}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleFacsSearch("","nameAsc",0);case 2:case"end":return t.stop()}}),t)})))()},methods:{handleEditFac:function(e){return this.$router.push({path:"/user/section/create",query:{id:"facilities",item:e}})},handleFacsSearch:Object(u["a"])(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:0,this.loading=!0,e.t0=c["f"],e.next=5,this.$auth.getUserID();case 5:return e.t1=e.sent,e.t2=a,e.t3=r,e.t4=t,e.t5={user_id:e.t1,psz:!0,sortBy:e.t2,page:e.t3,s:e.t4},e.next=12,(0,e.t0)(e.t5);case 12:n=e.sent,n&&n.data&&(this.tableData=n.data),this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),820),handleDeleteFac:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.promptDelete=!0,a.$once("delete-confirm",Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=11;break}return r.t0=c["b"],r.next=4,a.$auth.getUserID();case 4:return r.t1=r.sent,r.t2=e,r.t3={user_id:r.t1,_id:r.t2},r.next=9,(0,r.t0)(r.t3).then((function(){a.handleFacsSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 9:r.next=19;break;case 11:return r.t4=d["c"],r.next=14,a.$auth.getUserID();case 14:return r.t5=r.sent,r.t6=e,r.t7={user_id:r.t5,_id:r.t6},r.next=19,(0,r.t4)(r.t7).then((function(){a.handleFacsSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 19:a.promptDelete=!1;case 20:case"end":return r.stop()}}),r)})))),a.$once("delete-cancel",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.promptDelete=!1;case 1:case"end":return e.stop()}}),e)}))));case 3:case"end":return r.stop()}}),r)})))()}}},m=f,p=(a("b872"),a("2877")),h=Object(p["a"])(m,r,n,!1,null,"6f2a1f9c",null);t["default"]=h.exports},"9a87":function(e,t,a){"use strict";a.d(t,"a",(function(){return m})),a.d(t,"b",(function(){return h}));a("b64b");var r=a("d4ec"),n=a("bee2"),i=a("262e"),s=a("2caf"),o=a("8593"),l="storage--changed",c="storage--reset",u="storage--item-added",d="storage--item-updated",f="storage--item-removed",m="storage--watcher--change-recorded",p=[l,c,u,d,f],h=function(e){Object(i["a"])(a,e);var t=Object(s["a"])(a);function a(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debug:!1},i=n.debug;return Object(r["a"])(this,a),e=t.call(this,{debug:i}),e.__storage={},e.__length=0,e}return Object(n["a"])(a,[{key:"_emitWatch",value:function(){this.emit("".concat(m))}},{key:"watchStorage",value:function(){for(var e=0;e<p.length;e++)this.on(p[e],this._emitWatch.bind(this))}},{key:"unwatchStorage",value:function(){for(var e=0;e<p.length;e++)this.off(p[e],this._emitWatch.bind(this))}},{key:"getCollectionList",value:function(){var e=[];for(var t in this.__storage)this.__storage[t]&&e.push(this.__storage[t]);return e}},{key:"getRaw",value:function(){return this.__storage}},{key:"getLength",value:function(){return this.__length}},{key:"reset",value:function(){this.__storage={},this.__length=0,this.emit("".concat(c))}},{key:"set",value:function(e){e&&(this.__storage=e,this.__length=Object.keys(e).length,this.emit("".concat(l),this.getRaw()))}},{key:"add",value:function(e,t){this.__storage[e]||(this.__storage[e]=t,this.__length++,this.emit("".concat(u),t))}},{key:"remove",value:function(e){this.__storage[e]&&(delete this.__storage[e],this.__length--,this.emit("".concat(f)))}},{key:"get",value:function(e){if(e)return JSON.parse(JSON.stringify(this.__storage[e]))}},{key:"update",value:function(e,t){e&&t&&(this.__storage[e]=t,this.emit("".concat(d),t))}},{key:"includes",value:function(e){if(e){var t=!1;for(var a in this.__storage)if(a==e){t=!0;break}return t}}}]),a}(o["a"])},"9c7a":function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return i})),a.d(t,"d",(function(){return s})),a.d(t,"e",(function(){return o})),a.d(t,"f",(function(){return l}));a("4de4");var r=[{label:"Name",value:"name",showSidebar:!0,showTable:!0},{label:"Status",value:"state",showSidebar:!0},{label:"Slug",value:"slug",showSidebar:!0},{label:"Geom",value:"geom"},{label:"Cables",value:"cables",showSidebar:!0,filter:function(e){return e}},{label:"Groups",value:"networks",showSidebar:!0},{label:"Owners",value:"organizations",showSidebar:!0},{label:"Configured alerts",value:"alerts",showTable:!0},{label:"Created at",value:"rgDate",showTable:!0},{label:"Updated at",value:"uDate",showTable:!0}],n=[{label:"Name",value:"name",showSidebar:!0,showTable:!0,sortable:!0},{label:"Status",value:"category",showSidebar:!0},{label:"Latency",value:"systemLength"},{label:"Length",value:"systemLength",showSidebar:!0},{label:"RFS",value:"activationDateTime",showTable:!0},{label:"RFS",value:"RFS",showSidebar:!0},{label:"EOL",value:"activationDateTime",showSidebar:!0},{label:"Design Capacity",value:"capacityTBPS",showSidebar:!0},{label:"Fiber Pairs",value:"fiberPairs",showSidebar:!0},{label:"Lit Capacity",value:"litCapacity",showSidebar:!0},{label:"Notes",value:"notes",showSidebar:!0},{label:"Cls",value:"cls",showSidebar:!0},{label:"Facilities",value:"facilities",showSidebar:!0},{label:"Groups",value:"networks",showSidebar:!0},{label:"Owners",value:"owners",showSidebar:!0},{label:"Known Users",value:"knownUsers",showSidebar:!0},{label:"Organizations",value:"organizations",showSidebar:!0},{label:"Urls",value:"urls",showSidebar:!0},{label:"Configured alerts",value:"alerts",showTable:!0},{label:"Created at",value:"rgDate",showTable:!0},{label:"Updated at",value:"uDate",showTable:!0}],i=[{label:"Name",value:"name",showSidebar:!0,showTable:!0},{label:"Address",value:"address",showSidebar:!0,showTable:!0},{label:"Websites",value:"websites",showSidebar:!0,showTable:!0},{label:"Start date",value:"startDate",showSidebar:!0,showTable:!0},{label:"Ixps",value:"ixps",showSidebar:!0},{label:"Type",value:"building",showSidebar:!0,showTable:!0},{label:"Cables",value:"cables",showSidebar:!0,filter:function(e){return e}},{label:"Groups",value:"networks",showSidebar:!0},{label:"Owners",value:"organizations",showSidebar:!0},{label:"Created at",value:"rgDate",showTable:!0},{label:"Updated at",value:"uDate",showTable:!0}],s=[{label:"Name",value:"name",showSidebar:!0,showTable:!0},{label:"Address",value:"address",showSidebar:!0,showTable:!0},{label:"Media",value:"media",showSidebar:!0},{label:"Websites",value:"website",showSidebar:!0,showTable:!0},{label:"Policy email",value:"policyEmail",showSidebar:!0},{label:"Policy phone",value:"policyPhone",showSidebar:!0},{label:"Tech email",value:"techEmail",showSidebar:!0},{label:"Tech phone",value:"techPhone",showSidebar:!0},{label:"Groups",value:"networks",showSidebar:!0},{label:"Owners",value:"organizations",showSidebar:!0},{label:"Facilities",value:"facilities",showSidebar:!0},{label:"Created at",value:"rgDate",showTable:!0},{label:"Updated at",value:"uDate",showTable:!0}],o=[{label:"Name",value:"name",showTable:!0},{label:"Websites",value:"websites",showSidebar:!0,showTable:!0},{label:"Creation date",value:"created",showSidebar:!0},{label:"Facilities",value:"facilities",showSidebar:!0},{label:"Terrestrial Networks",value:"cables",showSidebar:!0,filter:function(e){return e.filter((function(e){return e.terrestrial}))}},{label:"Subsea Cables",value:"cables",showSidebar:!0,filter:function(e){return e.filter((function(e){return!e.terrestrial}))}},{label:"Cls",value:"cls",showSidebar:!0},{label:"Owners",value:"orgs",showSidebar:!0},{label:"Configured alerts",value:"alerts",showTable:!0},{label:"asn",value:"asn",showSidebar:!0},{label:"info ipv6",value:"info_ipv6",showSidebar:!0},{label:"info multicast",value:"info_multicast",showSidebar:!0},{label:"prefixes4",value:"prefixes4",showSidebar:!0},{label:"info ratio",value:"info_ratio",showSidebar:!0},{label:"info scope",value:"info_scope",showSidebar:!0},{label:"info traffic",value:"info_traffic",showSidebar:!0},{label:"info type",value:"info_type",showSidebar:!0},{label:"info unicast",value:"info_unicast",showSidebar:!0},{label:"irr as_set",value:"irr_as_set",showSidebar:!0},{label:"looking glass",value:"looking_glass",showSidebar:!0},{label:"policy contrats",value:"policy_contrats",showSidebar:!0},{label:"policy general",value:"policy_general",showSidebar:!0},{label:"policy locations",value:"policy_locations",showSidebar:!0},{label:"policy ratio",value:"policy_ratio",showSidebar:!0},{label:"policy url",value:"policy_url",showSidebar:!0},{label:"route server",value:"route_server",showSidebar:!0}],l=[{label:"Name",value:"name",showTable:!0},{label:"Logo",value:"logo",showTable:!0},{label:"Address",value:"address",showTable:!0,showSidebar:!0},{label:"URL",value:"url",showTable:!0,showSidebar:!0},{label:"Groups",value:"networks",showSidebar:!0},{label:"Configured alerts",value:"alerts",showTable:!0},{label:"Created at",value:"rgDate",showTable:!0},{label:"Updated at",value:"uDate",showTable:!0}]},a24f:function(e,t,a){"use strict";var r=a("bb0f"),n=a.n(r);n.a},a5e0:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"c",(function(){return u})),a.d(t,"e",(function(){return d}));a("99af"),a("96cf");var r,n=a("1da1"),i=a("780a"),s=a("a4dc"),o=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,n=t._id,r="".concat(s["a"].url,"/auth/cables/permanentdelete/").concat(n),e.next=4,i["a"].delete(r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+s["a"].bearer()}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,n=t._id,r="".concat(s["a"].url,"/auth/ixps/permanentdelete/").concat(n),e.next=4,i["a"].delete(r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+s["a"].bearer()}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,n=t._id,r="".concat(s["a"].url,"/auth/cls/permanentdelete/").concat(n),e.next=4,i["a"].delete(r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+s["a"].bearer()}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,n=t._id,r="".concat(s["a"].url,"/auth/facilities/permanentdelete/").concat(n),e.next=4,i["a"].delete(r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+s["a"].bearer()}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(t){var a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.user_id,n=t._id,r="".concat(s["a"].url,"/auth/organization/permanentdelete/").concat(n),e.next=4,i["a"].delete(r,{withCredentials:!0,headers:{userid:a,Authorization:"Bearer "+s["a"].bearer()}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b636:function(e,t,a){var r=a("746f");r("asyncIterator")},b680:function(e,t,a){"use strict";var r=a("23e7"),n=a("a691"),i=a("408a"),s=a("1148"),o=a("d039"),l=1..toFixed,c=Math.floor,u=function(e,t,a){return 0===t?a:t%2===1?u(e,t-1,a*e):u(e*e,t/2,a)},d=function(e){var t=0,a=e;while(a>=4096)t+=12,a/=4096;while(a>=2)t+=1,a/=2;return t},f=l&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!o((function(){l.call({})}));r({target:"Number",proto:!0,forced:f},{toFixed:function(e){var t,a,r,o,l=i(this),f=n(e),m=[0,0,0,0,0,0],p="",h="0",g=function(e,t){var a=-1,r=t;while(++a<6)r+=e*m[a],m[a]=r%1e7,r=c(r/1e7)},b=function(e){var t=6,a=0;while(--t>=0)a+=m[t],m[t]=c(a/e),a=a%e*1e7},v=function(){var e=6,t="";while(--e>=0)if(""!==t||0===e||0!==m[e]){var a=String(m[e]);t=""===t?a:t+s.call("0",7-a.length)+a}return t};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(p="-",l=-l),l>1e-21)if(t=d(l*u(2,69,1))-69,a=t<0?l*u(2,-t,1):l/u(2,t,1),a*=4503599627370496,t=52-t,t>0){g(0,a),r=f;while(r>=7)g(1e7,0),r-=7;g(u(10,r,1),0),r=t-1;while(r>=23)b(1<<23),r-=23;b(1<<r),g(1,1),b(2),h=v()}else g(0,a),g(1<<-t,0),h=v()+s.call("0",f);return f>0?(o=h.length,h=p+(o<=f?"0."+s.call("0",f-o)+h:h.slice(0,o-f)+"."+h.slice(o-f))):h=p+h,h}})},b872:function(e,t,a){"use strict";var r=a("38d5"),n=a.n(r);n.a},bb0f:function(e,t,a){},ccb9:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return u})),a.d(t,"d",(function(){return f})),a.d(t,"e",(function(){return p})),a.d(t,"c",(function(){return g}));a("99af"),a("b0c0"),a("96cf");var r,n,i=a("1da1"),s=a("780a"),o=a("a4dc");function l(e){return c.apply(this,arguments)}function c(){return c=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,i=t.user_id,r="".concat(o["a"].url,"/cables/checkname?n=").concat(a),e.next=4,s["a"].get(r,n,{withCredentials:!0,headers:{userid:i,"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+o["a"].bearer()}});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return d=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,i=t.user_id,r="".concat(o["a"].url,"/cls/checkname?n=").concat(a),e.next=4,s["a"].get(r,n,{withCredentials:!0,headers:{userid:i,"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+o["a"].bearer()}});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)}))),d.apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return m=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,i=t.user_id,r="".concat(o["a"].url,"/ixps/checkname?n=").concat(a),e.next=4,s["a"].get(r,n,{withCredentials:!0,headers:{userid:i,"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+o["a"].bearer()}});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)}))),m.apply(this,arguments)}function p(e){return h.apply(this,arguments)}function h(){return h=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,i=t.user_id,r="".concat(o["a"].url,"/organization/checkname?n=").concat(a),e.next=4,s["a"].get(r,n,{withCredentials:!0,headers:{userid:i,"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+o["a"].bearer()}});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function g(e){return b.apply(this,arguments)}function b(){return b=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,i=t.user_id,r="".concat(o["a"].url,"/facilities/checkname?n=").concat(a),e.next=4,s["a"].get(r,n,{withCredentials:!0,headers:{userid:i,"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer "+o["a"].bearer()}});case 4:return l=e.sent,e.abrupt("return",l);case 6:case"end":return e.stop()}}),e)}))),b.apply(this,arguments)}},ce90:function(e,t,a){},ceaf:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("caad"),a("2532");var r=a("b85c"),n=[{value:1,t:["submarine","cable","subsea","terrestrial-network"]},{value:2,t:["cls"]},{value:3,t:["fac","facility","facilities","facs","datacenters","data centers"]},{value:4,t:["ixp","ixps"]},{value:5,t:[]},{value:6,t:["net","networks","network"]},{value:7,t:["org","organizations"]}];function i(e){var t,a=Object(r["a"])(n);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(i.t.includes(e))return i.value}}catch(s){a.e(s)}finally{a.f()}}},d2f3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{ref:"tableList",attrs:{"is-loading":e.loading,columns:e.columns,config:e.tableConfig,"table-data":e.tableData,pagination:!0},on:{"search-input":e.handleIxpSearch,"edit-item":e.handleEditIxp,"page-change":e.handleIxpSearch,"sort-by":e.handleIxpSearch,"delete-item":e.handleDeleteIXP}}),a("prompt-delete",{attrs:{elemnt:e.elemntType,"is-visible":e.promptDelete},on:{"delete-cancel":function(t){return e.$emit("delete-cancel")},"delete-confirm":function(t){return e.$emit("delete-confirm")}}})],1)},n=[],i=(a("4de4"),a("d3b7"),a("96cf"),a("1da1")),s=a("2909"),o=a("33b5"),l=a("9c7a"),c=a("156a"),u=a("92bd"),d=a("a5e0"),f={name:"IxpsSection",components:{TableList:c["a"],PromptDelete:function(){return a.e("chunk-2d0d6b42").then(a.bind(null,"744c"))}},data:function(){return{tableData:[],loading:!1,promptDelete:!1,tableConfig:{title:"IXPs",creation_link:"/user/section/create?id=ixps",btn_label:"Create IXPs"},columns:Object(s["a"])(l["d"]).filter((function(e){return e.showTable}))}},computed:{dark:function(){return this.$store.state.isDark},elemntType:function(){return"ixp"}},created:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.handleIxpSearch("","nameAsc",0);case 2:case"end":return t.stop()}}),t)})))()},methods:{handleEditIxp:function(e){return this.$router.push({path:"/user/section/create",query:{id:"ixps",item:e}})},handleIxpSearch:Object(o["a"])(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=i.length>2&&void 0!==i[2]?i[2]:0,this.loading=!0,e.t0=u["e"],e.next=5,this.$auth.getUserID();case 5:return e.t1=e.sent,e.t2=a,e.t3=r,e.t4=t,e.t5={user_id:e.t1,psz:!0,sortBy:e.t2,page:e.t3,s:e.t4},e.next=12,(0,e.t0)(e.t5);case 12:n=e.sent,n&&n.data&&(this.tableData=n.data),this.loading=!1;case 15:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}(),820),handleDeleteIXP:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:a.promptDelete=!0,a.$once("delete-confirm",Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t){r.next=11;break}return r.t0=u["b"],r.next=4,a.$auth.getUserID();case 4:return r.t1=r.sent,r.t2=e,r.t3={user_id:r.t1,_id:r.t2},r.next=9,(0,r.t0)(r.t3).then((function(){a.handleIxpSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 9:r.next=19;break;case 11:return r.t4=d["d"],r.next=14,a.$auth.getUserID();case 14:return r.t5=r.sent,r.t6=e,r.t7={user_id:r.t5,_id:r.t6},r.next=19,(0,r.t4)(r.t7).then((function(){a.handleIxpSearch.apply(a,Object(s["a"])(a.$refs.tableList.getTableSearchValue()))}));case 19:a.promptDelete=!1;case 20:case"end":return r.stop()}}),r)})))),a.$once("delete-cancel",Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.promptDelete=!1;case 1:case"end":return e.stop()}}),e)}))));case 3:case"end":return r.stop()}}),r)})))()}}},m=f,p=(a("3843"),a("2877")),h=Object(p["a"])(m,r,n,!1,null,"c5ea40f0",null);t["default"]=h.exports},d58f:function(e,t,a){var r=a("1c0b"),n=a("7b0b"),i=a("44ad"),s=a("50c4"),o=function(e){return function(t,a,o,l){r(a);var c=n(t),u=i(c),d=s(c.length),f=e?d-1:0,m=e?-1:1;if(o<2)while(1){if(f in u){l=u[f],f+=m;break}if(f+=m,e?f<0:d<=f)throw TypeError("Reduce of empty array with no initial value")}for(;e?f>=0:d>f;f+=m)f in u&&(l=a(l,u[f],f,c));return l}};e.exports={left:o(!1),right:o(!0)}},efae:function(e,t,a){},f5fa:function(e,t,a){"use strict";var r=[{name:"Afghanistan",code:"AF"},{name:"Åland Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People's Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People's Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia and Montenegro",code:"CS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];t["a"]=r},fc4a:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-input",class:{dark:e.dark}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"el-input__inner ",class:{"el-input--mini":"mini"===e.size},attrs:{type:"text",id:e.id},domProps:{value:e.search},on:{focus:e.geolocate,input:function(t){t.target.composing||(e.search=t.target.value)}}})])},n=[],i=(a("ac1f"),a("841c"),a("5530")),s={data:function(){return{search:"",autocomplete:void 0}},props:{value:{type:String,default:function(){return""}},mode:{type:String,default:function(){return"create"}},id:{type:String,default:function(){return"autocompleteGoogle"}},size:{type:String,default:function(){return"mini"}}},computed:{dark:function(){return this.$store.state.isDark}},mounted:function(){this.initAutocomplete(),"create"!==this.mode&&this.value&&(this.search=this.value)},methods:{initAutocomplete:function(){var e=new google.maps.places.Autocomplete(document.getElementById(this.id),{types:["geocode"]});e.setFields(["address_component"]),e.addListener("place_changed",this.fillInAddress),this.autocomplete=e},fillInAddress:function(){if(this.autocomplete)return this.$emit("place-changed",Object(i["a"])(Object(i["a"])({},this.autocomplete.getPlace()),{},{fullAddress:document.getElementById(this.id).value}))},geolocate:function(){if(navigator.geolocation){var e=this.autocomplete;navigator.geolocation.getCurrentPosition((function(t){var a=new google.maps.Circle({center:{lat:t.coords.latitude,lng:t.coords.longitude},radius:t.coords.accuracy});e.setBounds(a.getBounds())}))}}}},o=s,l=a("2877"),c=Object(l["a"])(o,r,n,!1,null,null,null);t["default"]=c.exports}}]);
//# sourceMappingURL=user-nested-routes-group.2fea3f64.js.map