{"version":3,"sources":["webpack:///./src/components/navbar/Search.vue?e11c","webpack:///./src/components/navbar/Search.vue?c4b7","webpack:///./src/config/searchCategories.js","webpack:///src/components/navbar/Search.vue","webpack:///./src/components/navbar/Search.vue?9b97","webpack:///./src/components/navbar/Search.vue","webpack:///./node_modules/vue-click-outside/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","value","expression","attrs","isResultsVisible","on","$event","staticClass","_l","searchResults","item","i","key","class","dark","light","handlePlaceSelection","type","indexOf","_k","keyCode","address","length","city","_v","_s","a","index","state","geResultType","premium","_e","r","slot","categories","loseFocus","setFocus","getQueryData","model","callback","$$v","search","$set","opt","isFocused","stopPropagation","clearSearch","staticRenderFns","searchCategories","data","computed","$store","isDark","methods","t","toLowerCase","terrestrial","close","places","selection","geometry","bbox","bounds","commit","id","$emit","_id","option","ClickOutside","component","validate","binding","console","warn","isPopup","popupItem","elements","len","contains","e","isServer","vNode","componentInstance","$isServer","module","exports","bind","el","handler","context","path","composedPath","unshift","target","__vueClickOutside__","clickHandler","document","documentElement","addEventListener","update","unbind","removeEventListener"],"mappings":"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","file":"js/chunk-e08ee444.d66622d5.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=1340618f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=style&index=0&id=1340618f&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-popover',{directives:[{name:\"click-outside\",rawName:\"v-click-outside\",value:(_vm.close),expression:\"close\"}],attrs:{\"placement\":\"bottom-start\",\"width\":\"420\",\"transition\":\"el-zoom-in-top\",\"trigger\":\"manual\",\"value\":_vm.isResultsVisible},on:{\"update:value\":function($event){_vm.isResultsVisible=$event}}},[_c('el-card',{staticClass:\"p0 no-border\",attrs:{\"shadow\":\"never\"}},[_c('ul',{staticClass:\"w-fit-full h80 no-outline no-selectable\",attrs:{\"role\":\"list\"}},[_vm._l((_vm.searchResults.r),function(item,i){return _c('li',{key:i + item,staticClass:\"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline\",class:{ dark: _vm.dark, light: !_vm.dark },attrs:{\"tabindex\":\"0\",\"role\":\"listitem\"},on:{\"click\":function($event){return _vm.handlePlaceSelection(item)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }return _vm.handlePlaceSelection(item)}}},[(\n            item.address && item.address.length && item.address[0].city !== ''\n          )?_c('div',{staticClass:\"inline-block\"},[_vm._v(\" \"+_vm._s(item.name)+\" in \"),_vm._l((item.address),function(a,index){return _c('small',{key:a.state + index},[_vm._v(\" \"+_vm._s(a.city)+\", \"+_vm._s(a.state)+\"; \")])})],2):_c('span',[_vm._v(\" \"+_vm._s(item.name)+\" \")]),_vm._v(\" - \"),_c('small',{staticClass:\"capitalize\"},[_vm._v(_vm._s(_vm.geResultType(item)))]),(item.premium && item.premium === 'true')?_c('span',{staticClass:\"w22 p1 h6 partner round flo-right vertical-align mt-2\"},[_vm._v(\" Partner \"),_c('fa',{staticClass:\"sm-icon ml2\",attrs:{\"icon\":['fas', 'star']}})],1):_vm._e()])}),(_vm.searchResults.r.length)?_c('el-divider',{staticClass:\"m0\"}):_vm._e(),_vm._l((_vm.searchResults.places),function(item,i){return _c('li',{key:i,staticClass:\"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline\",class:{ dark: _vm.dark, light: !_vm.dark },attrs:{\"tabindex\":\"0\",\"role\":\"listitem\"},on:{\"click\":function($event){return _vm.handlePlaceSelection(item)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")&&_vm._k($event.keyCode,\"space\",32,$event.key,[\" \",\"Spacebar\"])){ return null; }return _vm.handlePlaceSelection(item)}}},[_c('span',[_vm._v(\" \"+_vm._s(item.name)+\" \")])])})],2)]),_c('div',{attrs:{\"slot\":\"reference\",\"role\":\"search\"},slot:\"reference\"},[_c('el-input',{class:{ dark: _vm.dark },attrs:{\"placeholder\":(\"Search in \" + (_vm.categories.selected))},on:{\"blur\":_vm.loseFocus,\"focus\":_vm.setFocus,\"input\":_vm.getQueryData},model:{value:(_vm.search),callback:function ($$v) {_vm.search=$$v},expression:\"search\"}},[_c('el-select',{staticClass:\"w10 search-navbar-select\",attrs:{\"slot\":\"prepend\",\"id\":\"search-select-navbar\",\"placeholder\":\"\"},on:{\"change\":function($event){return _vm.getQueryData(_vm.search)}},slot:\"prepend\",model:{value:(_vm.categories.selected),callback:function ($$v) {_vm.$set(_vm.categories, \"selected\", $$v)},expression:\"categories.selected\"}},_vm._l((_vm.categories.list),function(opt,i){return _c('el-option',{key:i,attrs:{\"label\":opt,\"value\":opt}})}),1),(!_vm.isFocused)?_c('fa',{staticClass:\"xsm-icon vertical-align mt3 mr3 hidden-md-and-down\",attrs:{\"slot\":\"suffix\",\"icon\":['fas', 'caret-down']},slot:\"suffix\"}):_c('fa',{staticClass:\"xsm-icon vertical-align mt3 mr3\",attrs:{\"slot\":\"suffix\",\"icon\":['fas', 'caret-up']},slot:\"suffix\"}),_c('fa',{staticClass:\"xsm-icon vertical-align mt3 mr2\",attrs:{\"slot\":\"suffix\",\"icon\":['fas', 'times']},on:{\"click\":function($event){$event.stopPropagation();return _vm.clearSearch($event)}},slot:\"suffix\"})],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const searchCategories = [\n  'All',\n  'CLS',\n  'IXPs',\n  'Cables',\n  'Terrestrial',\n  'Facilities',\n  'Connections',\n  'Organizations'\n]\nexport default searchCategories\n","<template>\n  <el-popover\n    placement=\"bottom-start\"\n    width=\"420\"\n    transition=\"el-zoom-in-top\"\n    trigger=\"manual\"\n    v-click-outside=\"close\"\n    :value.sync=\"isResultsVisible\"\n  >\n    <el-card class=\"p0 no-border\" shadow=\"never\">\n      <ul role=\"list\" class=\"w-fit-full h80 no-outline no-selectable\">\n        <li\n          v-for=\"(item, i) in searchResults.r\"\n          :key=\"i + item\"\n          tabindex=\"0\"\n          role=\"listitem\"\n          :class=\"{ dark, light: !dark }\"\n          class=\"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline\"\n          @click=\"handlePlaceSelection(item)\"\n          @keyup.enter.space=\"handlePlaceSelection(item)\"\n        >\n          <div\n            v-if=\"\n              item.address && item.address.length && item.address[0].city !== ''\n            \"\n            class=\"inline-block\"\n          >\n            {{ item.name }} in\n            <small v-for=\"(a, index) in item.address\" :key=\"a.state + index\">\n              {{ a.city }}, {{ a.state }};\n            </small>\n          </div>\n          <span v-else>\n            {{ item.name }}\n          </span>\n          -\n          <small class=\"capitalize\">{{ geResultType(item) }}</small>\n          <span\n            v-if=\"item.premium && item.premium === 'true'\"\n            class=\"w22 p1 h6 partner round flo-right vertical-align mt-2\"\n          >\n            Partner\n            <fa :icon=\"['fas', 'star']\" class=\"sm-icon ml2\" />\n          </span>\n        </li>\n        <el-divider class=\"m0\" v-if=\"searchResults.r.length\" />\n        <li\n          v-for=\"(item, i) in searchResults.places\"\n          :key=\"i\"\n          tabindex=\"0\"\n          role=\"listitem\"\n          :class=\"{ dark, light: !dark }\"\n          class=\"pt2 pb2 pr5 pl5 cursor-pointer seamless-hoverbg no-outline\"\n          @click=\"handlePlaceSelection(item)\"\n          @keyup.enter.space=\"handlePlaceSelection(item)\"\n        >\n          <span>\n            {{ item.name }}\n          </span>\n        </li>\n      </ul>\n    </el-card>\n    <div slot=\"reference\" role=\"search\">\n      <el-input\n        :placeholder=\"`Search in ${categories.selected}`\"\n        :class=\"{ dark }\"\n        v-model=\"search\"\n        @blur=\"loseFocus\"\n        @focus=\"setFocus\"\n        @input=\"getQueryData\"\n      >\n        <el-select\n          v-model=\"categories.selected\"\n          id=\"search-select-navbar\"\n          slot=\"prepend\"\n          class=\"w10 search-navbar-select\"\n          placeholder\n          @change=\"getQueryData(search)\"\n        >\n          <el-option\n            v-for=\"(opt, i) in categories.list\"\n            :key=\"i\"\n            :label=\"opt\"\n            :value=\"opt\"\n          />\n        </el-select>\n        <fa\n          v-if=\"!isFocused\"\n          slot=\"suffix\"\n          :icon=\"['fas', 'caret-down']\"\n          class=\"xsm-icon vertical-align mt3 mr3 hidden-md-and-down\"\n        />\n        <fa\n          v-else\n          slot=\"suffix\"\n          :icon=\"['fas', 'caret-up']\"\n          class=\"xsm-icon vertical-align mt3 mr3\"\n        />\n        <fa\n          slot=\"suffix\"\n          :icon=\"['fas', 'times']\"\n          class=\"xsm-icon vertical-align mt3 mr2\"\n          @click.stop=\"clearSearch\"\n        />\n      </el-input>\n    </div>\n  </el-popover>\n</template>\n\n<script>\nimport { bus } from '../../helpers/eventBus'\nimport debounce from '../../helpers/debounce'\nimport { MAP_BOUNDS } from '../../store/actionTypes/map'\nimport { FOCUS_ON, SEARCH_SELECTION } from '../../events'\nimport searchCategories from '../../config/searchCategories'\nimport ClickOutside from 'vue-click-outside'\n\nexport default {\n  data: () => ({\n    search: '',\n    categories: {\n      list: searchCategories,\n      selected: 'All'\n    },\n    isFocused: false,\n    searchResults: {\n      r: [],\n      places: []\n    },\n    isResultsVisible: false\n  }),\n  computed: {\n    dark() {\n      return this.$store.state.isDark\n    }\n  },\n  methods: {\n    getQueryData: debounce(async function(search) {\n      if (search.length <= 1) return\n      const res = await this.$store.dispatch('getSearchQueryData', {\n        s: search,\n        type: this.categories.selected\n      })\n      const places = await this.$store.dispatch(\n        'getSearchQueryDataMapbox',\n        search\n      )\n\n      Array.from(places.features).forEach(\n        place => (place.name = place.place_name)\n      )\n\n      if (res && res.data.length) {\n        this.searchResults.r = res.data.filter(i => i)\n      }\n\n      this.searchResults.places = places.features\n      this.isResultsVisible = true\n    }, 820),\n    geResultType(item) {\n      if (item.t.toLowerCase() === 'cable') {\n        return item.terrestrial ? 'terrestrial network' : 'subsea cable'\n      } else return item.t\n    },\n    close() {\n      this.searchResults = {\n        r: [],\n        places: []\n      }\n      this.isResultsVisible = false\n    },\n    loseFocus() {\n      this.isFocused = false\n      // this.isResultsVisible = false\n    },\n    clearSearch() {\n      this.search = ''\n      this.close()\n    },\n    setFocus() {\n      this.isFocused = true\n    },\n    handlePlaceSelection(selection) {\n      // If the selection has geometry it's a city\n      if (selection.geometry) {\n        let bounds = []\n\n        if (selection.bbox) {\n          bounds = selection.bbox\n        } else if (selection.center) {\n          bounds = [...selection.center, ...selection.center]\n        }\n\n        if (bounds.length) this.$store.commit(`${MAP_BOUNDS}`, bounds)\n        bus.$emit(FOCUS_ON, {\n          id: selection.id,\n          type: 'city'\n        })\n      } else {\n        // Otherwise if must be an org/facility/datacenter, etc...\n        this.$emit(SEARCH_SELECTION, {\n          id: selection.id ? selection.id : selection._id,\n          option: selection.type\n            ? selection.type\n            : selection.t && selection.t === 'groups'\n            ? 'networks'\n            : selection.t\n        })\n      }\n\n      this.close()\n    }\n  },\n  directives: {\n    ClickOutside\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import '../../assets/scss/components/search-styles.scss';\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Search.vue?vue&type=template&id=1340618f&scoped=true&\"\nimport script from \"./Search.vue?vue&type=script&lang=js&\"\nexport * from \"./Search.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Search.vue?vue&type=style&index=0&id=1340618f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1340618f\",\n  null\n  \n)\n\nexport default component.exports","function validate(binding) {\n  if (typeof binding.value !== 'function') {\n    console.warn('[Vue-click-outside:] provided expression', binding.expression, 'is not a function.')\n    return false\n  }\n\n  return true\n}\n\nfunction isPopup(popupItem, elements) {\n  if (!popupItem || !elements)\n    return false\n\n  for (var i = 0, len = elements.length; i < len; i++) {\n    try {\n      if (popupItem.contains(elements[i])) {\n        return true\n      }\n      if (elements[i].contains(popupItem)) {\n        return false\n      }\n    } catch(e) {\n      return false\n    }\n  }\n\n  return false\n}\n\nfunction isServer(vNode) {\n  return typeof vNode.componentInstance !== 'undefined' && vNode.componentInstance.$isServer\n}\n\nexports = module.exports = {\n  bind: function (el, binding, vNode) {\n    if (!validate(binding)) return\n\n    // Define Handler and cache it on the element\n    function handler(e) {\n      if (!vNode.context) return\n\n      // some components may have related popup item, on which we shall prevent the click outside event handler.\n      var elements = e.path || (e.composedPath && e.composedPath())\n      elements && elements.length > 0 && elements.unshift(e.target)\n\n      if (el.contains(e.target) || isPopup(vNode.context.popupItem, elements)) return\n\n      el.__vueClickOutside__.callback(e)\n    }\n\n    // add Event Listeners\n    el.__vueClickOutside__ = {\n      handler: handler,\n      callback: binding.value\n    }\n    const clickHandler = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\n    !isServer(vNode) && document.addEventListener(clickHandler, handler)\n  },\n\n  update: function (el, binding) {\n    if (validate(binding)) el.__vueClickOutside__.callback = binding.value\n  },\n\n  unbind: function (el, binding, vNode) {\n    // Remove Event Listeners\n    const clickHandler = 'ontouchstart' in document.documentElement ? 'touchstart' : 'click';\n    !isServer(vNode) && el.__vueClickOutside__ && document.removeEventListener(clickHandler, el.__vueClickOutside__.handler)\n    delete el.__vueClickOutside__\n  }\n}\n"],"sourceRoot":""}