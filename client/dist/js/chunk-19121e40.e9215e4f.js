(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-19121e40"],{5484:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return c})),r.d(t,"e",(function(){return m})),r.d(t,"b",(function(){return f}));r("99af"),r("96cf");var a,n,s=r("1da1"),i=r("780a"),u=r("a4dc"),o=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,s,o,l,c,m,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.t,s=t.elemnt,o=t.issue,l=t.email,c=t.phone,m=t.user_id,a="".concat(u["a"].url,"/issues/report"),n=new FormData,n.append("t",r),n.append("email",l),n.append("phone",c.num),n.append("elemnt",s),n.append("issue",o),e.next=10,i["a"].post(a,n,{withCredentials:!0,headers:{userid:m,Authorization:"Bearer "+u["a"].bearer()}});case 10:return f=e.sent,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.page,n=t.user_id,a="".concat(u["a"].url,"/auth/issues/reports?page=").concat(r),e.next=4,i["a"].get(a,{withCredentials:!0,headers:{userid:n,Authorization:"Bearer "+u["a"].bearer()}});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.page,n=t.user_id,a="".concat(u["a"].url,"/auth/issues/myreports?page=").concat(r),e.next=4,i["a"].get(a,{withCredentials:!0,headers:{userid:n,Authorization:"Bearer "+u["a"].bearer()}});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.elemnt,n=t.id,s=t.user_id,a="".concat(u["a"].url,"/auth/issues/view/").concat(r,"/").concat(n),e.next=4,i["a"].get(a,{withCredentials:!0,headers:{userid:s,Authorization:"Bearer "+u["a"].bearer()}});case 4:return o=e.sent,e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.id,n=t.user_id,a="".concat(u["a"].url,"/auth/issues/delete/").concat(r),e.next=4,i["a"].delete(a,{withCredentials:!0,headers:{userid:n,Authorization:"Bearer "+u["a"].bearer()}});case 4:return s=e.sent,e.abrupt("return",s);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"8a53":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{attrs:{visible:e.isVisible,width:"80%",top:"28vh","custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isVisible=t}}},[r("header",{staticClass:"header p0 no-selectable",attrs:{slot:"title"},slot:"title"},[r("h1",{staticClass:"inline-block font-semibold fs-xlarge"},[e._v("Report your issue")])]),r("el-form",{ref:"form",staticClass:"pr6 pl6",attrs:{model:e.form,rules:e.formRules}},[r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Full Name",prop:"name"}},[r("el-input",{class:{dark:e.dark},model:{value:e.form.fullname,callback:function(t){e.$set(e.form,"fullname",t)},expression:"form.fullname"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Phone number"}},[r("div",{staticClass:"el-input"},[r("i-phone-input",{staticClass:"m0 p0 el-input__inner",attrs:{inputClasses:"el-input__inner issues-dialog"},on:{onInput:e.validatePhoneNumber},model:{value:e.form.phone.num,callback:function(t){e.$set(e.form.phone,"num",t)},expression:"form.phone.num"}})],1),r("el-collapse-transition",[e.form.phone.num&&!e.form.phone.valid?r("el-alert",{staticClass:"mt2 h8",attrs:{type:"error","show-icon":"",title:"This phone number is not valid",closable:!1}}):e._e()],1)],1)],1)],1),r("el-row",{attrs:{gutter:15}},[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Email",prop:"email"}},[r("el-input",{class:{dark:e.dark},attrs:{type:"email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"Issue",prop:"issue"}},[r("el-input",{class:{dark:e.dark},attrs:{type:"textarea"},model:{value:e.form.issue,callback:function(t){e.$set(e.form,"issue",t)},expression:"form.issue"}})],1)],1),r("el-col",{attrs:{span:24}},[r("vue-recaptcha",{ref:"catpcha",attrs:{sitekey:e.siteKey,loadRecaptchaScript:!0},on:{verify:e.handleCatchaVerification,error:function(){return e.catchaVerified=!1},expired:function(){return e.catchaVerified=!1}}})],1)],1)],1),r("footer",{staticClass:"footer flex justify-content-space-between pr0 pl6 mt4"},[r("small",{staticClass:"inline-block mt2"},[r("span",{staticClass:"text-red"},[e._v("*")]),e._v(" indicates required field ")]),r("div",[r("el-button",{staticClass:"mr2",attrs:{plain:"",type:"info"},on:{click:e.closeDialog}},[e._v("Cancel")]),r("el-button",{staticClass:"w24",attrs:{disabled:e.isFormUncomplete,type:"primary",plain:"",loading:e.isSendingData},on:{click:function(t){return e.submitForm("form")},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.submitForm("form")}}},[e._v("Report")])],1)])],1)},n=[],s=(r("4de4"),r("d81d"),r("b0c0"),r("b64b"),r("5530")),i=(r("96cf"),r("1da1")),u=r("0316"),o=r("5484"),l=r("9a1e"),c=r("ceaf"),m=r("e096"),f=r("1b83"),p=r("ddbf"),d={components:{VueRecaptcha:m["default"]},data:function(){return{siteKey:f["a"],loading:!1,isSendingData:!1,catchaVerified:null,form:{email:"",issue:"",phone:{num:"",valid:null},fullname:""},formRules:{phone:[],lastname:[{required:!0,message:"Please input your full name",trigger:"blur"}],email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",required:!0,message:"Please input a valid email",trigger:"change"}],issue:[{required:!0,message:"Please input the issue",trigger:["blur","change"]},{min:10,message:"Issue length should be at least 10",trigger:"blur"}]}}},computed:{isVisible:{get:function(){return this.$store.state.isIssueDialog},set:function(){return this.closeDialog()}},dark:function(){return this.$store.state.isDark},isFormUncomplete:function(){var e=this,t=Object.keys(this.form).filter((function(t){return!e.form[t]}));return!(!t.length&&this.catchaVerified)},customDialogClass:function(){return this.dark?"custom-dialog dark":"custom-dialog light"}},watch:{isVisible:function(e){if(!e)return this.$refs.catpcha.reset();this.setUserData()}},methods:{handleCatchaVerification:function(e){e&&(this.catchaVerified=!0)},setUserData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.$auth.user){t.next=2;break}return t.abrupt("return");case 2:return e.loading=!0,t.t0=l["b"],t.next=6,e.$auth.getUserID();case 6:return t.t1=t.sent,t.next=9,(0,t.t0)(t.t1);case 9:r=t.sent,r&&(a=r.user_metadata,e.form.fullname=a&&a.name?a.name:Object(p["a"])(r.name)?"":r.name,e.form.email=a&&a.email?a.email:r.email,e.form.phone=a&&a.phonenumber?a.phonenumber:{num:"",valid:null}),e.loading=!1;case 12:case"end":return t.stop()}}),t)})))()},sendIssueRequest:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$store.state.map.focus,e.isSendingData=!0,t.t0=o["a"],t.t1=s["a"],t.t2=s["a"],t.next=7,e.$auth.getUserID();case 7:return t.t3=t.sent,t.t4={user_id:t.t3},t.t5=e.form,t.t6=(0,t.t2)(t.t4,t.t5),t.t7={},t.t8={elemnt:r.id,t:Object(c["a"])(r.type)},t.t9=(0,t.t1)(t.t6,t.t7,t.t8),t.next=16,(0,t.t0)(t.t9);case 16:a=t.sent,e.isSendingData=!1,a&&"error"!==a.t&&e.closeDialog();case 19:case"end":return t.stop()}}),t)})))()},validatePhoneNumber:function(e){var t=e.number,r=e.isValid;this.form.phone={num:t,valid:r}},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;t.sendIssueRequest()}))},closeDialog:function(){this.$store.commit("".concat(u["l"]),!1),this.$refs.form.resetFields(),this.form={email:"",issue:"",phone:{num:"",valid:null},fullname:""}}}},h=d,b=r("2877"),g=Object(b["a"])(h,a,n,!1,null,null,null);t["default"]=g.exports},ceaf:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));r("caad"),r("2532");var a=r("b85c"),n=[{value:1,t:["submarine","cable","subsea","terrestrial-network","subsea-cable"]},{value:2,t:["cls"]},{value:3,t:["fac","facility","facilities","facs","datacenters","data centers","data-center"]},{value:4,t:["ixp","ixps"]},{value:5,t:[]},{value:6,t:["net","networks","network"]},{value:7,t:["org","organizations"]}];function s(e){var t,r=Object(a["a"])(n);try{for(r.s();!(t=r.n()).done;){var s=t.value;if(s.t.includes(e))return s.value}}catch(i){r.e(i)}finally{r.f()}}},ddbf:function(e,t,r){"use strict";function a(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(String(e).toLowerCase())}r.d(t,"a",(function(){return a}))}}]);
//# sourceMappingURL=chunk-19121e40.e9215e4f.js.map