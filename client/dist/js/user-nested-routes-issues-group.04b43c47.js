(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-nested-routes-issues-group"],{1420:function(e,t,a){"use strict";var r=a("f2de"),n=a.n(r);n.a},"156a":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-fit-full flex row wrap justify-self-center"},[a("header",{staticClass:"flex w-fit-full p2 row nowrap justify-content-space-between"},[a("h1",{staticClass:"title-user color-inherit"},[e.returnLink.visible?a("router-link",{attrs:{to:e.returnLink.url}},[a("fa",{staticClass:"fs-regular mr2 mb1",attrs:{icon:["fas","arrow-left"]}})],1):e._e(),e._v(" "+e._s(e.config.title)+" ")],1),e.canCreate?a("el-button",{staticClass:"capitalize",attrs:{type:"warning",round:""},on:{click:e.handleRoute}},[e._v(" "+e._s(e.config.btn_label)+" ")]):e._e()],1),a("el-divider"),a("el-card",{staticClass:"w-fit-full",attrs:{shadow:"never"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.isLoading,expression:"isLoading"}],attrs:{"row-class-name":e.tableRowClassName,data:e.tableData,"max-height":"500"}},[e._l(e.columns,(function(t,r){return a("el-table-column",{key:r,attrs:{label:t.label},scopedSlots:e._u([{key:"default",fn:function(r){return[Array.isArray(r.row[t.value])&&r.row[t.value].length?e._l(r.row[t.value],(function(r,n){return a("div",{key:n},[r.city?[e._v(" City: "+e._s(r.city)+" ")]:e._e(),a("br"),r.street?[e._v(" Street: "+e._s(r.street)+" ")]:"websites"==t.value||"cables"==t.value||"cls"==t.value||"facilities"==t.value?a("el-tag",{attrs:{size:"small",title:r.name||r}},[e._v(" "+e._s(r.name?r.name:r)+" ")]):a("el-tag",{attrs:{size:"small",title:r.fullAddress}},[e._v(" "+e._s(r.fullAddress?r.fullAddress:r)+" ")])],2)})):"logo"==t.value?a("el-image",{staticClass:"w12 h12 circle",attrs:{fit:"cover",src:r.row[t.value]}}):"name"==t.value?a("div",[e._v(" "+e._s(r.row[t.value])+" "),r.row.deleted?a("el-tag",{attrs:{type:"danger",size:"mini"}},[e._v(" Deleted ")]):e._e()],1):"alerts"==t.value?[r.row[t.value]?a("span",{staticClass:"cursor-pointer",on:{click:function(t){return e.handleSendMessage(r.row)}}},[e._v(" "+e._s(""+r.row[t.value])+" ")]):a("span",[e._v(" 0 ")])]:(t.value.includes("activationDateTime")||t.value.includes("rgDate")||t.value.includes("uDate"))&&r.row[t.value]?a("span",[e._v(" "+e._s(e.formatDate(r.row[t.value]))+" ")]):Array.isArray(r.row[t.value])||"object"==typeof r.row[t.value]||"undefined"==typeof r.row[t.value]?e._e():a("span",[e._v(" "+e._s(""+r.row[t.value])+" ")])]}}],null,!0)})})),a("el-table-column",{attrs:{fixed:"right",label:"Operations",width:e.canSearch?320:90},scopedSlots:e._u([{key:"header",fn:function(t){return e.canSearch?[a("div",{staticClass:"table-list__searchbar",staticStyle:{display:"flex","flex-flow":"row nowrap",padding:"0"}},[a("el-select",{staticClass:"mr2 w70",class:{dark:e.dark},staticStyle:{padding:"0"},attrs:{id:"sortBy",size:"mini",placeholder:""},on:{change:function(t){return e.$emit("sort-by",e.tableSearch,t,e.paginationPage)}},model:{value:e.sortBy,callback:function(t){e.sortBy=t},expression:"sortBy"}},e._l(e.sortList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.text,value:e.value}})})),1),a("el-input",{key:t.index,class:{dark:e.dark},attrs:{size:"mini",clearable:"",placeholder:"Type to search by "+e.sortBy},on:{clear:function(t){return e.$emit("clear-search-input","",e.sortBy,e.paginationPage)},input:function(t){return e.$emit("search-input",t,e.sortBy,e.paginationPage)}},model:{value:e.tableSearch,callback:function(t){e.tableSearch=t},expression:"tableSearch"}})],1)]:void 0}},{key:"default",fn:function(t){return[a("div",{staticClass:"flex row nowrap justify-content-center"},[e.canEdit?a("el-button",{staticClass:"p2 mr4 fs-regular",attrs:{plain:"",size:"small"},on:{click:function(a){return e.$emit("edit-item",t.row._id)}}},[a("fa",{attrs:{icon:["fas","pen"]}})],1):e._e(),e.canView?a("el-button",{staticClass:"p2 mr4 fs-regular",attrs:{plain:"",size:"small"},on:{click:function(a){return e.$emit("view-item",t.row._id)}}},[a("fa",{attrs:{icon:["fas","eye"]}})],1):e._e(),e.canDelete&&!t.row.deleted?a("el-button",{staticClass:"p2 fs-regular",attrs:{type:"danger",size:"small"},on:{click:function(a){return e.$emit("delete-item",t.row.idReport?t.row.idReport:t.row.idMessage?t.row.idMessage:t.row._id,t.row.deleted)}}},[a("fa",{attrs:{icon:e.deleteIcon}})],1):e._e()],1)]}}],null,!0)})],2)],1),e.pagination?a("div",{staticClass:"w-fit-full flex justify-content-center mt8"},[a("el-pagination",{attrs:{layout:"prev, next","current-page":e.paginationPage},on:{"update:currentPage":function(t){e.paginationPage=t},"update:current-page":function(t){e.paginationPage=t},"current-change":function(t){return e.$emit("page-change",e.tableSearch,e.sortBy,t)}}})],1):e._e()],1)},n=[],i=(a("b64b"),a("5530")),s=a("2c8b"),u={name:"TableList",props:{sortList:{type:Array,default:function(){return[{text:"Name Asc",value:"nameAsc"},{text:"Name Desc",value:"nameDesc"},{text:"Created at Asc",value:"creatAtAsc"},{text:"Created at Desc",value:"creatAtDesc"},{text:"Updated at Asc",value:"updateAtAsc"},{text:"Updated at Desc",value:"updateAtDesc"}]}},columns:{type:Array,required:!0},config:{type:Object,required:!0},tableData:{type:Array,required:!0},admittedKeys:{type:Array,default:function(){return[]}},pagination:{type:Boolean,default:function(){return!1}},canEdit:{type:Boolean,default:function(){return!0}},canSearch:{type:Boolean,default:function(){return!0}},isLoading:{type:Boolean,default:function(){return!1}},canView:{type:Boolean,default:function(){return!1}},canCreate:{type:Boolean,default:function(){return!0}},canDelete:{type:Boolean,default:function(){return!0}},deleteIcon:{type:Array,default:function(){return["fas","trash"]}},rowClasses:{type:Array,default:function(){return[]}},returnLink:{type:Object,default:function(){return{visible:!1,url:""}}}},data:function(){return{formatDate:s["a"],sortBy:"nameAsc",tableSearch:"",paginationPage:0}},computed:{dark:function(){return this.$store.state.isDark}},methods:{getTableSearchValue:function(){return[void 0!=this.tableSearch?this.tableSearch:"",this.sortBy,this.paginationPage]},getKeys:function(e){return e.length?Object.keys(e[0]).sort():[]},tableRowClassName:function(e){var t=e.row;return this.rowClasses.length>0&&String(t[this.rowClasses[0]])==this.rowClasses[2]?this.rowClasses[1]:""},handleRoute:function(){return this.config.creation_link?this.$router.push(this.config.creation_link):this.$emit("btn-click")},handleSendMessage:function(e){return this.$emit("alert-message",Object(i["a"])({},e))}}},c=u,o=a("2877"),l=Object(o["a"])(c,r,n,!1,null,null,null);t["a"]=l.exports},5484:function(e,t,a){"use strict";a.d(t,"a",(function(){return c})),a.d(t,"c",(function(){return o})),a.d(t,"d",(function(){return l})),a.d(t,"e",(function(){return d})),a.d(t,"b",(function(){return f}));a("99af"),a("96cf");var r,n,i=a("1da1"),s=a("780a"),u=a("a4dc"),c=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,i,c,o,l,d,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.t,i=t.elemnt,c=t.issue,o=t.email,l=t.phone,d=t.user_id,r="".concat(u["a"].url,"/issues/report"),n=new FormData,n.append("t",a),n.append("email",o),n.append("phone",l.num),n.append("elemnt",i),n.append("issue",c),e.next=10,s["a"].post(r,n,{withCredentials:!0,headers:{userid:d,Authorization:"Bearer "+u["a"].bearer()}});case 10:return f=e.sent,e.abrupt("return",f);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.page,n=t.user_id,r="".concat(u["a"].url,"/auth/issues/reports?page=").concat(a),e.next=4,s["a"].get(r,{withCredentials:!0,headers:{userid:n,Authorization:"Bearer "+u["a"].bearer()}});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.page,n=t.user_id,r="".concat(u["a"].url,"/auth/issues/myreports?page=").concat(a),e.next=4,s["a"].get(r,{withCredentials:!0,headers:{userid:n,Authorization:"Bearer "+u["a"].bearer()}});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,i,c;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.elemnt,n=t.id,i=t.user_id,r="".concat(u["a"].url,"/auth/issues/view/").concat(a,"/").concat(n),e.next=4,s["a"].get(r,{withCredentials:!0,headers:{userid:i,Authorization:"Bearer "+u["a"].bearer()}});case 4:return c=e.sent,e.abrupt("return",c);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.id,n=t.user_id,r="".concat(u["a"].url,"/auth/issues/delete/").concat(a),e.next=4,s["a"].delete(r,{withCredentials:!0,headers:{userid:n,Authorization:"Bearer "+u["a"].bearer()}});case 4:return i=e.sent,e.abrupt("return",i);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"5cb6":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex row wrap align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{attrs:{"is-loading":e.loading,"can-edit":!1,columns:e.columns,config:e.issuesConf,"can-view":!0,"can-create":!1,"table-data":e.tableData,"return-link":e.returnLink,"row-classes":["viewed","light-yellow-bg","true"]},on:{"view-item":e.viewSelectedIssue,"delete-item":e.deleteIssues}}),a("div",{staticClass:"flex w-fit-full align-items-center justify-content-center"},[a("el-pagination",{attrs:{"current-page":e.currentPage,layout:"prev, next"},on:{"current-change":e.getMyIssuesList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),a("view-data-dialog",{attrs:{"is-visible":e.isViewDialog,data:e.issueOnView,"accepted-keys":["rgDate","issue","email","phone"]},on:{close:function(){return e.isViewDialog=!1}}})],1)},n=[],i=(a("4de4"),a("d3b7"),a("96cf"),a("1da1")),s=a("5484"),u=a("156a"),c={components:{TableList:u["a"],ViewDataDialog:function(){return a.e("chunk-54a8b4a5").then(a.bind(null,"1269"))}},data:function(){return{tableData:[],loading:!1,isDialog:!1,currentPage:0,mode:"create",issuesConf:{title:"Issues reported",creation_link:!1,btn_label:!1},isViewDialog:!1,issueOnView:{name:"",phone:"",email:""},columns:[{label:"Name",value:"name"},{label:"Register date",value:"rgDate"},{label:"Type",value:"t"},{label:"Element status",value:"elemntStatus"},{label:"Update date",value:"uDate"}]}},computed:{dark:function(){return this.$store.state.isDark},returnLink:function(){return{visible:!0,url:"/user/section/issues"}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMyIssuesList();case 2:case"end":return t.stop()}}),t)})))()},methods:{getMyIssuesList:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:t.currentPage,t.loading=!0,a.t0=s["d"],a.t1=r,a.next=6,t.$auth.getUserID();case 6:return a.t2=a.sent,a.t3={page:a.t1,user_id:a.t2},a.next=10,(0,a.t0)(a.t3);case 10:n=a.sent,n&&n.data&&n.data.r&&(t.tableData=n.data.r),t.loading=!1;case 13:case"end":return a.stop()}}),a)})))()},viewSelectedIssue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n,i,u;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.loading=!0,r=t.tableData.filter((function(t){return t._id===e}))[0],!r){a.next=19;break}return a.t1=s["e"],a.t2=r.t,a.t3=r.idReport,a.next=8,t.$auth.getUserID();case 8:return a.t4=a.sent,a.t5={elemnt:a.t2,id:a.t3,user_id:a.t4},a.next=12,(0,a.t1)(a.t5);case 12:if(a.t0=a.sent,a.t0){a.next=15;break}a.t0={data:{issueData:null}};case 15:n=a.t0,i=n.data.r,u=void 0===i?{}:i,u&&u.length?(t.issueOnView=u[0],t.isViewDialog=!0):t.$notify({title:"Something wrong happened...",message:"There was an error trying to load this issue",type:"info"});case 19:t.loading=!1;case 20:case"end":return a.stop()}}),a)})))()},viewedClass:function(e){var t=e.row;return t.viewed?"light-yellow-bg":""},deleteIssues:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("Are you sure you want to delete this reported issue. This action is irreversible","Please confirm to continue").then(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=s["b"],a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,id:a.t2},a.next=8,(0,a.t0)(a.t3).then((function(){return t.getMyIssuesList()}));case 8:case"end":return a.stop()}}),a)})))).catch((function(){}));case 2:return a.abrupt("return",a.sent);case 3:case"end":return a.stop()}}),a)})))()}}},o=c,l=(a("1420"),a("2877")),d=Object(l["a"])(o,r,n,!1,null,"8b2efc12",null);t["default"]=d.exports},dd19:function(e,t,a){"use strict";var r=a("fcad"),n=a.n(r);n.a},f2de:function(e,t,a){},f374:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-wrapper w-fit-full mt12 pt8 vph-full pl4 pr4 flex row wrap align-items-start",class:{dark:e.dark,light:!e.dark}},[a("table-list",{attrs:{"is-loading":e.loading,"can-edit":!1,columns:e.columns,config:e.issuesConf,"table-data":e.tableData,"can-view":!0,"can-search":!1,"row-classes":["viewed","light-yellow-bg","true"]},on:{"view-item":e.viewSelectedIssue,"delete-item":e.deleteIssues}}),a("div",{staticClass:"flex w-fit-full align-items-center justify-content-center"},[a("el-pagination",{attrs:{"current-page":e.currentPage,layout:"prev, next",total:e.totalPages},on:{"current-change":e.getIssuesList,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t}}})],1),a("view-data-dialog",{attrs:{"is-visible":e.isViewDialog,data:e.issueOnView,"accepted-keys":["rgDate","issue","email","phone"]},on:{close:function(){return e.isViewDialog=!1}}})],1)},n=[],i=(a("4de4"),a("d3b7"),a("96cf"),a("1da1")),s=a("156a"),u=a("5484"),c={components:{TableList:s["a"],ViewDataDialog:function(){return a.e("chunk-54a8b4a5").then(a.bind(null,"1269"))}},data:function(){return{tableData:[],loading:!1,isDialog:!1,currentPage:0,isViewDialog:!1,mode:"create",issuesConf:{title:"Issues",creation_link:"/user/section/issues-reported",btn_label:"View my issues"},issueOnView:{name:"",phone:"",email:""},columns:[{label:"Name",value:"name"},{label:"Register date",value:"rgDate"},{label:"Update date",value:"uDate"}]}},computed:{totalPages:function(){return 20},dark:function(){return this.$store.state.isDark}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getIssuesList();case 2:case"end":return t.stop()}}),t)})))()},methods:{getIssuesList:function(){var e=arguments,t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:t.currentPage,t.loading=!0,a.t0=u["c"],a.t1=r,a.next=6,t.$auth.getUserID();case 6:return a.t2=a.sent,a.t3={page:a.t1,user_id:a.t2},a.next=10,(0,a.t0)(a.t3);case 10:n=a.sent,n&&n.data&&n.data.r&&(t.tableData=n.data.r),t.loading=!1;case 13:case"end":return a.stop()}}),a)})))()},viewSelectedIssue:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.loading=!0,r=t.tableData.filter((function(t){return t._id===e}))[0],!r){a.next=14;break}return a.t0=u["e"],a.t1=r.t,a.t2=r.idReport,a.next=8,t.$auth.getUserID();case 8:return a.t3=a.sent,a.t4={elemnt:a.t1,id:a.t2,user_id:a.t3},a.next=12,(0,a.t0)(a.t4);case 12:n=a.sent;try{t.issueOnView=n.data.r[0],t.isViewDialog=!0}catch(i){}case 14:t.loading=!1;case 15:case"end":return a.stop()}}),a)})))()},deleteIssues:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,t.$confirm("Are you sure you want to delete this organization. This action is irreversible","Please confirm to continue").then(Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.t0=u["b"],a.next=3,t.$auth.getUserID();case 3:return a.t1=a.sent,a.t2=e,a.t3={user_id:a.t1,id:a.t2},a.next=8,(0,a.t0)(a.t3).then((function(){return t.getIssuesList()}));case 8:case"end":return a.stop()}}),a)})))).catch((function(){}));case 2:case"end":return a.stop()}}),a)})))()}}},o=c,l=(a("dd19"),a("2877")),d=Object(l["a"])(o,r,n,!1,null,"07e3708e",null);t["default"]=d.exports},fcad:function(e,t,a){}}]);
//# sourceMappingURL=user-nested-routes-issues-group.04b43c47.js.map