(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c0a53"],{4353:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{visible:e.isVisible,width:"40%",top:"12vh","custom-class":e.customDialogClass,"close-on-click-modal":!1},on:{"update:visible":function(t){e.isVisible=t}}},[s("header",{staticClass:"header p0 no-selectable",attrs:{slot:"title"},slot:"title"},[s("h1",{staticClass:"inline-block font-semibold fs-xlarge"},[s("span",{staticClass:"capitalize"},[e._v("Send Message")])])]),s("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",staticClass:"pr2 pl2"},[s("el-form-item",{attrs:{label:"Subject"}},[s("el-input",{class:{dark:e.dark},model:{value:e.form.subject,callback:function(t){e.$set(e.form,"subject",t)},expression:"form.subject"}})],1)],1),s("editor-html",{attrs:{reset:!e.isVisible},on:{"msg-change":e.handleMessageChange}}),s("footer",{staticClass:"footer flex wrap justify-content-end pr0 pl6"},[s("div",[s("el-button",{staticClass:"mr2",attrs:{plain:"",type:"info"},on:{click:e.closeDialog}},[e._v("Cancel")]),s("el-button",{attrs:{disabled:e.isFormUncomplete,type:"primary",plain:"",loading:e.isSendingData},on:{click:e.submitForm,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")&&e._k(t.keyCode,"space",32,t.key,[" ","Spacebar"])?null:e.submitForm(t)}}},[e._v("Send message")])],1)])],1)},a=[],i=(s("4de4"),s("d81d"),s("b64b"),s("d3b7"),s("4c53"),s("96cf"),s("1da1")),o=s("5530"),r=s("2f62"),c=s("3b79"),l=s("39a1"),u=s("0316"),d={components:{"editor-html":function(){return s.e("chunk-1fd7458f").then(s.bind(null,"9556"))}},data:function(){return{isSendingData:!1,loading:!1,form:{subject:"",message:""}}},computed:Object(o["a"])({},Object(r["c"])({focus:function(e){return e.map.focus},dark:function(e){return e.isDark}}),{isVisible:{get:function(){return this.$store.state.isMessageDialog},set:function(){return this.closeDialog()}},isFormUncomplete:function(){var e=this,t=Object.keys(this.form).filter((function(t){return!e.form[t]}));return!!t.length},customDialogClass:function(){return this.dark?"alerts-dialog dark":"alerts-dialog light"}}),methods:{handleMessageChange:function(e){this.form.message=e},submitForm:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.isSendingData=!0,t.next=3,Object(c["f"])(Object(o["a"])({user_id:e.$auth.user.sub,id:e.focus.id},e.form));case 3:s=t.sent,s&&"error"!==s.t&&(n=!(!s.data.m||!s.data.m.length)&&s.data.m[0],n&&(n.reject_reason?e.$notify({type:"error",title:"Something wrong happened ...",message:"The message couldn't be sent. Was rejected because of: ".concat(n.reject_reason)}):e.$notify({type:"success",title:"Success!",message:"Message has been sent to: ".concat(n.email)})),e.closeDialog()),e.isSendingData=!1;case 6:case"end":return t.stop()}}),t)})))()},closeDialog:function(){this.$store.commit("".concat(u["n"]),!1),this.$store.commit("".concat(l["f"]),null),this.form={subject:"",message:""}}}},m=d,f=s("2877"),g=Object(f["a"])(m,n,a,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-2d0c0a53.d27c9500.js.map