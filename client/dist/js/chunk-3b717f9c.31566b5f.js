(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3b717f9c"],{2097:function(e,t,a){"use strict";var r=a("4dcf"),n=a.n(r);n.a},"450f":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.closeSheet,expression:"closeSheet"}]},[a("div",{staticClass:"text-center h-fit-full flex align-items-center",attrs:{"aria-haspopup":"true"}},[a("el-button",{staticClass:"drawer-opener fs-small font-regular mt-1",class:{"text-white--hsl":e.dark},attrs:{type:"text"},on:{click:e.toggleVisibility}},[e._v(" Market Place "),a("i",{staticClass:"el-icon-arrow-down icon sm-icon",attrs:{"aria-hidden":"true"}})]),a("transition",{attrs:{tag:"div","enter-active-class":"animated faster slideInDown","leave-active-class":"animated faster slideOutUp",mode:"out-in"}},[e.isOpen?a("div",{staticClass:"wrapper flex column bg-white pr6 pl6 pt12",class:{"bg-white":!e.dark,"bg-charcoal":e.dark}},[a("h1",{staticClass:"title w-fit-full mb8"},[e._v("Community Market Place")]),a("el-table",{staticClass:"w-fit-full",class:{dark:e.dark},attrs:{data:e.marketplaceData,id:"marketplace-banner-table",height:120,border:"",size:"small","max-height":"620px",stripe:""}},[a("el-table-column",{attrs:{label:"Date",prop:"rgDate",formatter:e.formatDate}}),a("el-table-column",{attrs:{label:"Item"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t.row.item)}})]}}],null,!1,1213731009)}),a("el-table-column",{attrs:{label:"Request"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{domProps:{innerHTML:e._s(t.row.request)}})]}}],null,!1,2496109925)}),a("el-table-column",{attrs:{prop:"status",label:"Status"}}),a("el-table-column",{attrs:{fixed:"right",label:"Operations",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"flex row justify-content-center"},[a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.toggleDialog(t.row)}}},[e._v(" Make an offer ")])],1)]}}],null,!1,4073196231)})],1)],1):e._e()])],1),a("el-dialog",{attrs:{"show-close":!1,"append-to-body":!0,visible:e.dialog.isVisible},on:{"update:visible":function(t){return e.$set(e.dialog,"isVisible",t)}}},[a("div",{staticClass:"flex w-fit-full justify-content-space-between",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"el-dialog__title"},[e._v(" Make An Offer ")]),a("el-button",{staticClass:"p0 m0",attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.closeDialog(t)}}},[a("span",{staticClass:"fs-medium cursor-pointer"},[a("fa",{attrs:{icon:["fas","times"]}})],1)])],1),a("el-form",{ref:"dialogForm",attrs:{model:e.dialog.form,rules:e.dialogFormRules}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{md:24,lg:12}},[a("el-form-item",{attrs:{label:"Name",prop:"name"}},[a("el-input",{model:{value:e.dialog.form.name,callback:function(t){e.$set(e.dialog.form,"name",t)},expression:"dialog.form.name"}})],1)],1),a("el-col",{attrs:{md:24,lg:12}},[a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{model:{value:e.dialog.form.email,callback:function(t){e.$set(e.dialog.form,"email",t)},expression:"dialog.form.email"}})],1)],1),a("el-col",{attrs:{lg:24}},[a("el-form-item",{attrs:{label:"Subject",prop:"subject"}},[a("el-input",{model:{value:e.dialog.form.subject,callback:function(t){e.$set(e.dialog.form,"subject",t)},expression:"dialog.form.subject"}})],1)],1),a("el-col",{attrs:{lg:24}},[a("el-form-item",{attrs:{label:"Message",prop:"message"}},[a("el-input",{ref:"textareaInput",attrs:{type:"textarea",rows:"4"},model:{value:e.dialog.form.message,callback:function(t){e.$set(e.dialog.form,"message",t)},expression:"dialog.form.message"}})],1)],1)],1)],1),e.dialog.rawMessage?a("el-collapse",[a("el-collapse-item",{attrs:{title:"From Request"}},[a("div",{domProps:{innerHTML:e._s(e.dialog.rawMessage)}})])],1):e._e(),a("span",{staticClass:"flex row wrap flex-end",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticClass:"mr4",on:{click:function(t){return t.stopPropagation(),e.closeDialog(t)}}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary",loading:e.isSendingData},on:{click:function(t){return t.stopPropagation(),e.sendOffer(t)}}},[e._v("Confirm")])],1)],1)],1)},n=[],s=(a("99af"),a("caad"),a("d81d"),a("b0c0"),a("ac1f"),a("2532"),a("1276"),a("5530")),i=(a("96cf"),a("1da1")),o=a("e67d"),l=a.n(o),c=a("2c8b"),u=a("9a1e"),m=a("780a"),d=a("a4dc"),f=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,m["a"].get("".concat(d["a"].url,"/marketplace/list"));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var a,r,n,s,i,o,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.name,r=t.email,n=t.subject,s=t.message,i=t.user_id,o=new FormData,o.append("name",a),o.append("email",r),o.append("subject",n),o.append("message",s),e.next=8,m["a"].post("".concat(d["a"].url,"/auth/message/makeanoffer"),o,{withCredentials:!0,headers:{userid:i,Authorization:"Bearer "+d["a"].bearer()}});case 8:return l=e.sent,e.abrupt("return",l);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g={data:function(){return{marketplaceData:[],isSendingData:!1,isOpen:!1,dialog:{isVisible:!1,rawMessage:null,form:{name:"",email:"",subject:"",message:""}}}},computed:{dark:function(){return this.$store.state.isDark},dialogFormRules:function(){return{name:[{required:!0,message:"Please input your full name",trigger:"blur"},{max:50,message:"Length should be max 50",trigger:["change","blur"]}],email:[{required:!0,message:"Please input your email",trigger:"blur"},{type:"email",required:!0,message:"Please input a valid email",trigger:"change"}],subject:[],message:[]}}},mounted:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.getMarketPlace();case 2:return t.next=4,e.getUserData();case 4:case"end":return t.stop()}}),t)})))()},methods:{getUserData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""===e.dialog.form.email&&""===e.dialog.form.name){t.next=2;break}return t.abrupt("return");case 2:return t.t0=u["b"],t.next=5,e.$auth.getUserID();case 5:return t.t1=t.sent,t.next=8,(0,t.t0)(t.t1);case 8:return a=t.sent,a&&(e.dialog.form.email=a.email,e.dialog.form.name=a.name,a.user_metadata&&a.user_metadata.lastname&&(e.dialog.form.name=e.dialog.form.name+" "+a.user_metadata.lastname)),t.abrupt("return",a);case 11:case"end":return t.stop()}}),t)})))()},getMarketPlace:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f();case 2:a=t.sent,a&&a.data&&a.data.r&&(e.marketplaceData=a.data.r.map((function(t){var a=e.formatMessage(t.message).split("Type:")[1].split('<p style="font-size: 14px">')[1],r=t.message.includes("Custom Request: true");return{raw:t.message,rgDate:t.rgDate,status:t.status?"Open":"Closed",item:"".concat(e.formatMessage(t.message).split("Element:")[1].split("<p style")[0]),request:"".concat(r?"Data Center space: Custom requirements":a?"<p>".concat(a.split("</p>")[0]):"None")}})));case 4:case"end":return t.stop()}}),t)})))()},sendOffer:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,e.isSendingData=!0,t.t0=p,t.t1=s["a"],t.t2=Object(s["a"])({},e.dialog.form),t.t3={},t.t4="".concat(e.dialog.form.message," <br> <br> <hr /> ").concat(e.dialog.rawMessage),t.next=9,e.$auth.getUserID();case 9:return t.t5=t.sent,t.t6={message:t.t4,user_id:t.t5},t.t7=(0,t.t1)(t.t2,t.t3,t.t6),t.next=14,(0,t.t0)(t.t7);case 14:a=t.sent,r=a.t,"error"!=r&&e.closeDialog(),t.next=22;break;case 19:t.prev=19,t.t8=t["catch"](0),console.error(t.t8);case 22:return t.prev=22,e.isSendingData=!1,t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[0,19,22,25]])})))()},toggleDialog:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:t.dialog.isVisible=!0,t.dialog.form.subject="Want to make an offer for this request: ".concat(e.item.split("</p>")[0]," - ").concat(e.request.split("<p>")[1]?e.request.split("<p>")[1]:e.request),t.dialog.rawMessage=e.raw,setTimeout((function(){t.$refs.textareaInput.focus()}),320);case 4:case"end":return a.stop()}}),a)})))()},closeDialog:function(){this.dialog.isVisible=!1,this.dialog.form.message="",this.dialog.form.subject="",this.dialog.rawMessage=null},formatDate:function(e,t,a){return Object(c["a"])(a)},formatMessage:function(e){var t=e.split("The user has the following request:</p>");return t[1]},toggleVisibility:function(){this.isOpen=!this.isOpen},closeSheet:function(){this.dialog.isVisible||(this.isOpen=!1)}},directives:{ClickOutside:l.a}},b=g,h=(a("2097"),a("2877")),v=Object(h["a"])(b,r,n,!1,null,"7ae9b101",null);t["default"]=v.exports},"4dcf":function(e,t,a){},e67d:function(e,t){function a(e){return"function"===typeof e.value||(console.warn("[Vue-click-outside:] provided expression",e.expression,"is not a function."),!1)}function r(e,t){if(!e||!t)return!1;for(var a=0,r=t.length;a<r;a++)try{if(e.contains(t[a]))return!0;if(t[a].contains(e))return!1}catch(n){return!1}return!1}function n(e){return"undefined"!==typeof e.componentInstance&&e.componentInstance.$isServer}e.exports={bind:function(e,t,s){if(!a(t))return;function i(t){if(s.context){var a=t.path||t.composedPath&&t.composedPath();a&&a.length>0&&a.unshift(t.target),e.contains(t.target)||r(s.context.popupItem,a)||e.__vueClickOutside__.callback(t)}}e.__vueClickOutside__={handler:i,callback:t.value};const o="ontouchstart"in document.documentElement?"touchstart":"click";!n(s)&&document.addEventListener(o,i)},update:function(e,t){a(t)&&(e.__vueClickOutside__.callback=t.value)},unbind:function(e,t,a){const r="ontouchstart"in document.documentElement?"touchstart":"click";!n(a)&&e.__vueClickOutside__&&document.removeEventListener(r,e.__vueClickOutside__.handler),delete e.__vueClickOutside__}}}}]);
//# sourceMappingURL=chunk-3b717f9c.31566b5f.js.map